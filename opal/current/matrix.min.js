Opal.modules.e2mmap=function(Opal){function $rb_minus(lhs,rhs){return"number"==typeof lhs&&"number"==typeof rhs?lhs-rhs:lhs["$-"](rhs)}Opal.top;var $nesting=[],nil=Opal.nil,$$=(Opal.const_get_qualified,Opal.const_get_relative),$module=(Opal.breaker,Opal.slice,Opal.module),$send=Opal.send,$truthy=Opal.truthy,$hash2=Opal.hash2,$gvars=Opal.gvars;return Opal.add_stubs(["$<","$bind","$module_eval","$Raise","$class","$extend","$def_e2message","$def_exception","$instance_eval","$[]=","$-","$new","$const_defined?","$remove_const","$const_set","$e2mm_message","$nil?","$caller","$=~","$[]","$quote","$shift","$raise","$sprintf","$Fail","$inspect","$each","$ancestors"]),function($base,$parent_nesting){var $Exception2MessageMapper_extend_object$1,$Exception2MessageMapper_bind$2,$Exception2MessageMapper_Raise$6,$Exception2MessageMapper_def_e2message$7,$Exception2MessageMapper_def_exception$8,$Exception2MessageMapper_def_e2message$9,$Exception2MessageMapper_def_exception$11,$Exception2MessageMapper_Raise$14,$Exception2MessageMapper_e2mm_message$15,self=$module($base,"Exception2MessageMapper"),$nesting=[self].concat($parent_nesting);Opal.const_set($nesting[0],"E2MM",$$($nesting,"Exception2MessageMapper")),Opal.defs($$($nesting,"E2MM"),"$extend_object",$Exception2MessageMapper_extend_object$1=function(cl){var $zuper_ii,lhs,rhs,$iter=$Exception2MessageMapper_extend_object$1.$$p,$zuper=nil,$zuper_i=nil;for($iter&&($Exception2MessageMapper_extend_object$1.$$p=null),$zuper_i=0,$zuper_ii=arguments.length,$zuper=new Array($zuper_ii);$zuper_i<$zuper_ii;$zuper_i++)$zuper[$zuper_i]=arguments[$zuper_i];return $send(this,Opal.find_super_dispatcher(this,"extend_object",$Exception2MessageMapper_extend_object$1,!1,this.$$class.$$prototype),$zuper,$iter),$truthy((lhs=cl,rhs=$$($nesting,"E2MM"),"number"==typeof lhs&&"number"==typeof rhs?lhs<rhs:lhs["$<"](rhs)))?nil:cl.$bind(this)},$Exception2MessageMapper_extend_object$1.$$arity=1),Opal.def(self,"$bind",$Exception2MessageMapper_bind$2=function(cl){var $$3;return $send(this,"module_eval",[],(($$3=function(){var $Raise$4,$included$5,self=$$3.$$s||this;return Opal.def(self,"$Raise",$Raise$4=function($a,$b){var $post_args,err,rest;return 0<($post_args=Opal.slice.call(arguments,0,arguments.length)).length&&(err=$post_args[0],$post_args.splice(0,1)),null==err&&(err=nil),rest=$post_args,$send($$($nesting,"Exception2MessageMapper"),"Raise",[this.$class(),err].concat(Opal.to_a(rest)))},$Raise$4.$$arity=-1),Opal.alias(self,"Fail","Raise"),function(self,$parent_nesting){[self].concat($parent_nesting);Opal.udef(self,"$included")}(Opal.get_singleton_class(self),$nesting),Opal.defs(self,"$included",$included$5=function(mod){return mod.$extend($$($nesting,"Exception2MessageMapper"))},$included$5.$$arity=1),nil&&"included"}).$$s=this,$$3.$$arity=0,$$3))},$Exception2MessageMapper_bind$2.$$arity=1),Opal.def(self,"$Raise",$Exception2MessageMapper_Raise$6=function($a,$b){var $post_args,err,rest,self=this;return 0<($post_args=Opal.slice.call(arguments,0,arguments.length)).length&&(err=$post_args[0],$post_args.splice(0,1)),null==err&&(err=nil),rest=$post_args,$send($$($nesting,"E2MM"),"Raise",[self,err].concat(Opal.to_a(rest)))},$Exception2MessageMapper_Raise$6.$$arity=-1),Opal.alias(self,"Fail","Raise"),Opal.alias(self,"fail","Raise"),Opal.def(self,"$def_e2message",$Exception2MessageMapper_def_e2message$7=function(c,m){return $$($nesting,"E2MM").$def_e2message(this,c,m)},$Exception2MessageMapper_def_e2message$7.$$arity=2),Opal.def(self,"$def_exception",$Exception2MessageMapper_def_exception$8=function(n,m,s){return null==s&&(s=$$($nesting,"StandardError")),$$($nesting,"E2MM").$def_exception(this,n,m,s)},$Exception2MessageMapper_def_exception$8.$$arity=-3),self.MessageMap=$hash2([],{}),Opal.defs($$($nesting,"E2MM"),"$def_e2message",$Exception2MessageMapper_def_e2message$9=function(k,c,m){var $$10;return $send($$($nesting,"E2MM"),"instance_eval",[],(($$10=function(){var $writer,self=$$10.$$s||this;return null==self.MessageMap&&(self.MessageMap=nil),$writer=[[k,c],m],$send(self.MessageMap,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]}).$$s=this,$$10.$$arity=0,$$10)),c},$Exception2MessageMapper_def_e2message$9.$$arity=3),Opal.defs($$($nesting,"E2MM"),"$def_exception",$Exception2MessageMapper_def_exception$11=function(k,n,m,s){var $$12,$$13,e;return null==s&&(s=$$($nesting,"StandardError")),e=$$($nesting,"Class").$new(s),$send($$($nesting,"E2MM"),"instance_eval",[],(($$12=function(){var $writer,self=$$12.$$s||this;return null==self.MessageMap&&(self.MessageMap=nil),$writer=[[k,e],m],$send(self.MessageMap,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]}).$$s=this,$$12.$$arity=0,$$12)),$truthy(k["$const_defined?"](n,!1))&&$send(k,"module_eval",[],(($$13=function(){return($$13.$$s||this).$remove_const(n)}).$$s=this,$$13.$$arity=0,$$13)),k.$const_set(n,e)},$Exception2MessageMapper_def_exception$11.$$arity=-4),Opal.defs($$($nesting,"E2MM"),"$Raise",$Exception2MessageMapper_Raise$14=function($a,$b,$c){var $post_args,klass,err,rest,self=this,form=nil,b=nil;return null==$gvars["@"]&&($gvars["@"]=nil),0<($post_args=Opal.slice.call(arguments,0,arguments.length)).length&&(klass=$post_args[0],$post_args.splice(0,1)),null==klass&&(klass=$$($nesting,"E2MM")),0<$post_args.length&&(err=$post_args[0],$post_args.splice(0,1)),null==err&&(err=nil),rest=$post_args,$truthy(form=self.$e2mm_message(klass,err))?(b=$truthy($gvars["@"]["$nil?"]())?self.$caller(1):$gvars["@"],$truthy(b["$[]"](0)["$=~"](new RegExp("^"+$$($nesting,"Regexp").$quote("./e2mmap.rb".$force_encoding("US-ASCII"))+":")))&&b.$shift(),self.$raise(err,$send(self,"sprintf",[form].concat(Opal.to_a(rest))),b)):$$($nesting,"E2MM").$Fail($$($nesting,"E2MM"),$$($nesting,"ErrNotRegisteredException"),err.$inspect())},$Exception2MessageMapper_Raise$14.$$arity=-1),function(self,$parent_nesting){[self].concat($parent_nesting);Opal.alias(self,"Fail","Raise")}(Opal.get_singleton_class($$($nesting,"E2MM")),$nesting),Opal.defs($$($nesting,"E2MM"),"$e2mm_message",$Exception2MessageMapper_e2mm_message$15=function(klass,exp){try{var $$16;return $send(klass.$ancestors(),"each",[],(($$16=function(c){var mes,self=$$16.$$s||this;if(null==self.MessageMap&&(self.MessageMap=nil),null==c&&(c=nil),!$truthy(mes=self.MessageMap["$[]"]([c,exp])))return nil;Opal.ret(mes)}).$$s=this,$$16.$$arity=1,$$16)),nil}catch($returner){if($returner===Opal.returner)return $returner.$v;throw $returner}},$Exception2MessageMapper_e2mm_message$15.$$arity=2),function(self,$parent_nesting){[self].concat($parent_nesting);Opal.alias(self,"message","e2mm_message")}(Opal.get_singleton_class(self),$nesting),$$($nesting,"E2MM").$def_exception($$($nesting,"E2MM"),"ErrNotRegisteredException","not registered exception(%s)")}($nesting[0],$nesting)},Opal.modules["matrix/eigenvalue_decomposition"]=function(Opal){function $rb_minus(lhs,rhs){return"number"==typeof lhs&&"number"==typeof rhs?lhs-rhs:lhs["$-"](rhs)}function $rb_gt(lhs,rhs){return"number"==typeof lhs&&"number"==typeof rhs?rhs<lhs:lhs["$>"](rhs)}function $rb_plus(lhs,rhs){return"number"==typeof lhs&&"number"==typeof rhs?lhs+rhs:lhs["$+"](rhs)}function $rb_divide(lhs,rhs){return"number"==typeof lhs&&"number"==typeof rhs?lhs/rhs:lhs["$/"](rhs)}function $rb_times(lhs,rhs){return"number"==typeof lhs&&"number"==typeof rhs?lhs*rhs:lhs["$*"](rhs)}function $rb_lt(lhs,rhs){return"number"==typeof lhs&&"number"==typeof rhs?lhs<rhs:lhs["$<"](rhs)}function $rb_ge(lhs,rhs){return"number"==typeof lhs&&"number"==typeof rhs?rhs<=lhs:lhs["$>="](rhs)}Opal.top;var $nesting=[],nil=Opal.nil,$$$=Opal.const_get_qualified,$$=Opal.const_get_relative,$klass=(Opal.breaker,Opal.slice,Opal.klass),$truthy=Opal.truthy,$send=Opal.send;return Opal.add_stubs(["$is_a?","$raise","$class","$row_count","$new","$symmetric?","$to_a","$tridiagonalize","$diagonalize","$reduce_to_hessenberg","$hessenberg_to_real_schur","$send","$transpose","$build_eigenvectors","$inverse","$dup","$each_with_index","$==","$Complex","$[]","$[]=","$-","$map","$diagonal","$eigenvalues","$v","$d","$v_inv","$alias_method","$private","$>","$+","$-@","$abs","$/","$*","$times","$downto","$sqrt","$upto","$!=","$max","$<","$<=","$hypot","$>=","$min","$cdiv"]),function($base,$super,$parent_nesting){var $nesting=[$klass($base,null,"Matrix")].concat($parent_nesting);return function($base,$super,$parent_nesting){var $EigenvalueDecomposition_initialize$1,$EigenvalueDecomposition_eigenvector_matrix$3,$EigenvalueDecomposition_eigenvector_matrix_inv$4,$EigenvalueDecomposition_eigenvalues$5,$EigenvalueDecomposition_eigenvectors$7,$EigenvalueDecomposition_eigenvalue_matrix$9,$EigenvalueDecomposition_to_ary$10,$EigenvalueDecomposition_build_eigenvectors$11,$EigenvalueDecomposition_cdiv$16,$EigenvalueDecomposition_tridiagonalize$17,$EigenvalueDecomposition_diagonalize$37,$EigenvalueDecomposition_reduce_to_hessenberg$46,$EigenvalueDecomposition_hessenberg_to_real_schur$63,self=$klass($base,null,"EigenvalueDecomposition"),$nesting=[self].concat($parent_nesting);return self.$$prototype.size=self.$$prototype.symmetric=self.$$prototype.d=self.$$prototype.e=self.$$prototype.v=self.$$prototype.h=nil,Opal.def(self,"$initialize",$EigenvalueDecomposition_initialize$1=function(a){var $$2;return $truthy(a["$is_a?"]($$($nesting,"Matrix")))||this.$raise($$($nesting,"TypeError"),"Expected Matrix but got "+a.$class()),this.size=a.$row_count(),this.d=$$($nesting,"Array").$new(this.size,0),this.e=$$($nesting,"Array").$new(this.size,0),$truthy(this.symmetric=a["$symmetric?"]())?(this.v=a.$to_a(),this.$tridiagonalize(),this.$diagonalize()):(this.v=$send($$($nesting,"Array"),"new",[this.size],(($$2=function(){var self=$$2.$$s||this;return null==self.size&&(self.size=nil),$$($nesting,"Array").$new(self.size,0)}).$$s=this,$$2.$$arity=0,$$2)),this.h=a.$to_a(),this.ort=$$($nesting,"Array").$new(this.size,0),this.$reduce_to_hessenberg(),this.$hessenberg_to_real_schur())},$EigenvalueDecomposition_initialize$1.$$arity=1),Opal.def(self,"$eigenvector_matrix",$EigenvalueDecomposition_eigenvector_matrix$3=function(){return $$($nesting,"Matrix").$send("new",this.$build_eigenvectors().$transpose())},$EigenvalueDecomposition_eigenvector_matrix$3.$$arity=0),Opal.alias(self,"v","eigenvector_matrix"),Opal.def(self,"$eigenvector_matrix_inv",$EigenvalueDecomposition_eigenvector_matrix_inv$4=function(){var r=nil;return r=$$($nesting,"Matrix").$send("new",this.$build_eigenvectors()),$truthy(this.symmetric)||(r=r.$transpose().$inverse()),r},$EigenvalueDecomposition_eigenvector_matrix_inv$4.$$arity=0),Opal.alias(self,"v_inv","eigenvector_matrix_inv"),Opal.def(self,"$eigenvalues",$EigenvalueDecomposition_eigenvalues$5=function(){var $$6,values=nil;return values=this.d.$dup(),$send(this.e,"each_with_index",[],(($$6=function(imag,i){var self=$$6.$$s||this,$writer=nil;return null==imag&&(imag=nil),null==i&&(i=nil),imag["$=="](0)?nil:($writer=[i,self.$Complex(values["$[]"](i),imag)],$send(values,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)])}).$$s=this,$$6.$$arity=2,$$6)),values},$EigenvalueDecomposition_eigenvalues$5.$$arity=0),Opal.def(self,"$eigenvectors",$EigenvalueDecomposition_eigenvectors$7=function(){var $$8;return $send(this.$build_eigenvectors(),"map",[],(($$8=function(ev){$$8.$$s;return null==ev&&(ev=nil),$$($nesting,"Vector").$send("new",ev)}).$$s=this,$$8.$$arity=1,$$8))},$EigenvalueDecomposition_eigenvectors$7.$$arity=0),Opal.def(self,"$eigenvalue_matrix",$EigenvalueDecomposition_eigenvalue_matrix$9=function(){return $send($$($nesting,"Matrix"),"diagonal",Opal.to_a(this.$eigenvalues()))},$EigenvalueDecomposition_eigenvalue_matrix$9.$$arity=0),Opal.alias(self,"d","eigenvalue_matrix"),Opal.def(self,"$to_ary",$EigenvalueDecomposition_to_ary$10=function(){return[this.$v(),this.$d(),this.$v_inv()]},$EigenvalueDecomposition_to_ary$10.$$arity=0),self.$alias_method("to_a","to_ary"),self.$private(),Opal.def(self,"$build_eigenvectors",$EigenvalueDecomposition_build_eigenvectors$11=function(){var $$12;return $send(this.e.$each_with_index(),"map",[],(($$12=function(imag,i){var $$13,$$14,$$15,self=$$12.$$s||this;return null==self.size&&(self.size=nil),null==imag&&(imag=nil),null==i&&(i=nil),imag["$=="](0)?$send($$($nesting,"Array"),"new",[self.size],(($$13=function(j){var self=$$13.$$s||this;return null==self.v&&(self.v=nil),null==j&&(j=nil),self.v["$[]"](j)["$[]"](i)}).$$s=self,$$13.$$arity=1,$$13)):$truthy($rb_gt(imag,0))?$send($$($nesting,"Array"),"new",[self.size],(($$14=function(j){var self=$$14.$$s||this;return null==self.v&&(self.v=nil),null==j&&(j=nil),self.$Complex(self.v["$[]"](j)["$[]"](i),self.v["$[]"](j)["$[]"]($rb_plus(i,1)))}).$$s=self,$$14.$$arity=1,$$14)):$send($$($nesting,"Array"),"new",[self.size],(($$15=function(j){var self=$$15.$$s||this;return null==self.v&&(self.v=nil),null==j&&(j=nil),self.$Complex(self.v["$[]"](j)["$[]"]($rb_minus(i,1)),self.v["$[]"](j)["$[]"](i)["$-@"]())}).$$s=self,$$15.$$arity=1,$$15))}).$$s=this,$$12.$$arity=2,$$12))},$EigenvalueDecomposition_build_eigenvectors$11.$$arity=0),Opal.def(self,"$cdiv",$EigenvalueDecomposition_cdiv$16=function(xr,xi,yr,yi){var r=nil,d=nil;return $truthy($rb_gt(yr.$abs(),yi.$abs()))?(d=$rb_plus(yr,$rb_times(r=$rb_divide(yi,yr),yi)),[$rb_divide($rb_plus(xr,$rb_times(r,xi)),d),$rb_divide($rb_minus(xi,$rb_times(r,xr)),d)]):(d=$rb_plus(yi,$rb_times(r=$rb_divide(yr,yi),yr)),[$rb_divide($rb_plus($rb_times(r,xr),xi),d),$rb_divide($rb_minus($rb_times(r,xi),xr),d)])},$EigenvalueDecomposition_cdiv$16.$$arity=4),Opal.def(self,"$tridiagonalize",$EigenvalueDecomposition_tridiagonalize$17=function(){var $$18,$$19,$$30,$$36,$writer=nil;return $send(this.size,"times",[],(($$18=function(j){var $writer,self=$$18.$$s||this;return null==self.v&&(self.v=nil),null==self.size&&(self.size=nil),null==self.d&&(self.d=nil),null==j&&(j=nil),$writer=[j,self.v["$[]"]($rb_minus(self.size,1))["$[]"](j)],$send(self.d,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]}).$$s=this,$$18.$$arity=1,$$18)),$send($rb_minus(this.size,1),"downto",[$rb_plus(0,1)],(($$19=function(i){var $$20,$$21,$$22,$$23,$$24,$$26,$$27,$$28,self=$$19.$$s||this,scale=nil,h=nil,$writer=nil,f=nil,g=nil,hh=nil;return null==self.d&&(self.d=nil),null==self.e&&(self.e=nil),null==i&&(i=nil),h=scale=0,$send(i,"times",[],(($$20=function(k){var self=$$20.$$s||this;return null==self.d&&(self.d=nil),null==k&&(k=nil),scale=$rb_plus(scale,self.d["$[]"](k).$abs())}).$$s=self,$$20.$$arity=1,$$20)),$truthy(scale["$=="](0))?($writer=[i,self.d["$[]"]($rb_minus(i,1))],$send(self.e,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)],$send(i,"times",[],(($$21=function(j){var self=$$21.$$s||this;return null==self.v&&(self.v=nil),null==self.d&&(self.d=nil),null==j&&(j=nil),$writer=[j,self.v["$[]"]($rb_minus(i,1))["$[]"](j)],$send(self.d,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)],$writer=[j,0],$send(self.v["$[]"](i),"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)],$writer=[i,0],$send(self.v["$[]"](j),"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]}).$$s=self,$$21.$$arity=1,$$21))):($send(i,"times",[],(($$22=function(k){var self=$$22.$$s||this;return null==self.d&&(self.d=nil),null==k&&(k=nil),$writer=[k,$rb_divide(self.d["$[]"](k),scale)],$send(self.d,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)],h=$rb_plus(h,$rb_times(self.d["$[]"](k),self.d["$[]"](k)))}).$$s=self,$$22.$$arity=1,$$22)),f=self.d["$[]"]($rb_minus(i,1)),g=$$($nesting,"Math").$sqrt(h),$truthy($rb_gt(f,0))&&(g=g["$-@"]()),$writer=[i,$rb_times(scale,g)],$send(self.e,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)],h=$rb_minus(h,$rb_times(f,g)),$writer=[$rb_minus(i,1),$rb_minus(f,g)],$send(self.d,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)],$send(i,"times",[],(($$23=function(j){var self=$$23.$$s||this;return null==self.e&&(self.e=nil),null==j&&(j=nil),$writer=[j,0],$send(self.e,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]}).$$s=self,$$23.$$arity=1,$$23)),$send(i,"times",[],(($$24=function(j){var $$25,self=$$24.$$s||this;return null==self.d&&(self.d=nil),null==self.v&&(self.v=nil),null==self.e&&(self.e=nil),null==j&&(j=nil),f=self.d["$[]"](j),$writer=[i,f],$send(self.v["$[]"](j),"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)],g=$rb_plus(self.e["$[]"](j),$rb_times(self.v["$[]"](j)["$[]"](j),f)),$send($rb_plus(j,1),"upto",[$rb_minus(i,1)],(($$25=function(k){var self=$$25.$$s||this;return null==self.v&&(self.v=nil),null==self.d&&(self.d=nil),null==self.e&&(self.e=nil),null==k&&(k=nil),g=$rb_plus(g,$rb_times(self.v["$[]"](k)["$[]"](j),self.d["$[]"](k))),$writer=[k,$rb_plus(self.e["$[]"](k),$rb_times(self.v["$[]"](k)["$[]"](j),f))],$send(self.e,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]}).$$s=self,$$25.$$arity=1,$$25)),$writer=[j,g],$send(self.e,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]}).$$s=self,$$24.$$arity=1,$$24)),f=0,$send(i,"times",[],(($$26=function(j){var self=$$26.$$s||this;return null==self.e&&(self.e=nil),null==self.d&&(self.d=nil),null==j&&(j=nil),$writer=[j,$rb_divide(self.e["$[]"](j),h)],$send(self.e,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)],f=$rb_plus(f,$rb_times(self.e["$[]"](j),self.d["$[]"](j)))}).$$s=self,$$26.$$arity=1,$$26)),hh=$rb_divide(f,$rb_plus(h,h)),$send(i,"times",[],(($$27=function(j){var self=$$27.$$s||this;return null==self.e&&(self.e=nil),null==self.d&&(self.d=nil),null==j&&(j=nil),$writer=[j,$rb_minus(self.e["$[]"](j),$rb_times(hh,self.d["$[]"](j)))],$send(self.e,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]}).$$s=self,$$27.$$arity=1,$$27)),$send(i,"times",[],(($$28=function(j){var $$29,self=$$28.$$s||this;return null==self.d&&(self.d=nil),null==self.e&&(self.e=nil),null==self.v&&(self.v=nil),null==j&&(j=nil),f=self.d["$[]"](j),g=self.e["$[]"](j),$send(j,"upto",[$rb_minus(i,1)],(($$29=function(k){var self=$$29.$$s||this,$binary_op_recvr_tmp_3=nil;return null==self.v&&(self.v=nil),null==self.e&&(self.e=nil),null==self.d&&(self.d=nil),null==k&&(k=nil),$binary_op_recvr_tmp_3=self.v["$[]"](k),$writer=[j,$rb_minus($binary_op_recvr_tmp_3["$[]"](j),$rb_plus($rb_times(f,self.e["$[]"](k)),$rb_times(g,self.d["$[]"](k))))],$send($binary_op_recvr_tmp_3,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]}).$$s=self,$$29.$$arity=1,$$29)),$writer=[j,self.v["$[]"]($rb_minus(i,1))["$[]"](j)],$send(self.d,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)],$writer=[j,0],$send(self.v["$[]"](i),"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]}).$$s=self,$$28.$$arity=1,$$28))),$writer=[i,h],$send(self.d,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]}).$$s=this,$$19.$$arity=1,$$19)),$send(0,"upto",[$rb_minus($rb_minus(this.size,1),1)],(($$30=function(i){var $$31,$$32,$$35,self=$$30.$$s||this,$writer=nil,h=nil;return null==self.v&&(self.v=nil),null==self.size&&(self.size=nil),null==self.d&&(self.d=nil),null==i&&(i=nil),$writer=[i,self.v["$[]"](i)["$[]"](i)],$send(self.v["$[]"]($rb_minus(self.size,1)),"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)],$writer=[i,1],$send(self.v["$[]"](i),"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)],h=self.d["$[]"]($rb_plus(i,1)),$truthy(h["$!="](0))&&($send(0,"upto",[i],(($$31=function(k){var self=$$31.$$s||this;return null==self.v&&(self.v=nil),null==self.d&&(self.d=nil),null==k&&(k=nil),$writer=[k,$rb_divide(self.v["$[]"](k)["$[]"]($rb_plus(i,1)),h)],$send(self.d,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]}).$$s=self,$$31.$$arity=1,$$31)),$send(0,"upto",[i],(($$32=function(j){var $$33,$$34,self=$$32.$$s||this,g=nil;return null==j&&(j=nil),$send(g=0,"upto",[i],(($$33=function(k){var self=$$33.$$s||this;return null==self.v&&(self.v=nil),null==k&&(k=nil),g=$rb_plus(g,$rb_times(self.v["$[]"](k)["$[]"]($rb_plus(i,1)),self.v["$[]"](k)["$[]"](j)))}).$$s=self,$$33.$$arity=1,$$33)),$send(0,"upto",[i],(($$34=function(k){var self=$$34.$$s||this,$binary_op_recvr_tmp_4=nil;return null==self.v&&(self.v=nil),null==self.d&&(self.d=nil),null==k&&(k=nil),$binary_op_recvr_tmp_4=self.v["$[]"](k),$writer=[j,$rb_minus($binary_op_recvr_tmp_4["$[]"](j),$rb_times(g,self.d["$[]"](k)))],$send($binary_op_recvr_tmp_4,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]}).$$s=self,$$34.$$arity=1,$$34))}).$$s=self,$$32.$$arity=1,$$32))),$send(0,"upto",[i],(($$35=function(k){var self=$$35.$$s||this;return null==self.v&&(self.v=nil),null==k&&(k=nil),$writer=[$rb_plus(i,1),0],$send(self.v["$[]"](k),"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]}).$$s=self,$$35.$$arity=1,$$35))}).$$s=this,$$30.$$arity=1,$$30)),$send(this.size,"times",[],(($$36=function(j){var self=$$36.$$s||this,$writer=nil;return null==self.v&&(self.v=nil),null==self.size&&(self.size=nil),null==self.d&&(self.d=nil),null==j&&(j=nil),$writer=[j,self.v["$[]"]($rb_minus(self.size,1))["$[]"](j)],$send(self.d,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)],$writer=[j,0],$send(self.v["$[]"]($rb_minus(self.size,1)),"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]}).$$s=this,$$36.$$arity=1,$$36)),$writer=[$rb_minus(this.size,1),1],$send(this.v["$[]"]($rb_minus(this.size,1)),"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)],$writer=[0,0],$send(this.e,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]},$EigenvalueDecomposition_tridiagonalize$17.$$arity=0),Opal.def(self,"$diagonalize",$EigenvalueDecomposition_diagonalize$37=function(){var $$38,$$39,$$43,eps,$writer=nil,f=nil,tst1=nil;return $send(1,"upto",[$rb_minus(this.size,1)],(($$38=function(i){var $writer,self=$$38.$$s||this;return null==self.e&&(self.e=nil),null==i&&(i=nil),$writer=[$rb_minus(i,1),self.e["$[]"](i)],$send(self.e,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]}).$$s=this,$$38.$$arity=1,$$38)),$writer=[$rb_minus(this.size,1),0],$send(this.e,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)],tst1=f=0,eps=$$$($$($nesting,"Float"),"EPSILON"),$send(this.size,"times",[],(($$39=function(l){var $$40,$$41,lhs,rhs,self=$$39.$$s||this,m=nil,iter=nil,g=nil,p=nil,r=nil,dl1=nil,h=nil,c=nil,c2=nil,c3=nil,el1=nil,s=nil,s2=nil;for(null==self.d&&(self.d=nil),null==self.e&&(self.e=nil),null==self.size&&(self.size=nil),null==l&&(l=nil),tst1=[tst1,$rb_plus(self.d["$[]"](l).$abs(),self.e["$[]"](l).$abs())].$max(),m=l;$truthy($rb_lt(m,self.size))&&!$truthy((lhs=self.e["$[]"](m).$abs(),rhs=$rb_times(eps,tst1),"number"==typeof lhs&&"number"==typeof rhs?lhs<=rhs:lhs["$<="](rhs)));)m=$rb_plus(m,1);if($truthy($rb_gt(m,l)))for(iter=0;$truthy($rb_gt(self.e["$[]"](l).$abs(),$rb_times(eps,tst1)));)iter=$rb_plus(iter,1),g=self.d["$[]"](l),p=$rb_divide($rb_minus(self.d["$[]"]($rb_plus(l,1)),g),$rb_times(2,self.e["$[]"](l))),r=$$($nesting,"Math").$hypot(p,1),$truthy($rb_lt(p,0))&&(r=r["$-@"]()),$writer=[l,$rb_divide(self.e["$[]"](l),$rb_plus(p,r))],$send(self.d,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)],$writer=[$rb_plus(l,1),$rb_times(self.e["$[]"](l),$rb_plus(p,r))],$send(self.d,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)],dl1=self.d["$[]"]($rb_plus(l,1)),h=$rb_minus(g,self.d["$[]"](l)),$send($rb_plus(l,2),"upto",[$rb_minus(self.size,1)],(($$40=function(i){var self=$$40.$$s||this;return null==self.d&&(self.d=nil),null==i&&(i=nil),$writer=[i,$rb_minus(self.d["$[]"](i),h)],$send(self.d,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]}).$$s=self,$$40.$$arity=1,$$40)),f=$rb_plus(f,h),p=self.d["$[]"](m),c3=c2=c=1,el1=self.e["$[]"]($rb_plus(l,1)),s2=s=0,$send($rb_minus(m,1),"downto",[l],(($$41=function(i){var $$42,self=$$41.$$s||this;return null==self.e&&(self.e=nil),null==self.d&&(self.d=nil),null==self.size&&(self.size=nil),null==i&&(i=nil),c3=c2,s2=s,g=$rb_times(c2=c,self.e["$[]"](i)),h=$rb_times(c,p),r=$$($nesting,"Math").$hypot(p,self.e["$[]"](i)),$writer=[$rb_plus(i,1),$rb_times(s,r)],$send(self.e,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)],s=$rb_divide(self.e["$[]"](i),r),c=$rb_divide(p,r),p=$rb_minus($rb_times(c,self.d["$[]"](i)),$rb_times(s,g)),$writer=[$rb_plus(i,1),$rb_plus(h,$rb_times(s,$rb_plus($rb_times(c,g),$rb_times(s,self.d["$[]"](i)))))],$send(self.d,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)],$send(self.size,"times",[],(($$42=function(k){var self=$$42.$$s||this;return null==self.v&&(self.v=nil),null==k&&(k=nil),h=self.v["$[]"](k)["$[]"]($rb_plus(i,1)),$writer=[$rb_plus(i,1),$rb_plus($rb_times(s,self.v["$[]"](k)["$[]"](i)),$rb_times(c,h))],$send(self.v["$[]"](k),"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)],$writer=[i,$rb_minus($rb_times(c,self.v["$[]"](k)["$[]"](i)),$rb_times(s,h))],$send(self.v["$[]"](k),"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]}).$$s=self,$$42.$$arity=1,$$42))}).$$s=self,$$41.$$arity=1,$$41)),p=$rb_divide($rb_times($rb_times($rb_times($rb_times(s["$-@"](),s2),c3),el1),self.e["$[]"](l)),dl1),$writer=[l,$rb_times(s,p)],$send(self.e,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)],$writer=[l,$rb_times(c,p)],$send(self.d,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)];return $writer=[l,$rb_plus(self.d["$[]"](l),f)],$send(self.d,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)],$writer=[l,0],$send(self.e,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]}).$$s=this,$$39.$$arity=1,$$39)),$send(0,"upto",[$rb_minus(this.size,2)],(($$43=function(i){var $$44,$$45,self=$$43.$$s||this,k=nil,p=nil;return null==self.d&&(self.d=nil),null==self.size&&(self.size=nil),null==i&&(i=nil),k=i,p=self.d["$[]"](i),$send($rb_plus(i,1),"upto",[$rb_minus(self.size,1)],(($$44=function(j){var self=$$44.$$s||this;return null==self.d&&(self.d=nil),null==j&&(j=nil),$truthy($rb_lt(self.d["$[]"](j),p))?(k=j,p=self.d["$[]"](j)):nil}).$$s=self,$$44.$$arity=1,$$44)),$truthy(k["$!="](i))?($writer=[k,self.d["$[]"](i)],$send(self.d,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)],$writer=[i,p],$send(self.d,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)],$send(self.size,"times",[],(($$45=function(j){var self=$$45.$$s||this;return null==self.v&&(self.v=nil),null==j&&(j=nil),p=self.v["$[]"](j)["$[]"](i),$writer=[i,self.v["$[]"](j)["$[]"](k)],$send(self.v["$[]"](j),"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)],$writer=[k,p],$send(self.v["$[]"](j),"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]}).$$s=self,$$45.$$arity=1,$$45))):nil}).$$s=this,$$43.$$arity=1,$$43))},$EigenvalueDecomposition_diagonalize$37.$$arity=0),Opal.def(self,"$reduce_to_hessenberg",$EigenvalueDecomposition_reduce_to_hessenberg$46=function(){var $$47,$$56,$$58,high;return 0,high=$rb_minus(this.size,1),$send($rb_plus(0,1),"upto",[$rb_minus(high,1)],(($$47=function(m){var $$48,$$49,$$50,$$53,self=$$47.$$s||this,scale=nil,h=nil,g=nil,$writer=nil;return null==self.ort&&(self.ort=nil),null==self.size&&(self.size=nil),null==self.h&&(self.h=nil),null==m&&(m=nil),scale=0,$send(m,"upto",[high],(($$48=function(i){var self=$$48.$$s||this;return null==self.h&&(self.h=nil),null==i&&(i=nil),scale=$rb_plus(scale,self.h["$[]"](i)["$[]"]($rb_minus(m,1)).$abs())}).$$s=self,$$48.$$arity=1,$$48)),$truthy(scale["$!="](0))?(h=0,$send(high,"downto",[m],(($$49=function(i){var $writer,self=$$49.$$s||this;return null==self.h&&(self.h=nil),null==self.ort&&(self.ort=nil),null==i&&(i=nil),$writer=[i,$rb_divide(self.h["$[]"](i)["$[]"]($rb_minus(m,1)),scale)],$send(self.ort,"[]=",Opal.to_a($writer)),$rb_minus($writer.length,1),h=$rb_plus(h,$rb_times(self.ort["$[]"](i),self.ort["$[]"](i)))}).$$s=self,$$49.$$arity=1,$$49)),g=$$($nesting,"Math").$sqrt(h),$truthy($rb_gt(self.ort["$[]"](m),0))&&(g=g["$-@"]()),h=$rb_minus(h,$rb_times(self.ort["$[]"](m),g)),$writer=[m,$rb_minus(self.ort["$[]"](m),g)],$send(self.ort,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)],$send(m,"upto",[$rb_minus(self.size,1)],(($$50=function(j){var $$51,$$52,self=$$50.$$s||this,f=nil;return null==j&&(j=nil),f=0,$send(high,"downto",[m],(($$51=function(i){var self=$$51.$$s||this;return null==self.ort&&(self.ort=nil),null==self.h&&(self.h=nil),null==i&&(i=nil),f=$rb_plus(f,$rb_times(self.ort["$[]"](i),self.h["$[]"](i)["$[]"](j)))}).$$s=self,$$51.$$arity=1,$$51)),f=$rb_divide(f,h),$send(m,"upto",[high],(($$52=function(i){var self=$$52.$$s||this,$binary_op_recvr_tmp_5=nil;return null==self.h&&(self.h=nil),null==self.ort&&(self.ort=nil),null==i&&(i=nil),$binary_op_recvr_tmp_5=self.h["$[]"](i),$writer=[j,$rb_minus($binary_op_recvr_tmp_5["$[]"](j),$rb_times(f,self.ort["$[]"](i)))],$send($binary_op_recvr_tmp_5,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]}).$$s=self,$$52.$$arity=1,$$52))}).$$s=self,$$50.$$arity=1,$$50)),$send(0,"upto",[high],(($$53=function(i){var $$54,$$55,self=$$53.$$s||this,f=nil;return null==i&&(i=nil),f=0,$send(high,"downto",[m],(($$54=function(j){var self=$$54.$$s||this;return null==self.ort&&(self.ort=nil),null==self.h&&(self.h=nil),null==j&&(j=nil),f=$rb_plus(f,$rb_times(self.ort["$[]"](j),self.h["$[]"](i)["$[]"](j)))}).$$s=self,$$54.$$arity=1,$$54)),f=$rb_divide(f,h),$send(m,"upto",[high],(($$55=function(j){var self=$$55.$$s||this,$binary_op_recvr_tmp_6=nil;return null==self.h&&(self.h=nil),null==self.ort&&(self.ort=nil),null==j&&(j=nil),$binary_op_recvr_tmp_6=self.h["$[]"](i),$writer=[j,$rb_minus($binary_op_recvr_tmp_6["$[]"](j),$rb_times(f,self.ort["$[]"](j)))],$send($binary_op_recvr_tmp_6,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]}).$$s=self,$$55.$$arity=1,$$55))}).$$s=self,$$53.$$arity=1,$$53)),$writer=[m,$rb_times(scale,self.ort["$[]"](m))],$send(self.ort,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)],$writer=[$rb_minus(m,1),$rb_times(scale,g)],$send(self.h["$[]"](m),"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]):nil}).$$s=this,$$47.$$arity=1,$$47)),$send(this.size,"times",[],(($$56=function(i){var $$57,self=$$56.$$s||this;return null==self.size&&(self.size=nil),null==i&&(i=nil),$send(self.size,"times",[],(($$57=function(j){var $writer,self=$$57.$$s||this;return null==self.v&&(self.v=nil),null==j&&(j=nil),$writer=[j,i["$=="](j)?1:0],$send(self.v["$[]"](i),"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]}).$$s=self,$$57.$$arity=1,$$57))}).$$s=this,$$56.$$arity=1,$$56)),$send($rb_minus(high,1),"downto",[$rb_plus(0,1)],(($$58=function(m){var $$59,$$60,self=$$58.$$s||this;return null==self.h&&(self.h=nil),null==m&&(m=nil),$truthy(self.h["$[]"](m)["$[]"]($rb_minus(m,1))["$!="](0))?($send($rb_plus(m,1),"upto",[high],(($$59=function(i){var $writer,self=$$59.$$s||this;return null==self.h&&(self.h=nil),null==self.ort&&(self.ort=nil),null==i&&(i=nil),$writer=[i,self.h["$[]"](i)["$[]"]($rb_minus(m,1))],$send(self.ort,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]}).$$s=self,$$59.$$arity=1,$$59)),$send(m,"upto",[high],(($$60=function(j){var $$61,$$62,self=$$60.$$s||this,g=nil;return null==self.ort&&(self.ort=nil),null==self.h&&(self.h=nil),null==j&&(j=nil),g=0,$send(m,"upto",[high],(($$61=function(i){var self=$$61.$$s||this;return null==self.ort&&(self.ort=nil),null==self.v&&(self.v=nil),null==i&&(i=nil),g=$rb_plus(g,$rb_times(self.ort["$[]"](i),self.v["$[]"](i)["$[]"](j)))}).$$s=self,$$61.$$arity=1,$$61)),g=$rb_divide($rb_divide(g,self.ort["$[]"](m)),self.h["$[]"](m)["$[]"]($rb_minus(m,1))),$send(m,"upto",[high],(($$62=function(i){var $writer,self=$$62.$$s||this,$binary_op_recvr_tmp_7=nil;return null==self.v&&(self.v=nil),null==self.ort&&(self.ort=nil),null==i&&(i=nil),$binary_op_recvr_tmp_7=self.v["$[]"](i),$writer=[j,$rb_plus($binary_op_recvr_tmp_7["$[]"](j),$rb_times(g,self.ort["$[]"](i)))],$send($binary_op_recvr_tmp_7,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]}).$$s=self,$$62.$$arity=1,$$62))}).$$s=self,$$60.$$arity=1,$$60))):nil}).$$s=this,$$58.$$arity=1,$$58))},$EigenvalueDecomposition_reduce_to_hessenberg$46.$$arity=0),Opal.def(self,"$hessenberg_to_real_schur",$EigenvalueDecomposition_hessenberg_to_real_schur$63=function(){var $$64,$$66,$$67,$$68,$$69,$$70,$$71,$$72,$$76,$$83,$$85,nn,eps,n=nil,high=nil,exshift=nil,p=nil,q=nil,r=nil,s=nil,z=nil,norm=nil,iter=nil,l=nil,$writer=nil,w=nil,x=nil,y=nil,m=nil;for(nn=this.size,n=$rb_minus(nn,1),0,high=$rb_minus(nn,1),eps=$$$($$($nesting,"Float"),"EPSILON"),p=q=r=s=z=exshift=0,norm=0,$send(nn,"times",[],(($$64=function(i){var $a,$$65,self=$$64.$$s||this,$writer=nil;return null==self.h&&(self.h=nil),null==self.d&&(self.d=nil),null==self.e&&(self.e=nil),null==i&&(i=nil),$truthy($truthy($a=$rb_lt(i,0))?$a:$rb_gt(i,high))&&($writer=[i,self.h["$[]"](i)["$[]"](i)],$send(self.d,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)],$writer=[i,0],$send(self.e,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]),$send([$rb_minus(i,1),0].$max(),"upto",[$rb_minus(nn,1)],(($$65=function(j){var self=$$65.$$s||this;return null==self.h&&(self.h=nil),null==j&&(j=nil),norm=$rb_plus(norm,self.h["$[]"](i)["$[]"](j).$abs())}).$$s=self,$$65.$$arity=1,$$65))}).$$s=this,$$64.$$arity=1,$$64)),iter=0;$truthy($rb_ge(n,0));){for(l=n;$truthy($rb_gt(l,0))&&(s=$rb_plus(this.h["$[]"]($rb_minus(l,1))["$[]"]($rb_minus(l,1)).$abs(),this.h["$[]"](l)["$[]"](l).$abs()),$truthy(s["$=="](0))&&(s=norm),!$truthy($rb_lt(this.h["$[]"](l)["$[]"]($rb_minus(l,1)).$abs(),$rb_times(eps,s))));)l=$rb_minus(l,1);if($truthy(l["$=="](n)))$writer=[n,$rb_plus(this.h["$[]"](n)["$[]"](n),exshift)],$send(this.h["$[]"](n),"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)],$writer=[n,this.h["$[]"](n)["$[]"](n)],$send(this.d,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)],$writer=[n,0],$send(this.e,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)],n=$rb_minus(n,1),iter=0;else if($truthy(l["$=="]($rb_minus(n,1))))w=$rb_times(this.h["$[]"](n)["$[]"]($rb_minus(n,1)),this.h["$[]"]($rb_minus(n,1))["$[]"](n)),p=$rb_divide($rb_minus(this.h["$[]"]($rb_minus(n,1))["$[]"]($rb_minus(n,1)),this.h["$[]"](n)["$[]"](n)),2),q=$rb_plus($rb_times(p,p),w),z=$$($nesting,"Math").$sqrt(q.$abs()),$writer=[n,$rb_plus(this.h["$[]"](n)["$[]"](n),exshift)],$send(this.h["$[]"](n),"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)],$writer=[$rb_minus(n,1),$rb_plus(this.h["$[]"]($rb_minus(n,1))["$[]"]($rb_minus(n,1)),exshift)],$send(this.h["$[]"]($rb_minus(n,1)),"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)],x=this.h["$[]"](n)["$[]"](n),$truthy($rb_ge(q,0))?(z=$truthy($rb_ge(p,0))?$rb_plus(p,z):$rb_minus(p,z),$writer=[$rb_minus(n,1),$rb_plus(x,z)],$send(this.d,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)],$writer=[n,this.d["$[]"]($rb_minus(n,1))],$send(this.d,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)],$truthy(z["$!="](0))&&($writer=[n,$rb_minus(x,$rb_divide(w,z))],$send(this.d,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]),$writer=[$rb_minus(n,1),0],$send(this.e,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)],$writer=[n,0],$send(this.e,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)],x=this.h["$[]"](n)["$[]"]($rb_minus(n,1)),s=$rb_plus(x.$abs(),z.$abs()),p=$rb_divide(x,s),q=$rb_divide(z,s),r=$$($nesting,"Math").$sqrt($rb_plus($rb_times(p,p),$rb_times(q,q))),p=$rb_divide(p,r),q=$rb_divide(q,r),$send($rb_minus(n,1),"upto",[$rb_minus(nn,1)],(($$66=function(j){var self=$$66.$$s||this;return null==self.h&&(self.h=nil),null==j&&(j=nil),z=self.h["$[]"]($rb_minus(n,1))["$[]"](j),$writer=[j,$rb_plus($rb_times(q,z),$rb_times(p,self.h["$[]"](n)["$[]"](j)))],$send(self.h["$[]"]($rb_minus(n,1)),"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)],$writer=[j,$rb_minus($rb_times(q,self.h["$[]"](n)["$[]"](j)),$rb_times(p,z))],$send(self.h["$[]"](n),"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]}).$$s=this,$$66.$$arity=1,$$66)),$send(0,"upto",[n],(($$67=function(i){var self=$$67.$$s||this;return null==self.h&&(self.h=nil),null==i&&(i=nil),z=self.h["$[]"](i)["$[]"]($rb_minus(n,1)),$writer=[$rb_minus(n,1),$rb_plus($rb_times(q,z),$rb_times(p,self.h["$[]"](i)["$[]"](n)))],$send(self.h["$[]"](i),"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)],$writer=[n,$rb_minus($rb_times(q,self.h["$[]"](i)["$[]"](n)),$rb_times(p,z))],$send(self.h["$[]"](i),"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]}).$$s=this,$$67.$$arity=1,$$67)),$send(0,"upto",[high],(($$68=function(i){var self=$$68.$$s||this;return null==self.v&&(self.v=nil),null==i&&(i=nil),z=self.v["$[]"](i)["$[]"]($rb_minus(n,1)),$writer=[$rb_minus(n,1),$rb_plus($rb_times(q,z),$rb_times(p,self.v["$[]"](i)["$[]"](n)))],$send(self.v["$[]"](i),"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)],$writer=[n,$rb_minus($rb_times(q,self.v["$[]"](i)["$[]"](n)),$rb_times(p,z))],$send(self.v["$[]"](i),"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]}).$$s=this,$$68.$$arity=1,$$68))):($writer=[$rb_minus(n,1),$rb_plus(x,p)],$send(this.d,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)],$writer=[n,$rb_plus(x,p)],$send(this.d,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)],$writer=[$rb_minus(n,1),z],$send(this.e,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)],$writer=[n,z["$-@"]()],$send(this.e,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]),n=$rb_minus(n,2),iter=0;else{for(x=this.h["$[]"](n)["$[]"](n),w=y=0,$truthy($rb_lt(l,n))&&(y=this.h["$[]"]($rb_minus(n,1))["$[]"]($rb_minus(n,1)),w=$rb_times(this.h["$[]"](n)["$[]"]($rb_minus(n,1)),this.h["$[]"]($rb_minus(n,1))["$[]"](n))),$truthy(iter["$=="](10))&&(exshift=$rb_plus(exshift,x),$send(0,"upto",[n],(($$69=function(i){var self=$$69.$$s||this,$binary_op_recvr_tmp_8=nil;return null==self.h&&(self.h=nil),null==i&&(i=nil),$binary_op_recvr_tmp_8=self.h["$[]"](i),$writer=[i,$rb_minus($binary_op_recvr_tmp_8["$[]"](i),x)],$send($binary_op_recvr_tmp_8,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]}).$$s=this,$$69.$$arity=1,$$69)),s=$rb_plus(this.h["$[]"](n)["$[]"]($rb_minus(n,1)).$abs(),this.h["$[]"]($rb_minus(n,1))["$[]"]($rb_minus(n,2)).$abs()),x=y=$rb_times(.75,s),w=$rb_times($rb_times(-.4375,s),s)),$truthy(iter["$=="](30))&&(s=$rb_times(s=$rb_divide($rb_minus(y,x),2),$rb_plus(s,w)),$truthy($rb_gt(s,0))&&(s=$$($nesting,"Math").$sqrt(s),$truthy($rb_lt(y,x))&&(s=s["$-@"]()),s=$rb_minus(x,$rb_divide(w,$rb_plus($rb_divide($rb_minus(y,x),2),s))),$send(0,"upto",[n],(($$70=function(i){var self=$$70.$$s||this,$binary_op_recvr_tmp_9=nil;return null==self.h&&(self.h=nil),null==i&&(i=nil),$binary_op_recvr_tmp_9=self.h["$[]"](i),$writer=[i,$rb_minus($binary_op_recvr_tmp_9["$[]"](i),s)],$send($binary_op_recvr_tmp_9,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]}).$$s=this,$$70.$$arity=1,$$70)),exshift=$rb_plus(exshift,s),x=y=w=.964)),iter=$rb_plus(iter,1),m=$rb_minus(n,2);$truthy($rb_ge(m,l))&&(z=this.h["$[]"](m)["$[]"](m),r=$rb_minus(x,z),s=$rb_minus(y,z),p=$rb_plus($rb_divide($rb_minus($rb_times(r,s),w),this.h["$[]"]($rb_plus(m,1))["$[]"](m)),this.h["$[]"](m)["$[]"]($rb_plus(m,1))),q=$rb_minus($rb_minus($rb_minus(this.h["$[]"]($rb_plus(m,1))["$[]"]($rb_plus(m,1)),z),r),s),r=this.h["$[]"]($rb_plus(m,2))["$[]"]($rb_plus(m,1)),s=$rb_plus($rb_plus(p.$abs(),q.$abs()),r.$abs()),p=$rb_divide(p,s),q=$rb_divide(q,s),r=$rb_divide(r,s),!$truthy(m["$=="](l)))&&!$truthy($rb_lt($rb_times(this.h["$[]"](m)["$[]"]($rb_minus(m,1)).$abs(),$rb_plus(q.$abs(),r.$abs())),$rb_times(eps,$rb_times(p.$abs(),$rb_plus($rb_plus(this.h["$[]"]($rb_minus(m,1))["$[]"]($rb_minus(m,1)).$abs(),z.$abs()),this.h["$[]"]($rb_plus(m,1))["$[]"]($rb_plus(m,1)).$abs())))));)m=$rb_minus(m,1);$send($rb_plus(m,2),"upto",[n],(($$71=function(i){var self=$$71.$$s||this;return null==self.h&&(self.h=nil),null==i&&(i=nil),$writer=[$rb_minus(i,2),0],$send(self.h["$[]"](i),"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)],$truthy($rb_gt(i,$rb_plus(m,2)))?($writer=[$rb_minus(i,3),0],$send(self.h["$[]"](i),"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]):nil}).$$s=this,$$71.$$arity=1,$$71)),$send(m,"upto",[$rb_minus(n,1)],(($$72=function(k){var $$73,$$74,$$75,notlast,self=$$72.$$s||this;if(null==self.h&&(self.h=nil),null==k&&(k=nil),notlast=k["$!="]($rb_minus(n,1)),$truthy(k["$!="](m))){if(p=self.h["$[]"](k)["$[]"]($rb_minus(k,1)),q=self.h["$[]"]($rb_plus(k,1))["$[]"]($rb_minus(k,1)),r=$truthy(notlast)?self.h["$[]"]($rb_plus(k,2))["$[]"]($rb_minus(k,1)):0,(x=$rb_plus($rb_plus(p.$abs(),q.$abs()),r.$abs()))["$=="](0))return nil;p=$rb_divide(p,x),q=$rb_divide(q,x),r=$rb_divide(r,x)}return s=$$($nesting,"Math").$sqrt($rb_plus($rb_plus($rb_times(p,p),$rb_times(q,q)),$rb_times(r,r))),$truthy($rb_lt(p,0))&&(s=s["$-@"]()),$truthy(s["$!="](0))?($truthy(k["$!="](m))?($writer=[$rb_minus(k,1),$rb_times(s["$-@"](),x)],$send(self.h["$[]"](k),"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]):$truthy(l["$!="](m))&&($writer=[$rb_minus(k,1),self.h["$[]"](k)["$[]"]($rb_minus(k,1))["$-@"]()],$send(self.h["$[]"](k),"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]),p=$rb_plus(p,s),x=$rb_divide(p,s),y=$rb_divide(q,s),z=$rb_divide(r,s),q=$rb_divide(q,p),r=$rb_divide(r,p),$send(k,"upto",[$rb_minus(nn,1)],(($$73=function(j){var self=$$73.$$s||this;return null==self.h&&(self.h=nil),null==j&&(j=nil),p=$rb_plus(self.h["$[]"](k)["$[]"](j),$rb_times(q,self.h["$[]"]($rb_plus(k,1))["$[]"](j))),$truthy(notlast)&&(p=$rb_plus(p,$rb_times(r,self.h["$[]"]($rb_plus(k,2))["$[]"](j))),$writer=[j,$rb_minus(self.h["$[]"]($rb_plus(k,2))["$[]"](j),$rb_times(p,z))],$send(self.h["$[]"]($rb_plus(k,2)),"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]),$writer=[j,$rb_minus(self.h["$[]"](k)["$[]"](j),$rb_times(p,x))],$send(self.h["$[]"](k),"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)],$writer=[j,$rb_minus(self.h["$[]"]($rb_plus(k,1))["$[]"](j),$rb_times(p,y))],$send(self.h["$[]"]($rb_plus(k,1)),"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]}).$$s=self,$$73.$$arity=1,$$73)),$send(0,"upto",[[n,$rb_plus(k,3)].$min()],(($$74=function(i){var self=$$74.$$s||this;return null==self.h&&(self.h=nil),null==i&&(i=nil),p=$rb_plus($rb_times(x,self.h["$[]"](i)["$[]"](k)),$rb_times(y,self.h["$[]"](i)["$[]"]($rb_plus(k,1)))),$truthy(notlast)&&(p=$rb_plus(p,$rb_times(z,self.h["$[]"](i)["$[]"]($rb_plus(k,2)))),$writer=[$rb_plus(k,2),$rb_minus(self.h["$[]"](i)["$[]"]($rb_plus(k,2)),$rb_times(p,r))],$send(self.h["$[]"](i),"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]),$writer=[k,$rb_minus(self.h["$[]"](i)["$[]"](k),p)],$send(self.h["$[]"](i),"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)],$writer=[$rb_plus(k,1),$rb_minus(self.h["$[]"](i)["$[]"]($rb_plus(k,1)),$rb_times(p,q))],$send(self.h["$[]"](i),"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]}).$$s=self,$$74.$$arity=1,$$74)),$send(0,"upto",[high],(($$75=function(i){var self=$$75.$$s||this;return null==self.v&&(self.v=nil),null==i&&(i=nil),p=$rb_plus($rb_times(x,self.v["$[]"](i)["$[]"](k)),$rb_times(y,self.v["$[]"](i)["$[]"]($rb_plus(k,1)))),$truthy(notlast)&&(p=$rb_plus(p,$rb_times(z,self.v["$[]"](i)["$[]"]($rb_plus(k,2)))),$writer=[$rb_plus(k,2),$rb_minus(self.v["$[]"](i)["$[]"]($rb_plus(k,2)),$rb_times(p,r))],$send(self.v["$[]"](i),"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]),$writer=[k,$rb_minus(self.v["$[]"](i)["$[]"](k),p)],$send(self.v["$[]"](i),"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)],$writer=[$rb_plus(k,1),$rb_minus(self.v["$[]"](i)["$[]"]($rb_plus(k,1)),$rb_times(p,q))],$send(self.v["$[]"](i),"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]}).$$s=self,$$75.$$arity=1,$$75))):nil}).$$s=this,$$72.$$arity=1,$$72))}}return $truthy(norm["$=="](0))?nil:($send($rb_minus(nn,1),"downto",[0],(($$76=function(k){var $$77,$c,$d,$$80,self=$$76.$$s||this,cdivr=nil,cdivi=nil;return null==self.d&&(self.d=nil),null==self.e&&(self.e=nil),null==self.h&&(self.h=nil),null==k&&(k=nil),p=self.d["$[]"](k),q=self.e["$[]"](k),$truthy(q["$=="](0))?($writer=[l=k,1],$send(self.h["$[]"](k),"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)],$send($rb_minus(k,1),"downto",[0],(($$77=function(i){var $$78,$$79,self=$$77.$$s||this,t=nil;return null==self.h&&(self.h=nil),null==self.e&&(self.e=nil),null==self.d&&(self.d=nil),null==i&&(i=nil),w=$rb_minus(self.h["$[]"](i)["$[]"](i),p),r=0,$send(l,"upto",[k],(($$78=function(j){var self=$$78.$$s||this;return null==self.h&&(self.h=nil),null==j&&(j=nil),r=$rb_plus(r,$rb_times(self.h["$[]"](i)["$[]"](j),self.h["$[]"](j)["$[]"](k)))}).$$s=self,$$78.$$arity=1,$$78)),$truthy($rb_lt(self.e["$[]"](i),0))?(z=w,s=r):(l=i,$truthy(self.e["$[]"](i)["$=="](0))?($writer=$truthy(w["$!="](0))?[k,$rb_divide(r["$-@"](),w)]:[k,$rb_divide(r["$-@"](),$rb_times(eps,norm))],$send(self.h["$[]"](i),"[]=",Opal.to_a($writer))):(x=self.h["$[]"](i)["$[]"]($rb_plus(i,1)),y=self.h["$[]"]($rb_plus(i,1))["$[]"](i),q=$rb_plus($rb_times($rb_minus(self.d["$[]"](i),p),$rb_minus(self.d["$[]"](i),p)),$rb_times(self.e["$[]"](i),self.e["$[]"](i))),t=$rb_divide($rb_minus($rb_times(x,s),$rb_times(z,r)),q),$writer=[k,t],$send(self.h["$[]"](i),"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)],$writer=$truthy($rb_gt(x.$abs(),z.$abs()))?[k,$rb_divide($rb_minus(r["$-@"](),$rb_times(w,t)),x)]:[k,$rb_divide($rb_minus(s["$-@"](),$rb_times(y,t)),z)],$send(self.h["$[]"]($rb_plus(i,1)),"[]=",Opal.to_a($writer))),$writer[$rb_minus($writer.length,1)],t=self.h["$[]"](i)["$[]"](k).$abs(),$truthy($rb_gt($rb_times($rb_times(eps,t),t),1))?$send(i,"upto",[k],(($$79=function(j){var self=$$79.$$s||this;return null==self.h&&(self.h=nil),null==j&&(j=nil),$writer=[k,$rb_divide(self.h["$[]"](j)["$[]"](k),t)],$send(self.h["$[]"](j),"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]}).$$s=self,$$79.$$arity=1,$$79)):nil)}).$$s=self,$$77.$$arity=1,$$77))):$truthy($rb_lt(q,0))?(l=$rb_minus(n,1),$writer=$truthy($rb_gt(self.h["$[]"](n)["$[]"]($rb_minus(n,1)).$abs(),self.h["$[]"]($rb_minus(n,1))["$[]"](n).$abs()))?($writer=[$rb_minus(n,1),$rb_divide(q,self.h["$[]"](n)["$[]"]($rb_minus(n,1)))],$send(self.h["$[]"]($rb_minus(n,1)),"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)],[n,$rb_divide($rb_minus(self.h["$[]"](n)["$[]"](n),p)["$-@"](),self.h["$[]"](n)["$[]"]($rb_minus(n,1)))]):($d=self.$cdiv(0,self.h["$[]"]($rb_minus(n,1))["$[]"](n)["$-@"](),$rb_minus(self.h["$[]"]($rb_minus(n,1))["$[]"]($rb_minus(n,1)),p),q),$c=Opal.to_ary($d),cdivr=null==$c[0]?nil:$c[0],cdivi=null==$c[1]?nil:$c[1],$writer=[$rb_minus(n,1),cdivr],$send(self.h["$[]"]($rb_minus(n,1)),"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)],[n,cdivi]),$send(self.h["$[]"]($rb_minus(n,1)),"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)],$writer=[$rb_minus(n,1),0],$send(self.h["$[]"](n),"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)],$writer=[n,1],$send(self.h["$[]"](n),"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)],$send($rb_minus(n,2),"downto",[0],(($$80=function(i){var $$81,$e,$f,$$82,self=$$80.$$s||this,ra=nil,sa=nil,vr=nil,vi=nil,t=nil;return null==self.h&&(self.h=nil),null==self.e&&(self.e=nil),null==self.d&&(self.d=nil),null==i&&(i=nil),sa=ra=0,$send(l,"upto",[n],(($$81=function(j){var self=$$81.$$s||this;return null==self.h&&(self.h=nil),null==j&&(j=nil),ra=$rb_plus(ra,$rb_times(self.h["$[]"](i)["$[]"](j),self.h["$[]"](j)["$[]"]($rb_minus(n,1)))),sa=$rb_plus(sa,$rb_times(self.h["$[]"](i)["$[]"](j),self.h["$[]"](j)["$[]"](n)))}).$$s=self,$$81.$$arity=1,$$81)),w=$rb_minus(self.h["$[]"](i)["$[]"](i),p),$truthy($rb_lt(self.e["$[]"](i),0))?(z=w,r=ra,s=sa):(l=i,$truthy(self.e["$[]"](i)["$=="](0))?($f=self.$cdiv(ra["$-@"](),sa["$-@"](),w,q),$e=Opal.to_ary($f),cdivr=null==$e[0]?nil:$e[0],cdivi=null==$e[1]?nil:$e[1],$writer=[$rb_minus(n,1),cdivr],$send(self.h["$[]"](i),"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)],$writer=[n,cdivi],$send(self.h["$[]"](i),"[]=",Opal.to_a($writer))):(x=self.h["$[]"](i)["$[]"]($rb_plus(i,1)),y=self.h["$[]"]($rb_plus(i,1))["$[]"](i),vr=$rb_minus($rb_plus($rb_times($rb_minus(self.d["$[]"](i),p),$rb_minus(self.d["$[]"](i),p)),$rb_times(self.e["$[]"](i),self.e["$[]"](i))),$rb_times(q,q)),vi=$rb_times($rb_times($rb_minus(self.d["$[]"](i),p),2),q),$truthy(($e=vr["$=="](0))?vi["$=="](0):vr["$=="](0))&&(vr=$rb_times($rb_times(eps,norm),$rb_plus($rb_plus($rb_plus($rb_plus(w.$abs(),q.$abs()),x.$abs()),y.$abs()),z.$abs()))),$f=self.$cdiv($rb_plus($rb_minus($rb_times(x,r),$rb_times(z,ra)),$rb_times(q,sa)),$rb_minus($rb_minus($rb_times(x,s),$rb_times(z,sa)),$rb_times(q,ra)),vr,vi),$e=Opal.to_ary($f),cdivr=null==$e[0]?nil:$e[0],cdivi=null==$e[1]?nil:$e[1],$writer=[$rb_minus(n,1),cdivr],$send(self.h["$[]"](i),"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)],$writer=[n,cdivi],$send(self.h["$[]"](i),"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)],$writer=$truthy($rb_gt(x.$abs(),$rb_plus(z.$abs(),q.$abs())))?($writer=[$rb_minus(n,1),$rb_divide($rb_plus($rb_minus(ra["$-@"](),$rb_times(w,self.h["$[]"](i)["$[]"]($rb_minus(n,1)))),$rb_times(q,self.h["$[]"](i)["$[]"](n))),x)],$send(self.h["$[]"]($rb_plus(i,1)),"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)],[n,$rb_divide($rb_minus($rb_minus(sa["$-@"](),$rb_times(w,self.h["$[]"](i)["$[]"](n))),$rb_times(q,self.h["$[]"](i)["$[]"]($rb_minus(n,1)))),x)]):($f=self.$cdiv($rb_minus(r["$-@"](),$rb_times(y,self.h["$[]"](i)["$[]"]($rb_minus(n,1)))),$rb_minus(s["$-@"](),$rb_times(y,self.h["$[]"](i)["$[]"](n))),z,q),$e=Opal.to_ary($f),cdivr=null==$e[0]?nil:$e[0],cdivi=null==$e[1]?nil:$e[1],$writer=[$rb_minus(n,1),cdivr],$send(self.h["$[]"]($rb_plus(i,1)),"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)],[n,cdivi]),$send(self.h["$[]"]($rb_plus(i,1)),"[]=",Opal.to_a($writer))),$writer[$rb_minus($writer.length,1)],t=[self.h["$[]"](i)["$[]"]($rb_minus(n,1)).$abs(),self.h["$[]"](i)["$[]"](n).$abs()].$max(),$truthy($rb_gt($rb_times($rb_times(eps,t),t),1))?$send(i,"upto",[n],(($$82=function(j){var self=$$82.$$s||this;return null==self.h&&(self.h=nil),null==j&&(j=nil),$writer=[$rb_minus(n,1),$rb_divide(self.h["$[]"](j)["$[]"]($rb_minus(n,1)),t)],$send(self.h["$[]"](j),"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)],$writer=[n,$rb_divide(self.h["$[]"](j)["$[]"](n),t)],$send(self.h["$[]"](j),"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]}).$$s=self,$$82.$$arity=1,$$82)):nil)}).$$s=self,$$80.$$arity=1,$$80))):nil}).$$s=this,$$76.$$arity=1,$$76)),$send(nn,"times",[],(($$83=function(i){var $c,$$84,self=$$83.$$s||this;return null==i&&(i=nil),$truthy($truthy($c=$rb_lt(i,0))?$c:$rb_gt(i,high))?$send(i,"upto",[$rb_minus(nn,1)],(($$84=function(j){var self=$$84.$$s||this;return null==self.h&&(self.h=nil),null==self.v&&(self.v=nil),null==j&&(j=nil),$writer=[j,self.h["$[]"](i)["$[]"](j)],$send(self.v["$[]"](i),"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]}).$$s=self,$$84.$$arity=1,$$84)):nil}).$$s=this,$$83.$$arity=1,$$83)),$send($rb_minus(nn,1),"downto",[0],(($$85=function(j){var $$86,self=$$85.$$s||this;return null==j&&(j=nil),$send(0,"upto",[high],(($$86=function(i){var $$87,self=$$86.$$s||this;return null==self.v&&(self.v=nil),null==i&&(i=nil),$send(z=0,"upto",[[j,high].$min()],(($$87=function(k){var self=$$87.$$s||this;return null==self.v&&(self.v=nil),null==self.h&&(self.h=nil),null==k&&(k=nil),z=$rb_plus(z,$rb_times(self.v["$[]"](i)["$[]"](k),self.h["$[]"](k)["$[]"](j)))}).$$s=self,$$87.$$arity=1,$$87)),$writer=[j,z],$send(self.v["$[]"](i),"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]}).$$s=self,$$86.$$arity=1,$$86))}).$$s=this,$$85.$$arity=1,$$85)))},$EigenvalueDecomposition_hessenberg_to_real_schur$63.$$arity=0),nil&&"hessenberg_to_real_schur"}($nesting[0],0,$nesting)}($nesting[0],0,$nesting)},Opal.modules["matrix/lup_decomposition"]=function(Opal){function $rb_gt(lhs,rhs){return"number"==typeof lhs&&"number"==typeof rhs?rhs<lhs:lhs["$>"](rhs)}function $rb_minus(lhs,rhs){return"number"==typeof lhs&&"number"==typeof rhs?lhs-rhs:lhs["$-"](rhs)}function $rb_times(lhs,rhs){return"number"==typeof lhs&&"number"==typeof rhs?lhs*rhs:lhs["$*"](rhs)}function $rb_plus(lhs,rhs){return"number"==typeof lhs&&"number"==typeof rhs?lhs+rhs:lhs["$+"](rhs)}Opal.top;var $nesting=[],nil=Opal.nil,$$$=Opal.const_get_qualified,$$=Opal.const_get_relative,$klass=(Opal.breaker,Opal.slice,Opal.klass),$send=Opal.send,$truthy=Opal.truthy;return Opal.add_stubs(["$include","$build","$min","$>","$[]","$==","$<=","$new","$each_with_index","$[]=","$-","$send","$l","$u","$p","$alias_method","$attr_reader","$times","$!=","$Raise","$*","$singular?","$is_a?","$row_count","$column_count","$map","$to_a","$row","$upto","$+","$downto","$quo","$convert_to_array","$size","$values_at","$elements","$raise","$class","$abs","$-@","$<"]),function($base,$super,$parent_nesting){var $nesting=[$klass($base,null,"Matrix")].concat($parent_nesting);return function($base,$super,$parent_nesting){var $LUPDecomposition_l$1,$LUPDecomposition_u$3,$LUPDecomposition_p$5,$LUPDecomposition_to_ary$8,$LUPDecomposition_singular$ques$9,$LUPDecomposition_det$11,$LUPDecomposition_solve$13,$LUPDecomposition_initialize$26,self=$klass($base,null,"LUPDecomposition"),$nesting=[self].concat($parent_nesting);return self.$$prototype.row_count=self.$$prototype.column_count=self.$$prototype.pivots=self.$$prototype.pivot_sign=nil,self.$include($$$($$($nesting,"Matrix"),"ConversionHelper")),Opal.def(self,"$l",$LUPDecomposition_l$1=function(){var $$2;return $send($$($nesting,"Matrix"),"build",[this.row_count,[this.column_count,this.row_count].$min()],(($$2=function(i,j){var self=$$2.$$s||this;return null==self.lu&&(self.lu=nil),null==i&&(i=nil),null==j&&(j=nil),$truthy($rb_gt(i,j))?self.lu["$[]"](i)["$[]"](j):$truthy(i["$=="](j))?1:0}).$$s=this,$$2.$$arity=2,$$2))},$LUPDecomposition_l$1.$$arity=0),Opal.def(self,"$u",$LUPDecomposition_u$3=function(){var $$4;return $send($$($nesting,"Matrix"),"build",[[this.column_count,this.row_count].$min(),this.column_count],(($$4=function(i,j){var lhs,rhs,self=$$4.$$s||this;return null==self.lu&&(self.lu=nil),null==i&&(i=nil),null==j&&(j=nil),$truthy((rhs=j,"number"==typeof(lhs=i)&&"number"==typeof rhs?lhs<=rhs:lhs["$<="](rhs)))?self.lu["$[]"](i)["$[]"](j):0}).$$s=this,$$4.$$arity=2,$$4))},$LUPDecomposition_u$3.$$arity=0),Opal.def(self,"$p",$LUPDecomposition_p$5=function(){var $$6,$$7,rows=nil;return rows=$send($$($nesting,"Array"),"new",[this.row_count],(($$6=function(){var self=$$6.$$s||this;return null==self.row_count&&(self.row_count=nil),$$($nesting,"Array").$new(self.row_count,0)}).$$s=this,$$6.$$arity=0,$$6)),$send(this.pivots,"each_with_index",[],(($$7=function(p,i){var $writer;$$7.$$s;return null==p&&(p=nil),null==i&&(i=nil),$writer=[p,1],$send(rows["$[]"](i),"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]}).$$s=this,$$7.$$arity=2,$$7)),$$($nesting,"Matrix").$send("new",rows,this.row_count)},$LUPDecomposition_p$5.$$arity=0),Opal.def(self,"$to_ary",$LUPDecomposition_to_ary$8=function(){return[this.$l(),this.$u(),this.$p()]},$LUPDecomposition_to_ary$8.$$arity=0),self.$alias_method("to_a","to_ary"),self.$attr_reader("pivots"),Opal.def(self,"$singular?",$LUPDecomposition_singular$ques$9=function(){try{var $$10;return $send(this.column_count,"times",[],(($$10=function(j){var self=$$10.$$s||this;if(null==self.lu&&(self.lu=nil),null==j&&(j=nil),!$truthy(self.lu["$[]"](j)["$[]"](j)["$=="](0)))return nil;Opal.ret(!0)}).$$s=this,$$10.$$arity=1,$$10)),!1}catch($returner){if($returner===Opal.returner)return $returner.$v;throw $returner}},$LUPDecomposition_singular$ques$9.$$arity=0),Opal.def(self,"$det",$LUPDecomposition_det$11=function(){var $$12,d=nil;return $truthy(this.row_count["$!="](this.column_count))&&$$($nesting,"Matrix").$Raise($$$($$($nesting,"Matrix"),"ErrDimensionMismatch")),d=this.pivot_sign,$send(this.column_count,"times",[],(($$12=function(j){var self=$$12.$$s||this;return null==self.lu&&(self.lu=nil),null==j&&(j=nil),d=$rb_times(d,self.lu["$[]"](j)["$[]"](j))}).$$s=this,$$12.$$arity=1,$$12)),d},$LUPDecomposition_det$11.$$arity=0),self.$alias_method("determinant","det"),Opal.def(self,"$solve",$LUPDecomposition_solve$13=function(b){var $$14,$$15,$$18,$$22,$$24,nx=nil,m=nil;return $truthy(this["$singular?"]())&&$$($nesting,"Matrix").$Raise($$$($$($nesting,"Matrix"),"ErrNotRegular"),"Matrix is singular."),$truthy(b["$is_a?"]($$($nesting,"Matrix")))?($truthy(b.$row_count()["$!="](this.row_count))&&$$($nesting,"Matrix").$Raise($$$($$($nesting,"Matrix"),"ErrDimensionMismatch")),nx=b.$column_count(),m=$send(this.pivots,"map",[],(($$14=function(row){$$14.$$s;return null==row&&(row=nil),b.$row(row).$to_a()}).$$s=this,$$14.$$arity=1,$$14)),$send(this.column_count,"times",[],(($$15=function(k){var $$16,self=$$15.$$s||this;return null==self.column_count&&(self.column_count=nil),null==k&&(k=nil),$send($rb_plus(k,1),"upto",[$rb_minus(self.column_count,1)],(($$16=function(i){var $$17,self=$$16.$$s||this;return null==i&&(i=nil),$send(nx,"times",[],(($$17=function(j){var $writer,self=$$17.$$s||this,$binary_op_recvr_tmp_10=nil;return null==self.lu&&(self.lu=nil),null==j&&(j=nil),$writer=[j,$rb_minus(($binary_op_recvr_tmp_10=m["$[]"](i))["$[]"](j),$rb_times(m["$[]"](k)["$[]"](j),self.lu["$[]"](i)["$[]"](k)))],$send($binary_op_recvr_tmp_10,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]}).$$s=self,$$17.$$arity=1,$$17))}).$$s=self,$$16.$$arity=1,$$16))}).$$s=this,$$15.$$arity=1,$$15)),$send($rb_minus(this.column_count,1),"downto",[0],(($$18=function(k){var $$19,$$20,self=$$18.$$s||this;return null==k&&(k=nil),$send(nx,"times",[],(($$19=function(j){var $writer,self=$$19.$$s||this;return null==self.lu&&(self.lu=nil),null==j&&(j=nil),$writer=[j,m["$[]"](k)["$[]"](j).$quo(self.lu["$[]"](k)["$[]"](k))],$send(m["$[]"](k),"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]}).$$s=self,$$19.$$arity=1,$$19)),$send(k,"times",[],(($$20=function(i){var $$21,self=$$20.$$s||this;return null==i&&(i=nil),$send(nx,"times",[],(($$21=function(j){var $writer,self=$$21.$$s||this,$binary_op_recvr_tmp_11=nil;return null==self.lu&&(self.lu=nil),null==j&&(j=nil),$writer=[j,$rb_minus(($binary_op_recvr_tmp_11=m["$[]"](i))["$[]"](j),$rb_times(m["$[]"](k)["$[]"](j),self.lu["$[]"](i)["$[]"](k)))],$send($binary_op_recvr_tmp_11,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]}).$$s=self,$$21.$$arity=1,$$21))}).$$s=self,$$20.$$arity=1,$$20))}).$$s=this,$$18.$$arity=1,$$18)),$$($nesting,"Matrix").$send("new",m,nx)):(b=this.$convert_to_array(b),$truthy(b.$size()["$!="](this.row_count))&&$$($nesting,"Matrix").$Raise($$$($$($nesting,"Matrix"),"ErrDimensionMismatch")),m=$send(b,"values_at",Opal.to_a(this.pivots)),$send(this.column_count,"times",[],(($$22=function(k){var $$23,self=$$22.$$s||this;return null==self.column_count&&(self.column_count=nil),null==k&&(k=nil),$send($rb_plus(k,1),"upto",[$rb_minus(self.column_count,1)],(($$23=function(i){var $writer,self=$$23.$$s||this;return null==self.lu&&(self.lu=nil),null==i&&(i=nil),$writer=[i,$rb_minus(m["$[]"](i),$rb_times(m["$[]"](k),self.lu["$[]"](i)["$[]"](k)))],$send(m,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]}).$$s=self,$$23.$$arity=1,$$23))}).$$s=this,$$22.$$arity=1,$$22)),$send($rb_minus(this.column_count,1),"downto",[0],(($$24=function(k){var $$25,self=$$24.$$s||this,$writer=nil;return null==self.lu&&(self.lu=nil),null==k&&(k=nil),$writer=[k,m["$[]"](k).$quo(self.lu["$[]"](k)["$[]"](k))],$send(m,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)],$send(k,"times",[],(($$25=function(i){var self=$$25.$$s||this;return null==self.lu&&(self.lu=nil),null==i&&(i=nil),$writer=[i,$rb_minus(m["$[]"](i),$rb_times(m["$[]"](k),self.lu["$[]"](i)["$[]"](k)))],$send(m,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]}).$$s=self,$$25.$$arity=1,$$25))}).$$s=this,$$24.$$arity=1,$$24)),$$($nesting,"Vector").$elements(m,!1))},$LUPDecomposition_solve$13.$$arity=1),Opal.def(self,"$initialize",$LUPDecomposition_initialize$26=function(a){var $$27,$$28,lu_col_j=nil;return $truthy(a["$is_a?"]($$($nesting,"Matrix")))||this.$raise($$($nesting,"TypeError"),"Expected Matrix but got "+a.$class()),this.lu=a.$to_a(),this.row_count=a.$row_count(),this.column_count=a.$column_count(),this.pivots=$$($nesting,"Array").$new(this.row_count),$send(this.row_count,"times",[],(($$27=function(i){var $writer,self=$$27.$$s||this;return null==self.pivots&&(self.pivots=nil),null==i&&(i=nil),$writer=[i,i],$send(self.pivots,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]}).$$s=this,$$27.$$arity=1,$$27)),this.pivot_sign=1,lu_col_j=$$($nesting,"Array").$new(this.row_count),$send(this.column_count,"times",[],(($$28=function(j){var $$29,$$30,$$32,$$33,$a,$$34,lhs,rhs,self=$$28.$$s||this,p=nil,k=nil,$writer=nil;return null==self.row_count&&(self.row_count=nil),null==self.column_count&&(self.column_count=nil),null==self.pivots&&(self.pivots=nil),null==self.pivot_sign&&(self.pivot_sign=nil),null==self.lu&&(self.lu=nil),null==j&&(j=nil),$send(self.row_count,"times",[],(($$29=function(i){var $writer,self=$$29.$$s||this;return null==self.lu&&(self.lu=nil),null==i&&(i=nil),$writer=[i,self.lu["$[]"](i)["$[]"](j)],$send(lu_col_j,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]}).$$s=self,$$29.$$arity=1,$$29)),$send(self.row_count,"times",[],(($$30=function(i){var $$31,kmax,self=$$30.$$s||this,lu_row_i=nil,s=nil,$writer=nil;return null==self.lu&&(self.lu=nil),null==i&&(i=nil),lu_row_i=self.lu["$[]"](i),kmax=[i,j].$min(),s=0,$send(kmax,"times",[],(($$31=function(k){$$31.$$s;return null==k&&(k=nil),s=$rb_plus(s,$rb_times(lu_row_i["$[]"](k),lu_col_j["$[]"](k)))}).$$s=self,$$31.$$arity=1,$$31)),$writer=[j,($writer=[i,$rb_minus(lu_col_j["$[]"](i),s)],$send(lu_col_j,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)])],$send(lu_row_i,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]}).$$s=self,$$30.$$arity=1,$$30)),$send($rb_plus(p=j,1),"upto",[$rb_minus(self.row_count,1)],(($$32=function(i){$$32.$$s;return null==i&&(i=nil),$truthy($rb_gt(lu_col_j["$[]"](i).$abs(),lu_col_j["$[]"](p).$abs()))?p=i:nil}).$$s=self,$$32.$$arity=1,$$32)),$truthy(p["$!="](j))&&($send(self.column_count,"times",[],(($$33=function(k){var t,self=$$33.$$s||this,$writer=nil;return null==self.lu&&(self.lu=nil),null==k&&(k=nil),t=self.lu["$[]"](p)["$[]"](k),$writer=[k,self.lu["$[]"](j)["$[]"](k)],$send(self.lu["$[]"](p),"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)],$writer=[k,t],$send(self.lu["$[]"](j),"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]}).$$s=self,$$33.$$arity=1,$$33)),k=self.pivots["$[]"](p),$writer=[p,self.pivots["$[]"](j)],$send(self.pivots,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)],$writer=[j,k],$send(self.pivots,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)],self.pivot_sign=self.pivot_sign["$-@"]()),$truthy($truthy((lhs=j,rhs=self.row_count,$a="number"==typeof lhs&&"number"==typeof rhs?lhs<rhs:lhs["$<"](rhs)))?self.lu["$[]"](j)["$[]"](j)["$!="](0):$a)?$send($rb_plus(j,1),"upto",[$rb_minus(self.row_count,1)],(($$34=function(i){var self=$$34.$$s||this;return null==self.lu&&(self.lu=nil),null==i&&(i=nil),$writer=[j,self.lu["$[]"](i)["$[]"](j).$quo(self.lu["$[]"](j)["$[]"](j))],$send(self.lu["$[]"](i),"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]}).$$s=self,$$34.$$arity=1,$$34)):nil}).$$s=this,$$28.$$arity=1,$$28))},$LUPDecomposition_initialize$26.$$arity=1),nil&&"initialize"}($nesting[0],0,$nesting)}($nesting[0],0,$nesting)},Opal.modules.matrix=function(Opal){function $rb_lt(lhs,rhs){return"number"==typeof lhs&&"number"==typeof rhs?lhs<rhs:lhs["$<"](rhs)}function $rb_minus(lhs,rhs){return"number"==typeof lhs&&"number"==typeof rhs?lhs-rhs:lhs["$-"](rhs)}function $rb_times(lhs,rhs){return"number"==typeof lhs&&"number"==typeof rhs?lhs*rhs:lhs["$*"](rhs)}function $rb_plus(lhs,rhs){return"number"==typeof lhs&&"number"==typeof rhs?lhs+rhs:lhs["$+"](rhs)}function $rb_ge(lhs,rhs){return"number"==typeof lhs&&"number"==typeof rhs?rhs<=lhs:lhs["$>="](rhs)}function $rb_gt(lhs,rhs){return"number"==typeof lhs&&"number"==typeof rhs?rhs<lhs:lhs["$>"](rhs)}function $rb_le(lhs,rhs){return"number"==typeof lhs&&"number"==typeof rhs?lhs<=rhs:lhs["$<="](rhs)}function $rb_divide(lhs,rhs){return"number"==typeof lhs&&"number"==typeof rhs?lhs/rhs:lhs["$/"](rhs)}var self=Opal.top,$nesting=[],nil=Opal.nil,$$$=Opal.const_get_qualified,$$=Opal.const_get_relative,$module=(Opal.breaker,Opal.slice,Opal.module),$klass=Opal.klass,$send=Opal.send,$truthy=Opal.truthy,$hash2=Opal.hash2;return Opal.add_stubs(["$require","$extend","$def_e2message","$def_exception","$include","$autoload","$private_class_method","$attr_reader","$protected","$rows","$convert_to_array","$map!","$size","$[]","$each","$==","$raise","$new","$transpose","$coerce_to_int","$<","$to_enum","$empty","$[]=","$-","$diagonal","$scalar","$!=","$*","$coerce_to_matrix","$map","$send","$to_proc","$column_count","$concat","$row_count","$each_with_index","$+","$empty?","$method","$first","$Raise","$combine","$class","$private","$fetch","$alias_method","$elements","$>=","$-@","$times","$collect","$new_matrix","$===","$upto","$min","$inspect","$freeze","$>","$include?","$last","$pop","$end","$exclude_end?","$<=","$to_a","$delete_at","$square?","$determinant","$first_minor","$**","$build","$cofactor","$!","$inject","$with_index","$all?","$conj","$singular?","$eql?","$hash","$column_vector","$column","$apply_through_coercion","$/","$inverse","$I","$abs","$quo","$identity","$loop","$zero?","$>>","$eigensystem","$+@","$determinant_bareiss","$find","$warn","$hstack","$rank","$round","$vstack","$real","$imag","$row","$join","$to_s","$dup","$to_ary","$message","$is_a?","$coerce","$length","$public_send","$kind_of?","$respond_to?","$__send__","$coerce_to","$count","$independent?","$collect2","$each2","$basis","$laplace_expansion","$sqrt","$abs2","$magnitude","$acos","$inner_product","$row_vector"]),self.$require("e2mmap.rb"),function($base,$parent_nesting){var self=$module($base,"ExceptionForMatrix"),$nesting=[self].concat($parent_nesting);self.$extend($$($nesting,"Exception2MessageMapper")),self.$def_e2message($$($nesting,"TypeError"),"wrong argument type %s (expected %s)"),self.$def_e2message($$($nesting,"ArgumentError"),"Wrong # of arguments(%d for %d)"),self.$def_exception("ErrDimensionMismatch","#{self.name} dimension mismatch"),self.$def_exception("ErrNotRegular","Not Regular Matrix"),self.$def_exception("ErrOperationNotDefined","Operation(%s) can\\'t be defined: %s op %s"),self.$def_exception("ErrOperationNotImplemented","Sorry, Operation(%s) not implemented: %s op %s")}($nesting[0],$nesting),function($base,$super,$parent_nesting){var $Matrix_$$$1,$Matrix_rows$2,$Matrix_columns$5,$Matrix_build$6,$Matrix_diagonal$9,$Matrix_scalar$11,$Matrix_identity$12,$Matrix_zero$13,$Matrix_row_vector$15,$Matrix_column_vector$16,$Matrix_empty$17,$Matrix_vstack$18,$Matrix_hstack$20,$Matrix_combine$23,$Matrix_combine$28,$Matrix_initialize$29,$Matrix_new_matrix$30,$Matrix_$$$31,$Matrix_$$$eq$33,$Matrix_row_count$34,$Matrix_row$35,$Matrix_column$38,$Matrix_collect$41,$Matrix_each$43,$Matrix_each_with_index$57,$Matrix_index$72,$Matrix_minor$75,$Matrix_first_minor$77,$Matrix_cofactor$79,$Matrix_adjugate$80,$Matrix_laplace_expansion$82,$Matrix_diagonal$ques$84,$Matrix_empty$ques$85,$Matrix_hermitian$ques$86,$Matrix_lower_triangular$ques$88,$Matrix_normal$ques$89,$Matrix_orthogonal$ques$93,$Matrix_permutation$ques$97,$Matrix_real$ques$100,$Matrix_regular$ques$101,$Matrix_singular$ques$102,$Matrix_square$ques$103,$Matrix_symmetric$ques$104,$Matrix_antisymmetric$ques$106,$Matrix_unitary$ques$108,$Matrix_upper_triangular$ques$112,$Matrix_zero$ques$113,$Matrix_$eq_eq$114,$Matrix_eql$ques$115,$Matrix_clone$116,$Matrix_hash$117,$Matrix_$$118,$Matrix_$plus$124,$Matrix_$minus$127,$Matrix_$slash$130,$Matrix_hadamard_product$133,$Matrix_inverse$135,$Matrix_inverse_from$136,$Matrix_$$$144,$Matrix_$plus$$147,$Matrix_$minus$$148,$Matrix_determinant$150,$Matrix_determinant_bareiss$151,$Matrix_determinant_e$157,$Matrix_hstack$158,$Matrix_rank$159,$Matrix_rank_e$164,$Matrix_round$165,$Matrix_trace$167,$Matrix_transpose$169,$Matrix_vstack$170,$Matrix_eigensystem$171,$Matrix_lup$172,$Matrix_conjugate$173,$Matrix_imaginary$174,$Matrix_real$175,$Matrix_rect$176,$Matrix_coerce$177,$Matrix_row_vectors$178,$Matrix_column_vectors$180,$Matrix_to_matrix$182,$Matrix_to_a$183,$Matrix_elements_to_f$184,$Matrix_elements_to_i$185,$Matrix_elements_to_r$186,$Matrix_to_s$187,$Matrix_inspect$190,self=$klass($base,null,"Matrix"),$nesting=[self].concat($parent_nesting);self.$$prototype.rows=nil,self.$include($$($nesting,"Enumerable")),self.$include($$($nesting,"ExceptionForMatrix")),self.$autoload("EigenvalueDecomposition","matrix/eigenvalue_decomposition"),self.$autoload("LUPDecomposition","matrix/lup_decomposition"),self.$private_class_method("new"),self.$attr_reader("rows"),self.$protected("rows"),Opal.defs($$($nesting,"Matrix"),"$[]",$Matrix_$$$1=function($a){var rows;return rows=Opal.slice.call(arguments,0,arguments.length),this.$rows(rows,!1)},$Matrix_$$$1.$$arity=-1),Opal.defs($$($nesting,"Matrix"),"$rows",$Matrix_rows$2=function(rows,copy){var $$3,$a,$$4,size;return null==copy&&(copy=!0),rows=this.$convert_to_array(rows,copy),$send(rows,"map!",[],(($$3=function(row){var self=$$3.$$s||this;return null==row&&(row=nil),self.$convert_to_array(row,copy)}).$$s=this,$$3.$$arity=1,$$3)),size=($truthy($a=rows["$[]"](0))?$a:[]).$size(),$send(rows,"each",[],(($$4=function(row){var self=$$4.$$s||this;return null==row&&(row=nil),row.$size()["$=="](size)?nil:self.$raise($$($nesting,"ErrDimensionMismatch"),"row size differs ("+row.$size()+" should be "+size+")")}).$$s=this,$$4.$$arity=1,$$4)),this.$new(rows,size)},$Matrix_rows$2.$$arity=-2),Opal.defs($$($nesting,"Matrix"),"$columns",$Matrix_columns$5=function(columns){return this.$rows(columns,!1).$transpose()},$Matrix_columns$5.$$arity=1),Opal.defs($$($nesting,"Matrix"),"$build",$Matrix_build$6=function(row_count,column_count){var $a,$$7,rows,$iter=$Matrix_build$6.$$p,$yield=$iter||nil;return $iter&&($Matrix_build$6.$$p=null),null==column_count&&(column_count=row_count),row_count=$$($nesting,"CoercionHelper").$coerce_to_int(row_count),column_count=$$($nesting,"CoercionHelper").$coerce_to_int(column_count),$truthy($truthy($a=$rb_lt(row_count,0))?$a:$rb_lt(column_count,0))&&this.$raise($$($nesting,"ArgumentError")),$yield===nil?this.$to_enum("build",row_count,column_count):(rows=$send($$($nesting,"Array"),"new",[row_count],(($$7=function(i){var $$8,self=$$7.$$s||this;return null==i&&(i=nil),$send($$($nesting,"Array"),"new",[column_count],(($$8=function(j){$$8.$$s;return null==j&&(j=nil),Opal.yieldX($yield,[i,j])}).$$s=self,$$8.$$arity=1,$$8))}).$$s=this,$$7.$$arity=1,$$7)),this.$new(rows,column_count))},$Matrix_build$6.$$arity=-2),Opal.defs($$($nesting,"Matrix"),"$diagonal",$Matrix_diagonal$9=function($a){var $post_args,values,$$10,rows,size=nil;return $post_args=Opal.slice.call(arguments,0,arguments.length),(size=(values=$post_args).$size())["$=="](0)?$$($nesting,"Matrix").$empty():(rows=$send($$($nesting,"Array"),"new",[size],(($$10=function(j){var row,$writer;$$10.$$s;return null==j&&(j=nil),row=$$($nesting,"Array").$new(size,0),$writer=[j,values["$[]"](j)],$send(row,"[]=",Opal.to_a($writer)),$rb_minus($writer.length,1),row}).$$s=this,$$10.$$arity=1,$$10)),this.$new(rows))},$Matrix_diagonal$9.$$arity=-1),Opal.defs($$($nesting,"Matrix"),"$scalar",$Matrix_scalar$11=function(n,value){return $send(this,"diagonal",Opal.to_a($$($nesting,"Array").$new(n,value)))},$Matrix_scalar$11.$$arity=2),Opal.defs($$($nesting,"Matrix"),"$identity",$Matrix_identity$12=function(n){return this.$scalar(n,1)},$Matrix_identity$12.$$arity=1),function(self,$parent_nesting){[self].concat($parent_nesting);Opal.alias(self,"unit","identity"),Opal.alias(self,"I","identity")}(Opal.get_singleton_class($$($nesting,"Matrix")),$nesting),Opal.defs($$($nesting,"Matrix"),"$zero",$Matrix_zero$13=function(row_count,column_count){var $$14,rows;return null==column_count&&(column_count=row_count),rows=$send($$($nesting,"Array"),"new",[row_count],(($$14=function(){$$14.$$s;return $$($nesting,"Array").$new(column_count,0)}).$$s=this,$$14.$$arity=0,$$14)),this.$new(rows,column_count)},$Matrix_zero$13.$$arity=-2),Opal.defs($$($nesting,"Matrix"),"$row_vector",$Matrix_row_vector$15=function(row){return row=this.$convert_to_array(row),this.$new([row])},$Matrix_row_vector$15.$$arity=1),Opal.defs($$($nesting,"Matrix"),"$column_vector",$Matrix_column_vector$16=function(column){return column=this.$convert_to_array(column),this.$new([column].$transpose(),1)},$Matrix_column_vector$16.$$arity=1),Opal.defs($$($nesting,"Matrix"),"$empty",$Matrix_empty$17=function(row_count,column_count){var $a;return null==row_count&&(row_count=0),null==column_count&&(column_count=0),$truthy($truthy($a=column_count["$!="](0))?row_count["$!="](0):$a)&&this.$raise($$($nesting,"ArgumentError"),"One size must be 0"),$truthy($truthy($a=$rb_lt(column_count,0))?$a:$rb_lt(row_count,0))&&this.$raise($$($nesting,"ArgumentError"),"Negative size"),this.$new($rb_times([[]],row_count),column_count)},$Matrix_empty$17.$$arity=-1),Opal.defs($$($nesting,"Matrix"),"$vstack",$Matrix_vstack$18=function(x,$a){var matrices,$$19,result=nil;return matrices=Opal.slice.call(arguments,1,arguments.length),x=$$($nesting,"CoercionHelper").$coerce_to_matrix(x),result=$send(x.$send("rows"),"map",[],"dup".$to_proc()),$send(matrices,"each",[],(($$19=function(m){var self=$$19.$$s||this;return null==m&&(m=nil),m=$$($nesting,"CoercionHelper").$coerce_to_matrix(m),$truthy(m.$column_count()["$!="](x.$column_count()))&&self.$raise($$($nesting,"ErrDimensionMismatch"),"The given matrices must have "+x.$column_count()+" columns, but one has "+m.$column_count()),result.$concat(m.$send("rows"))}).$$s=this,$$19.$$arity=1,$$19)),this.$new(result,x.$column_count())},$Matrix_vstack$18.$$arity=-2),Opal.defs($$($nesting,"Matrix"),"$hstack",$Matrix_hstack$20=function(x,$a){var matrices,$$21,result,total_column_count=nil;return matrices=Opal.slice.call(arguments,1,arguments.length),x=$$($nesting,"CoercionHelper").$coerce_to_matrix(x),result=$send(x.$send("rows"),"map",[],"dup".$to_proc()),total_column_count=x.$column_count(),$send(matrices,"each",[],(($$21=function(m){var $$22,self=$$21.$$s||this;return null==m&&(m=nil),m=$$($nesting,"CoercionHelper").$coerce_to_matrix(m),$truthy(m.$row_count()["$!="](x.$row_count()))&&self.$raise($$($nesting,"ErrDimensionMismatch"),"The given matrices must have "+x.$row_count()+" rows, but one has "+m.$row_count()),$send(result,"each_with_index",[],(($$22=function(row,i){$$22.$$s;return null==row&&(row=nil),null==i&&(i=nil),row.$concat(m.$send("rows")["$[]"](i))}).$$s=self,$$22.$$arity=2,$$22)),total_column_count=$rb_plus(total_column_count,m.$column_count())}).$$s=this,$$21.$$arity=1,$$21)),this.$new(result,total_column_count)},$Matrix_hstack$20.$$arity=-2),Opal.defs($$($nesting,"Matrix"),"$combine",$Matrix_combine$23=function($a){var $post_args,matrices,$$24,$$25,rows,$iter=$Matrix_combine$23.$$p,$yield=$iter||nil,x=nil;return $iter&&($Matrix_combine$23.$$p=null),$post_args=Opal.slice.call(arguments,0,arguments.length),matrices=$post_args,$yield===nil?$send(this,"to_enum",["combine"].concat(Opal.to_a(matrices))):$truthy(matrices["$empty?"]())?$$($nesting,"Matrix").$empty():($send(matrices,"map!",[],$$($nesting,"CoercionHelper").$method("coerce_to_matrix").$to_proc()),x=matrices.$first(),$send(matrices,"each",[],(($$24=function(m){$$24.$$s;return null==m&&(m=nil),$truthy(x.$row_count()["$=="](m.$row_count())?x.$column_count()["$=="](m.$column_count()):x.$row_count()["$=="](m.$row_count()))?nil:$$($nesting,"Matrix").$Raise($$($nesting,"ErrDimensionMismatch"))}).$$s=this,$$24.$$arity=1,$$24)),rows=$send($$($nesting,"Array"),"new",[x.$row_count()],(($$25=function(i){var $$26,self=$$25.$$s||this;return null==i&&(i=nil),$send($$($nesting,"Array"),"new",[x.$column_count()],(($$26=function(j){var $$27,self=$$26.$$s||this;return null==j&&(j=nil),Opal.yield1($yield,$send(matrices,"map",[],(($$27=function(m){$$27.$$s;return null==m&&(m=nil),m["$[]"](i,j)}).$$s=self,$$27.$$arity=1,$$27)))}).$$s=self,$$26.$$arity=1,$$26))}).$$s=this,$$25.$$arity=1,$$25)),this.$new(rows,x.$column_count()))},$Matrix_combine$23.$$arity=-1),Opal.def(self,"$combine",$Matrix_combine$28=function($a){var matrices,$iter=$Matrix_combine$28.$$p,block=$iter||nil,self=this;return $iter&&($Matrix_combine$28.$$p=null),$iter&&($Matrix_combine$28.$$p=null),matrices=Opal.slice.call(arguments,0,arguments.length),$send($$($nesting,"Matrix"),"combine",[self].concat(Opal.to_a(matrices)),block.$to_proc())},$Matrix_combine$28.$$arity=-1),Opal.def(self,"$initialize",$Matrix_initialize$29=function(rows,column_count){return null==column_count&&(column_count=rows["$[]"](0).$size()),this.rows=rows,this.column_count=column_count},$Matrix_initialize$29.$$arity=-2),Opal.def(self,"$new_matrix",$Matrix_new_matrix$30=function(rows,column_count){return null==column_count&&(column_count=rows["$[]"](0).$size()),this.$class().$send("new",rows,column_count)},$Matrix_new_matrix$30.$$arity=-2),self.$private("new_matrix"),Opal.def(self,"$[]",$Matrix_$$$31=function(i,j){try{var $$32;return $send(this.rows,"fetch",[i],($$32=function(){$$32.$$s;Opal.ret(nil)},$$32.$$s=this,$$32.$$arity=0,$$32))["$[]"](j)}catch($returner){if($returner===Opal.returner)return $returner.$v;throw $returner}},$Matrix_$$$31.$$arity=2),Opal.alias(self,"element","[]"),Opal.alias(self,"component","[]"),Opal.def(self,"$[]=",$Matrix_$$$eq$33=function(i,j,v){var $writer;return $writer=[j,v],$send(this.rows["$[]"](i),"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]},$Matrix_$$$eq$33.$$arity=3),Opal.alias(self,"set_element","[]="),Opal.alias(self,"set_component","[]="),self.$private("[]=","set_element","set_component"),Opal.def(self,"$row_count",$Matrix_row_count$34=function(){return this.rows.$size()},$Matrix_row_count$34.$$arity=0),self.$alias_method("row_size","row_count"),self.$attr_reader("column_count"),self.$alias_method("column_size","column_count"),Opal.def(self,"$row",$Matrix_row$35=function(i){try{var $$36,$$37,$iter=$Matrix_row$35.$$p,block=$iter||nil;return $iter&&($Matrix_row$35.$$p=null),$iter&&($Matrix_row$35.$$p=null),block!==nil?($send($send(this.rows,"fetch",[i],(($$36=function(){var self=$$36.$$s||this;Opal.ret(self)}).$$s=this,$$36.$$arity=0,$$36)),"each",[],block.$to_proc()),this):$$($nesting,"Vector").$elements($send(this.rows,"fetch",[i],(($$37=function(){$$37.$$s;Opal.ret(nil)}).$$s=this,$$37.$$arity=0,$$37)))}catch($returner){if($returner===Opal.returner)return $returner.$v;throw $returner}},$Matrix_row$35.$$arity=1),Opal.def(self,"$column",$Matrix_column$38=function(j){var $a,$$39,$$40,$iter=$Matrix_column$38.$$p,$yield=$iter||nil,col=nil;return $iter&&($Matrix_column$38.$$p=null),$yield!==nil?($truthy($truthy($a=$rb_ge(j,this.$column_count()))?$a:$rb_lt(j,this.$column_count()["$-@"]()))||$send(this.$row_count(),"times",[],(($$39=function(i){var self=$$39.$$s||this;return null==self.rows&&(self.rows=nil),null==i&&(i=nil),Opal.yield1($yield,self.rows["$[]"](i)["$[]"](j))}).$$s=this,$$39.$$arity=1,$$39)),this):$truthy($truthy($a=$rb_ge(j,this.$column_count()))?$a:$rb_lt(j,this.$column_count()["$-@"]()))?nil:(col=$send($$($nesting,"Array"),"new",[this.$row_count()],(($$40=function(i){var self=$$40.$$s||this;return null==self.rows&&(self.rows=nil),null==i&&(i=nil),self.rows["$[]"](i)["$[]"](j)}).$$s=this,$$40.$$arity=1,$$40)),$$($nesting,"Vector").$elements(col,!1))},$Matrix_column$38.$$arity=1),Opal.def(self,"$collect",$Matrix_collect$41=function(){var $$42,rows,$iter=$Matrix_collect$41.$$p,block=$iter||nil;return $iter&&($Matrix_collect$41.$$p=null),$iter&&($Matrix_collect$41.$$p=null),block===nil?this.$to_enum("collect"):(rows=$send(this.rows,"collect",[],(($$42=function(row){$$42.$$s;return null==row&&(row=nil),$send(row,"collect",[],block.$to_proc())}).$$s=this,$$42.$$arity=1,$$42)),this.$new_matrix(rows,this.$column_count()))},$Matrix_collect$41.$$arity=0),Opal.alias(self,"map","collect"),Opal.def(self,"$each",$Matrix_each$43=function(which){try{var $$44,$$45,$$47,$$49,$$51,$$53,$$55,$case,$iter=$Matrix_each$43.$$p,$yield=$iter||nil,last=nil,block=nil;return $iter&&($Matrix_each$43.$$p=null),null==which&&(which="all"),$yield===nil?this.$to_enum("each",which):(last=$rb_minus(this.$column_count(),1),"all"["$==="]($case=which)?(block=$$($nesting,"Proc").$new(),$send(this.rows,"each",[],(($$44=function(row){$$44.$$s;return null==row&&(row=nil),$send(row,"each",[],block.$to_proc())}).$$s=this,$$44.$$arity=1,$$44))):"diagonal"["$==="]($case)?$send(this.rows,"each_with_index",[],(($$45=function(row,row_index){var $$46,self=$$45.$$s||this;return null==row&&(row=nil),null==row_index&&(row_index=nil),Opal.yield1($yield,$send(row,"fetch",[row_index],(($$46=function(){var self=$$46.$$s||this;Opal.ret(self)}).$$s=self,$$46.$$arity=0,$$46)))}).$$s=this,$$45.$$arity=2,$$45)):"off_diagonal"["$==="]($case)?$send(this.rows,"each_with_index",[],(($$47=function(row,row_index){var $$48,self=$$47.$$s||this;return null==row&&(row=nil),null==row_index&&(row_index=nil),$send(self.$column_count(),"times",[],(($$48=function(col_index){$$48.$$s;return null==col_index&&(col_index=nil),row_index["$=="](col_index)?nil:Opal.yield1($yield,row["$[]"](col_index))}).$$s=self,$$48.$$arity=1,$$48))}).$$s=this,$$47.$$arity=2,$$47)):"lower"["$==="]($case)?$send(this.rows,"each_with_index",[],(($$49=function(row,row_index){var $$50,self=$$49.$$s||this;return null==row&&(row=nil),null==row_index&&(row_index=nil),$send(0,"upto",[[row_index,last].$min()],(($$50=function(col_index){$$50.$$s;return null==col_index&&(col_index=nil),Opal.yield1($yield,row["$[]"](col_index))}).$$s=self,$$50.$$arity=1,$$50))}).$$s=this,$$49.$$arity=2,$$49)):"strict_lower"["$==="]($case)?$send(this.rows,"each_with_index",[],(($$51=function(row,row_index){var $$52,self=$$51.$$s||this;return null==row&&(row=nil),null==row_index&&(row_index=nil),$send([row_index,self.$column_count()].$min(),"times",[],(($$52=function(col_index){$$52.$$s;return null==col_index&&(col_index=nil),Opal.yield1($yield,row["$[]"](col_index))}).$$s=self,$$52.$$arity=1,$$52))}).$$s=this,$$51.$$arity=2,$$51)):"strict_upper"["$==="]($case)?$send(this.rows,"each_with_index",[],(($$53=function(row,row_index){var $$54,self=$$53.$$s||this;return null==row&&(row=nil),null==row_index&&(row_index=nil),$send($rb_plus(row_index,1),"upto",[last],(($$54=function(col_index){$$54.$$s;return null==col_index&&(col_index=nil),Opal.yield1($yield,row["$[]"](col_index))}).$$s=self,$$54.$$arity=1,$$54))}).$$s=this,$$53.$$arity=2,$$53)):"upper"["$==="]($case)?$send(this.rows,"each_with_index",[],(($$55=function(row,row_index){var $$56,self=$$55.$$s||this;return null==row&&(row=nil),null==row_index&&(row_index=nil),$send(row_index,"upto",[last],(($$56=function(col_index){$$56.$$s;return null==col_index&&(col_index=nil),Opal.yield1($yield,row["$[]"](col_index))}).$$s=self,$$56.$$arity=1,$$56))}).$$s=this,$$55.$$arity=2,$$55)):this.$raise($$($nesting,"ArgumentError"),"expected "+which.$inspect()+" to be one of :all, :diagonal, :off_diagonal, :lower, :strict_lower, :strict_upper or :upper"),this)}catch($returner){if($returner===Opal.returner)return $returner.$v;throw $returner}},$Matrix_each$43.$$arity=-1),Opal.def(self,"$each_with_index",$Matrix_each_with_index$57=function(which){try{var $$58,$$60,$$62,$$64,$$66,$$68,$$70,$case,$iter=$Matrix_each_with_index$57.$$p,$yield=$iter||nil,last=nil;return $iter&&($Matrix_each_with_index$57.$$p=null),null==which&&(which="all"),$yield===nil?this.$to_enum("each_with_index",which):(last=$rb_minus(this.$column_count(),1),"all"["$==="]($case=which)?$send(this.rows,"each_with_index",[],(($$58=function(row,row_index){var $$59,self=$$58.$$s||this;return null==row&&(row=nil),null==row_index&&(row_index=nil),$send(row,"each_with_index",[],(($$59=function(e,col_index){$$59.$$s;return null==e&&(e=nil),null==col_index&&(col_index=nil),Opal.yieldX($yield,[e,row_index,col_index])}).$$s=self,$$59.$$arity=2,$$59))}).$$s=this,$$58.$$arity=2,$$58)):"diagonal"["$==="]($case)?$send(this.rows,"each_with_index",[],(($$60=function(row,row_index){var $$61,self=$$60.$$s||this;return null==row&&(row=nil),null==row_index&&(row_index=nil),Opal.yieldX($yield,[$send(row,"fetch",[row_index],($$61=function(){var self=$$61.$$s||this;Opal.ret(self)},$$61.$$s=self,$$61.$$arity=0,$$61)),row_index,row_index])}).$$s=this,$$60.$$arity=2,$$60)):"off_diagonal"["$==="]($case)?$send(this.rows,"each_with_index",[],(($$62=function(row,row_index){var $$63,self=$$62.$$s||this;return null==row&&(row=nil),null==row_index&&(row_index=nil),$send(self.$column_count(),"times",[],(($$63=function(col_index){$$63.$$s;return null==col_index&&(col_index=nil),row_index["$=="](col_index)?nil:Opal.yieldX($yield,[row["$[]"](col_index),row_index,col_index])}).$$s=self,$$63.$$arity=1,$$63))}).$$s=this,$$62.$$arity=2,$$62)):"lower"["$==="]($case)?$send(this.rows,"each_with_index",[],(($$64=function(row,row_index){var $$65,self=$$64.$$s||this;return null==row&&(row=nil),null==row_index&&(row_index=nil),$send(0,"upto",[[row_index,last].$min()],(($$65=function(col_index){$$65.$$s;return null==col_index&&(col_index=nil),Opal.yieldX($yield,[row["$[]"](col_index),row_index,col_index])}).$$s=self,$$65.$$arity=1,$$65))}).$$s=this,$$64.$$arity=2,$$64)):"strict_lower"["$==="]($case)?$send(this.rows,"each_with_index",[],(($$66=function(row,row_index){var $$67,self=$$66.$$s||this;return null==row&&(row=nil),null==row_index&&(row_index=nil),$send([row_index,self.$column_count()].$min(),"times",[],(($$67=function(col_index){$$67.$$s;return null==col_index&&(col_index=nil),Opal.yieldX($yield,[row["$[]"](col_index),row_index,col_index])}).$$s=self,$$67.$$arity=1,$$67))}).$$s=this,$$66.$$arity=2,$$66)):"strict_upper"["$==="]($case)?$send(this.rows,"each_with_index",[],(($$68=function(row,row_index){var $$69,self=$$68.$$s||this;return null==row&&(row=nil),null==row_index&&(row_index=nil),$send($rb_plus(row_index,1),"upto",[last],(($$69=function(col_index){$$69.$$s;return null==col_index&&(col_index=nil),Opal.yieldX($yield,[row["$[]"](col_index),row_index,col_index])}).$$s=self,$$69.$$arity=1,$$69))}).$$s=this,$$68.$$arity=2,$$68)):"upper"["$==="]($case)?$send(this.rows,"each_with_index",[],(($$70=function(row,row_index){var $$71,self=$$70.$$s||this;return null==row&&(row=nil),null==row_index&&(row_index=nil),$send(row_index,"upto",[last],(($$71=function(col_index){$$71.$$s;return null==col_index&&(col_index=nil),Opal.yieldX($yield,[row["$[]"](col_index),row_index,col_index])}).$$s=self,$$71.$$arity=1,$$71))}).$$s=this,$$70.$$arity=2,$$70)):this.$raise($$($nesting,"ArgumentError"),"expected "+which.$inspect()+" to be one of :all, :diagonal, :off_diagonal, :lower, :strict_lower, :strict_upper or :upper"),this)}catch($returner){if($returner===Opal.returner)return $returner.$v;throw $returner}},$Matrix_each_with_index$57.$$arity=-1),Opal.const_set($nesting[0],"SELECTORS",$hash2(["all","diagonal","off_diagonal","lower","strict_lower","strict_upper","upper"],{all:!0,diagonal:!0,off_diagonal:!0,lower:!0,strict_lower:!0,strict_upper:!0,upper:!0}).$freeze()),Opal.def(self,"$index",$Matrix_index$72=function($a){try{var $post_args,args,$b,$$73,$$74,$iter=$Matrix_index$72.$$p,$yield=$iter||nil,which=nil,value=nil;return $iter&&($Matrix_index$72.$$p=null),$post_args=Opal.slice.call(arguments,0,arguments.length),$truthy($rb_gt((args=$post_args).$size(),2))&&this.$raise($$($nesting,"ArgumentError"),"wrong number of arguments("+args.$size()+" for 0-2)"),which=$truthy($truthy($b=args.$size()["$=="](2))?$b:$$($nesting,"SELECTORS")["$include?"](args.$last()))?args.$pop():"all",$truthy($truthy($b=$yield!==nil)?$b:args.$size()["$=="](1))?(args.$size()["$=="](1)?(value=args.$first(),$send(this,"each_with_index",[which],(($$73=function(e,row_index,col_index){$$73.$$s;if(null==e&&(e=nil),null==row_index&&(row_index=nil),null==col_index&&(col_index=nil),!e["$=="](value))return nil;Opal.ret([row_index,col_index])}).$$s=this,$$73.$$arity=3,$$73))):$send(this,"each_with_index",[which],(($$74=function(e,row_index,col_index){$$74.$$s;if(null==e&&(e=nil),null==row_index&&(row_index=nil),null==col_index&&(col_index=nil),!$truthy(Opal.yield1($yield,e)))return nil;Opal.ret([row_index,col_index])}).$$s=this,$$74.$$arity=3,$$74)),nil):$send(this,"to_enum",["find_index",which].concat(Opal.to_a(args)))}catch($returner){if($returner===Opal.returner)return $returner.$v;throw $returner}},$Matrix_index$72.$$arity=-1),self.$alias_method("find_index","index"),Opal.def(self,"$minor",$Matrix_minor$75=function($a){var param,$b,$c,$d,$$76,$case,rows,row_range=nil,col_range=nil,from_row=nil,to_row=nil,size_row=nil,from_col=nil,to_col=nil,size_col=nil;if($case=(param=Opal.slice.call(arguments,0,arguments.length)).$size(),2["$==="]($case))$c=param,row_range=null==($b=Opal.to_ary($c))[0]?nil:$b[0],col_range=null==$b[1]?nil:$b[1],from_row=row_range.$first(),$truthy($rb_lt(from_row,0))&&(from_row=$rb_plus(from_row,this.$row_count())),to_row=row_range.$end(),$truthy($rb_lt(to_row,0))&&(to_row=$rb_plus(to_row,this.$row_count())),$truthy(row_range["$exclude_end?"]())||(to_row=$rb_plus(to_row,1)),size_row=$rb_minus(to_row,from_row),from_col=col_range.$first(),$truthy($rb_lt(from_col,0))&&(from_col=$rb_plus(from_col,this.$column_count())),to_col=col_range.$end(),$truthy($rb_lt(to_col,0))&&(to_col=$rb_plus(to_col,this.$column_count())),$truthy(col_range["$exclude_end?"]())||(to_col=$rb_plus(to_col,1)),size_col=$rb_minus(to_col,from_col);else if(4["$==="]($case)){if($c=param,from_row=null==($b=Opal.to_ary($c))[0]?nil:$b[0],size_row=null==$b[1]?nil:$b[1],from_col=null==$b[2]?nil:$b[2],size_col=null==$b[3]?nil:$b[3],$truthy($truthy($b=$rb_lt(size_row,0))?$b:$rb_lt(size_col,0)))return nil;$truthy($rb_lt(from_row,0))&&(from_row=$rb_plus(from_row,this.$row_count())),$truthy($rb_lt(from_col,0))&&(from_col=$rb_plus(from_col,this.$column_count()))}else this.$raise($$($nesting,"ArgumentError"),param.$inspect());return $truthy($truthy($b=$truthy($c=$truthy($d=$rb_gt(from_row,this.$row_count()))?$d:$rb_gt(from_col,this.$column_count()))?$c:$rb_lt(from_row,0))?$b:$rb_lt(from_col,0))?nil:(rows=$send(this.rows["$[]"](from_row,size_row),"collect",[],(($$76=function(row){$$76.$$s;return null==row&&(row=nil),row["$[]"](from_col,size_col)}).$$s=this,$$76.$$arity=1,$$76)),this.$new_matrix(rows,[$rb_minus(this.$column_count(),from_col),size_col].$min()))},$Matrix_minor$75.$$arity=-1),Opal.def(self,"$first_minor",$Matrix_first_minor$77=function(row,column){var $$78,arrays=nil;return $truthy(this["$empty?"]())&&this.$raise($$($nesting,"RuntimeError"),"first_minor of empty matrix is not defined"),$truthy($rb_le(0,row)?$rb_lt(row,this.$row_count()):$rb_le(0,row))||this.$raise($$($nesting,"ArgumentError"),"invalid row ("+row.$inspect()+" for 0.."+$rb_minus(this.$row_count(),1)+")"),$truthy($rb_le(0,column)?$rb_lt(column,this.$column_count()):$rb_le(0,column))||this.$raise($$($nesting,"ArgumentError"),"invalid column ("+column.$inspect()+" for 0.."+$rb_minus(this.$column_count(),1)+")"),(arrays=this.$to_a()).$delete_at(row),$send(arrays,"each",[],(($$78=function(array){$$78.$$s;return null==array&&(array=nil),array.$delete_at(column)}).$$s=this,$$78.$$arity=1,$$78)),this.$new_matrix(arrays,$rb_minus(this.$column_count(),1))},$Matrix_first_minor$77.$$arity=2),Opal.def(self,"$cofactor",$Matrix_cofactor$79=function(row,column){return $truthy(this["$empty?"]())&&this.$raise($$($nesting,"RuntimeError"),"cofactor of empty matrix is not defined"),$truthy(this["$square?"]())||$$($nesting,"Matrix").$Raise($$($nesting,"ErrDimensionMismatch")),$rb_times(this.$first_minor(row,column).$determinant(),(-1)["$**"]($rb_plus(row,column)))},$Matrix_cofactor$79.$$arity=2),Opal.def(self,"$adjugate",$Matrix_adjugate$80=function(){var $$81;return $truthy(this["$square?"]())||$$($nesting,"Matrix").$Raise($$($nesting,"ErrDimensionMismatch")),$send($$($nesting,"Matrix"),"build",[this.$row_count(),this.$column_count()],(($$81=function(row,column){var self=$$81.$$s||this;return null==row&&(row=nil),null==column&&(column=nil),self.$cofactor(column,row)}).$$s=this,$$81.$$arity=2,$$81))},$Matrix_adjugate$80.$$arity=0),Opal.def(self,"$laplace_expansion",$Matrix_laplace_expansion$82=function($kwargs){var row,column,$a,$b,$$83,num=nil;if(null==$kwargs)$kwargs=$hash2([],{});else if(!$kwargs.$$is_hash)throw Opal.ArgumentError.$new("expected kwargs");return null==(row=$kwargs.$$smap.row)&&(row=nil),null==(column=$kwargs.$$smap.column)&&(column=nil),num=$truthy($a=row)?$a:column,$truthy($truthy($a=num["$!"]())?$a:$truthy($b=row)?column:$b)&&this.$raise($$($nesting,"ArgumentError"),"exactly one the row or column arguments must be specified"),$truthy(this["$square?"]())||$$($nesting,"Matrix").$Raise($$($nesting,"ErrDimensionMismatch")),$truthy(this["$empty?"]())&&this.$raise($$($nesting,"RuntimeError"),"laplace_expansion of empty matrix is not defined"),$truthy(($a=$rb_le(0,num))?$rb_lt(num,this.$row_count()):$rb_le(0,num))||this.$raise($$($nesting,"ArgumentError"),"invalid num ("+num.$inspect()+" for 0.."+$rb_minus(this.$row_count(),1)+")"),$send(this.$send($truthy(row)?"row":"column",num).$map(),"with_index",[],($$83=function(e,k){var self=$$83.$$s||this;return null==e&&(e=nil),null==k&&(k=nil),$rb_times(e,$send(self,"cofactor",Opal.to_a($truthy(row)?[num,k]:[k,num])))},$$83.$$s=this,$$83.$$arity=2,$$83)).$inject("+")},$Matrix_laplace_expansion$82.$$arity=-1),self.$alias_method("cofactor_expansion","laplace_expansion"),Opal.def(self,"$diagonal?",$Matrix_diagonal$ques$84=function(){return $truthy(this["$square?"]())||$$($nesting,"Matrix").$Raise($$($nesting,"ErrDimensionMismatch")),$send(this.$each("off_diagonal"),"all?",[],"zero?".$to_proc())},$Matrix_diagonal$ques$84.$$arity=0),Opal.def(self,"$empty?",$Matrix_empty$ques$85=function(){var $a;return $truthy($a=this.$column_count()["$=="](0))?$a:this.$row_count()["$=="](0)},$Matrix_empty$ques$85.$$arity=0),Opal.def(self,"$hermitian?",$Matrix_hermitian$ques$86=function(){var $$87;return $truthy(this["$square?"]())||$$($nesting,"Matrix").$Raise($$($nesting,"ErrDimensionMismatch")),$send(this.$each_with_index("upper"),"all?",[],(($$87=function(e,row,col){var self=$$87.$$s||this;return null==e&&(e=nil),null==row&&(row=nil),null==col&&(col=nil),e["$=="](self.$rows()["$[]"](col)["$[]"](row).$conj())}).$$s=this,$$87.$$arity=3,$$87))},$Matrix_hermitian$ques$86.$$arity=0),Opal.def(self,"$lower_triangular?",$Matrix_lower_triangular$ques$88=function(){return $send(this.$each("strict_upper"),"all?",[],"zero?".$to_proc())},$Matrix_lower_triangular$ques$88.$$arity=0),Opal.def(self,"$normal?",$Matrix_normal$ques$89=function(){try{var $$90;return $truthy(this["$square?"]())||$$($nesting,"Matrix").$Raise($$($nesting,"ErrDimensionMismatch")),$send(this.$rows(),"each_with_index",[],(($$90=function(row_i,i){var $$91,self=$$90.$$s||this;return null==row_i&&(row_i=nil),null==i&&(i=nil),$send(self.$rows(),"each_with_index",[],(($$91=function(row_j,j){var $$92,self=$$91.$$s||this,s=nil;if(null==row_j&&(row_j=nil),null==j&&(j=nil),s=0,$send(self.$rows(),"each_with_index",[],(($$92=function(row_k,k){$$92.$$s;return null==row_k&&(row_k=nil),null==k&&(k=nil),s=$rb_plus(s,$rb_minus($rb_times(row_i["$[]"](k),row_j["$[]"](k).$conj()),$rb_times(row_k["$[]"](i).$conj(),row_k["$[]"](j))))}).$$s=self,$$92.$$arity=2,$$92)),s["$=="](0))return nil;Opal.ret(!1)}).$$s=self,$$91.$$arity=2,$$91))}).$$s=this,$$90.$$arity=2,$$90)),!0}catch($returner){if($returner===Opal.returner)return $returner.$v;throw $returner}},$Matrix_normal$ques$89.$$arity=0),Opal.def(self,"$orthogonal?",$Matrix_orthogonal$ques$93=function(){try{var $$94;return $truthy(this["$square?"]())||$$($nesting,"Matrix").$Raise($$($nesting,"ErrDimensionMismatch")),$send(this.$rows(),"each_with_index",[],(($$94=function(row,i){var $$95,self=$$94.$$s||this;return null==row&&(row=nil),null==i&&(i=nil),$send(self.$column_count(),"times",[],(($$95=function(j){var $$96,self=$$95.$$s||this,s=nil;if(null==j&&(j=nil),s=0,$send(self.$row_count(),"times",[],(($$96=function(k){var self=$$96.$$s||this;return null==k&&(k=nil),s=$rb_plus(s,$rb_times(row["$[]"](k),self.$rows()["$[]"](k)["$[]"](j)))}).$$s=self,$$96.$$arity=1,$$96)),s["$=="](i["$=="](j)?1:0))return nil;Opal.ret(!1)}).$$s=self,$$95.$$arity=1,$$95))}).$$s=this,$$94.$$arity=2,$$94)),!0}catch($returner){if($returner===Opal.returner)return $returner.$v;throw $returner}},$Matrix_orthogonal$ques$93.$$arity=0),Opal.def(self,"$permutation?",$Matrix_permutation$ques$97=function(){try{var $$98,cols=nil;return $truthy(this["$square?"]())||$$($nesting,"Matrix").$Raise($$($nesting,"ErrDimensionMismatch")),cols=$$($nesting,"Array").$new(this.$column_count()),$send(this.$rows(),"each_with_index",[],(($$98=function(row,i){var $$99,self=$$98.$$s||this,found=nil;if(null==row&&(row=nil),null==i&&(i=nil),found=!1,$send(row,"each_with_index",[],(($$99=function(e,j){$$99.$$s;var $a,$writer=nil;return null==e&&(e=nil),null==j&&(j=nil),e["$=="](1)?($truthy($truthy($a=found)?$a:cols["$[]"](j))&&Opal.ret(!1),$writer=[j,!0],$send(cols,"[]=",Opal.to_a($writer)),found=$writer[$rb_minus($writer.length,1)]):$truthy(e["$!="](0))?void Opal.ret(!1):nil}).$$s=self,$$99.$$arity=2,$$99)),$truthy(found))return nil;Opal.ret(!1)}).$$s=this,$$98.$$arity=2,$$98)),!0}catch($returner){if($returner===Opal.returner)return $returner.$v;throw $returner}},$Matrix_permutation$ques$97.$$arity=0),Opal.def(self,"$real?",$Matrix_real$ques$100=function(){return $send(this,"all?",[],"real?".$to_proc())},$Matrix_real$ques$100.$$arity=0),Opal.def(self,"$regular?",$Matrix_regular$ques$101=function(){return this["$singular?"]()["$!"]()},$Matrix_regular$ques$101.$$arity=0),Opal.def(self,"$singular?",$Matrix_singular$ques$102=function(){return this.$determinant()["$=="](0)},$Matrix_singular$ques$102.$$arity=0),Opal.def(self,"$square?",$Matrix_square$ques$103=function(){return this.$column_count()["$=="](this.$row_count())},$Matrix_square$ques$103.$$arity=0),Opal.def(self,"$symmetric?",$Matrix_symmetric$ques$104=function(){try{var $$105;return $truthy(this["$square?"]())||$$($nesting,"Matrix").$Raise($$($nesting,"ErrDimensionMismatch")),$send(this,"each_with_index",["strict_upper"],(($$105=function(e,row,col){var self=$$105.$$s||this;if(null==e&&(e=nil),null==row&&(row=nil),null==col&&(col=nil),!$truthy(e["$!="](self.$rows()["$[]"](col)["$[]"](row))))return nil;Opal.ret(!1)}).$$s=this,$$105.$$arity=3,$$105)),!0}catch($returner){if($returner===Opal.returner)return $returner.$v;throw $returner}},$Matrix_symmetric$ques$104.$$arity=0),Opal.def(self,"$antisymmetric?",$Matrix_antisymmetric$ques$106=function(){try{var $$107;return $truthy(this["$square?"]())||$$($nesting,"Matrix").$Raise($$($nesting,"ErrDimensionMismatch")),$send(this,"each_with_index",["upper"],(($$107=function(e,row,col){var self=$$107.$$s||this;if(null==e&&(e=nil),null==row&&(row=nil),null==col&&(col=nil),e["$=="](self.$rows()["$[]"](col)["$[]"](row)["$-@"]()))return nil;Opal.ret(!1)}).$$s=this,$$107.$$arity=3,$$107)),!0}catch($returner){if($returner===Opal.returner)return $returner.$v;throw $returner}},$Matrix_antisymmetric$ques$106.$$arity=0),Opal.def(self,"$unitary?",$Matrix_unitary$ques$108=function(){try{var $$109;return $truthy(this["$square?"]())||$$($nesting,"Matrix").$Raise($$($nesting,"ErrDimensionMismatch")),$send(this.$rows(),"each_with_index",[],(($$109=function(row,i){var $$110,self=$$109.$$s||this;return null==row&&(row=nil),null==i&&(i=nil),$send(self.$column_count(),"times",[],(($$110=function(j){var $$111,self=$$110.$$s||this,s=nil;if(null==j&&(j=nil),s=0,$send(self.$row_count(),"times",[],(($$111=function(k){var self=$$111.$$s||this;return null==k&&(k=nil),s=$rb_plus(s,$rb_times(row["$[]"](k).$conj(),self.$rows()["$[]"](k)["$[]"](j)))}).$$s=self,$$111.$$arity=1,$$111)),s["$=="](i["$=="](j)?1:0))return nil;Opal.ret(!1)}).$$s=self,$$110.$$arity=1,$$110))}).$$s=this,$$109.$$arity=2,$$109)),!0}catch($returner){if($returner===Opal.returner)return $returner.$v;throw $returner}},$Matrix_unitary$ques$108.$$arity=0),Opal.def(self,"$upper_triangular?",$Matrix_upper_triangular$ques$112=function(){return $send(this.$each("strict_lower"),"all?",[],"zero?".$to_proc())},$Matrix_upper_triangular$ques$112.$$arity=0),Opal.def(self,"$zero?",$Matrix_zero$ques$113=function(){return $send(this,"all?",[],"zero?".$to_proc())},$Matrix_zero$ques$113.$$arity=0),Opal.def(self,"$==",$Matrix_$eq_eq$114=function(other){var $a;return!!$truthy($truthy($a=$$($nesting,"Matrix")["$==="](other))?this.$column_count()["$=="](other.$column_count()):$a)&&this.$rows()["$=="](other.$rows())},$Matrix_$eq_eq$114.$$arity=1),Opal.def(self,"$eql?",$Matrix_eql$ques$115=function(other){var $a;return!!$truthy($truthy($a=$$($nesting,"Matrix")["$==="](other))?this.$column_count()["$=="](other.$column_count()):$a)&&this.$rows()["$eql?"](other.$rows())},$Matrix_eql$ques$115.$$arity=1),Opal.def(self,"$clone",$Matrix_clone$116=function(){return this.$new_matrix($send(this.rows,"map",[],"dup".$to_proc()),this.$column_count())},$Matrix_clone$116.$$arity=0),Opal.def(self,"$hash",$Matrix_hash$117=function(){return this.rows.$hash()},$Matrix_hash$117.$$arity=0),Opal.def(self,"$*",$Matrix_$$118=function(m){var $$119,$$121,self=this,$case=nil,rows=nil;return $case=m,$$($nesting,"Numeric")["$==="]($case)?(rows=$send(self.rows,"collect",[],(($$119=function(row){var $$120,self=$$119.$$s||this;return null==row&&(row=nil),$send(row,"collect",[],(($$120=function(e){return $$120.$$s,null==e&&(e=nil),$rb_times(e,m)}).$$s=self,$$120.$$arity=1,$$120))}).$$s=self,$$119.$$arity=1,$$119)),self.$new_matrix(rows,self.$column_count())):$$($nesting,"Vector")["$==="]($case)?(m=self.$class().$column_vector(m),$rb_times(self,m).$column(0)):$$($nesting,"Matrix")["$==="]($case)?($truthy(self.$column_count()["$!="](m.$row_count()))&&$$($nesting,"Matrix").$Raise($$($nesting,"ErrDimensionMismatch")),rows=$send($$($nesting,"Array"),"new",[self.$row_count()],(($$121=function(i){var $$122,self=$$121.$$s||this;return null==i&&(i=nil),$send($$($nesting,"Array"),"new",[m.$column_count()],(($$122=function(j){var $$123,self=$$122.$$s||this;return null==j&&(j=nil),$send(Opal.Range.$new(0,self.$column_count(),!0),"inject",[0],(($$123=function(vij,k){var self=$$123.$$s||this;return null==vij&&(vij=nil),null==k&&(k=nil),$rb_plus(vij,$rb_times(self["$[]"](i,k),m["$[]"](k,j)))}).$$s=self,$$123.$$arity=2,$$123))}).$$s=self,$$122.$$arity=1,$$122))}).$$s=self,$$121.$$arity=1,$$121)),self.$new_matrix(rows,m.$column_count())):self.$apply_through_coercion(m,"*")},$Matrix_$$118.$$arity=1),Opal.def(self,"$+",$Matrix_$plus$124=function(m){var $$125,$case,rows;if($case=m,$$($nesting,"Numeric")["$==="]($case))$$($nesting,"Matrix").$Raise($$($nesting,"ErrOperationNotDefined"),"+",this.$class(),m.$class());else if($$($nesting,"Vector")["$==="]($case))m=this.$class().$column_vector(m);else if(!$$($nesting,"Matrix")["$==="]($case))return this.$apply_through_coercion(m,"+");return $truthy(this.$row_count()["$=="](m.$row_count())?this.$column_count()["$=="](m.$column_count()):this.$row_count()["$=="](m.$row_count()))||$$($nesting,"Matrix").$Raise($$($nesting,"ErrDimensionMismatch")),rows=$send($$($nesting,"Array"),"new",[this.$row_count()],(($$125=function(i){var $$126,self=$$125.$$s||this;return null==i&&(i=nil),$send($$($nesting,"Array"),"new",[self.$column_count()],(($$126=function(j){var self=$$126.$$s||this;return null==j&&(j=nil),$rb_plus(self["$[]"](i,j),m["$[]"](i,j))}).$$s=self,$$126.$$arity=1,$$126))}).$$s=this,$$125.$$arity=1,$$125)),this.$new_matrix(rows,this.$column_count())},$Matrix_$plus$124.$$arity=1),Opal.def(self,"$-",$Matrix_$minus$127=function(m){var $$128,$case,rows;if($case=m,$$($nesting,"Numeric")["$==="]($case))$$($nesting,"Matrix").$Raise($$($nesting,"ErrOperationNotDefined"),"-",this.$class(),m.$class());else if($$($nesting,"Vector")["$==="]($case))m=this.$class().$column_vector(m);else if(!$$($nesting,"Matrix")["$==="]($case))return this.$apply_through_coercion(m,"-");return $truthy(this.$row_count()["$=="](m.$row_count())?this.$column_count()["$=="](m.$column_count()):this.$row_count()["$=="](m.$row_count()))||$$($nesting,"Matrix").$Raise($$($nesting,"ErrDimensionMismatch")),rows=$send($$($nesting,"Array"),"new",[this.$row_count()],(($$128=function(i){var $$129,self=$$128.$$s||this;return null==i&&(i=nil),$send($$($nesting,"Array"),"new",[self.$column_count()],(($$129=function(j){var self=$$129.$$s||this;return null==j&&(j=nil),$rb_minus(self["$[]"](i,j),m["$[]"](i,j))}).$$s=self,$$129.$$arity=1,$$129))}).$$s=this,$$128.$$arity=1,$$128)),this.$new_matrix(rows,this.$column_count())},$Matrix_$minus$127.$$arity=1),Opal.def(self,"$/",$Matrix_$slash$130=function(other){var $$131,self=this,$case=nil,rows=nil;return $case=other,$$($nesting,"Numeric")["$==="]($case)?(rows=$send(self.rows,"collect",[],(($$131=function(row){var $$132,self=$$131.$$s||this;return null==row&&(row=nil),$send(row,"collect",[],(($$132=function(e){return $$132.$$s,null==e&&(e=nil),$rb_divide(e,other)}).$$s=self,$$132.$$arity=1,$$132))}).$$s=self,$$131.$$arity=1,$$131)),self.$new_matrix(rows,self.$column_count())):$$($nesting,"Matrix")["$==="]($case)?$rb_times(self,other.$inverse()):self.$apply_through_coercion(other,"/")},$Matrix_$slash$130.$$arity=1),Opal.def(self,"$hadamard_product",$Matrix_hadamard_product$133=function(m){var $$134;return $send(this,"combine",[m],(($$134=function(a,b){$$134.$$s;return null==a&&(a=nil),null==b&&(b=nil),$rb_times(a,b)}).$$s=this,$$134.$$arity=2,$$134))},$Matrix_hadamard_product$133.$$arity=1),self.$alias_method("entrywise_product","hadamard_product"),Opal.def(self,"$inverse",$Matrix_inverse$135=function(){return $truthy(this["$square?"]())||$$($nesting,"Matrix").$Raise($$($nesting,"ErrDimensionMismatch")),this.$class().$I(this.$row_count()).$send("inverse_from",this)},$Matrix_inverse$135.$$arity=0),Opal.alias(self,"inv","inverse"),Opal.def(self,"$inverse_from",$Matrix_inverse_from$136=function(src){var $$137,last,a=nil;return last=$rb_minus(this.$row_count(),1),a=src.$to_a(),$send(0,"upto",[last],(($$137=function(k){var $$138,$a,$$139,$$142,$$143,self=$$137.$$s||this,i=nil,akk=nil;return null==self.rows&&(self.rows=nil),null==k&&(k=nil),i=k,akk=a["$[]"](k)["$[]"](k).$abs(),$send($rb_plus(k,1),"upto",[last],(($$138=function(j){var v;$$138.$$s;return null==j&&(j=nil),v=a["$[]"](j)["$[]"](k).$abs(),$truthy($rb_gt(v,akk))?(i=j,akk=v):nil}).$$s=self,$$138.$$arity=1,$$138)),akk["$=="](0)&&$$($nesting,"Matrix").$Raise($$($nesting,"ErrNotRegular")),$truthy(i["$!="](k))&&($a=[a["$[]"](k),a["$[]"](i)],a["$[]="](i,$a[0]),a["$[]="](k,$a[1]),$a=[self.rows["$[]"](k),self.rows["$[]"](i)],self.rows["$[]="](i,$a[0]),self.rows["$[]="](k,$a[1])),akk=a["$[]"](k)["$[]"](k),$send(0,"upto",[last],(($$139=function(ii){var $$140,$$141,q,self=$$139.$$s||this,$writer=nil;return null==ii&&(ii=nil),ii["$=="](k)?nil:(q=a["$[]"](ii)["$[]"](k).$quo(akk),$writer=[k,0],$send(a["$[]"](ii),"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)],$send($rb_plus(k,1),"upto",[last],(($$140=function(j){$$140.$$s;var $binary_op_recvr_tmp_1=nil;return null==j&&(j=nil),$binary_op_recvr_tmp_1=a["$[]"](ii),$writer=[j,$rb_minus($binary_op_recvr_tmp_1["$[]"](j),$rb_times(a["$[]"](k)["$[]"](j),q))],$send($binary_op_recvr_tmp_1,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]}).$$s=self,$$140.$$arity=1,$$140)),$send(0,"upto",[last],(($$141=function(j){var self=$$141.$$s||this,$binary_op_recvr_tmp_2=nil;return null==self.rows&&(self.rows=nil),null==j&&(j=nil),$binary_op_recvr_tmp_2=self.rows["$[]"](ii),$writer=[j,$rb_minus($binary_op_recvr_tmp_2["$[]"](j),$rb_times(self.rows["$[]"](k)["$[]"](j),q))],$send($binary_op_recvr_tmp_2,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]}).$$s=self,$$141.$$arity=1,$$141)))}).$$s=self,$$139.$$arity=1,$$139)),$send($rb_plus(k,1),"upto",[last],(($$142=function(j){var $writer;$$142.$$s;return null==j&&(j=nil),$writer=[j,a["$[]"](k)["$[]"](j).$quo(akk)],$send(a["$[]"](k),"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]}).$$s=self,$$142.$$arity=1,$$142)),$send(0,"upto",[last],(($$143=function(j){var $writer,self=$$143.$$s||this;return null==self.rows&&(self.rows=nil),null==j&&(j=nil),$writer=[j,self.rows["$[]"](k)["$[]"](j).$quo(akk)],$send(self.rows["$[]"](k),"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]}).$$s=self,$$143.$$arity=1,$$143))}).$$s=this,$$137.$$arity=1,$$137)),this},$Matrix_inverse_from$136.$$arity=1),self.$private("inverse_from"),Opal.def(self,"$**",$Matrix_$$$144=function(other){try{var $$145,$a,$b,$$146,self=this,$case=nil,x=nil,z=nil,v=nil,d=nil,v_inv=nil;return function(){if($case=other,$$($nesting,"Integer")["$==="]($case)){if(x=self,$truthy($rb_le(other,0))){if(x=self.$inverse(),other["$=="](0))return self.$class().$identity(self.$column_count());other=other["$-@"]()}return z=nil,$send(self,"loop",[],(($$145=function(){$$145.$$s;return other["$[]"](0)["$=="](1)&&(z=$truthy(z)?$rb_times(z,x):x),$truthy((other=other["$>>"](1))["$zero?"]())&&Opal.ret(z),x=$rb_times(x,x)}).$$s=self,$$145.$$arity=0,$$145))}return $$($nesting,"Numeric")["$==="]($case)?($b=self.$eigensystem(),$a=Opal.to_ary($b),v=null==$a[0]?nil:$a[0],d=null==$a[1]?nil:$a[1],v_inv=null==$a[2]?nil:$a[2],$rb_times($rb_times(v,$send(self.$class(),"diagonal",Opal.to_a($send(d.$each("diagonal"),"map",[],(($$146=function(e){$$146.$$s;return null==e&&(e=nil),e["$**"](other)}).$$s=self,$$146.$$arity=1,$$146))))),v_inv)):$$($nesting,"Matrix").$Raise($$($nesting,"ErrOperationNotDefined"),"**",self.$class(),other.$class())}()}catch($returner){if($returner===Opal.returner)return $returner.$v;throw $returner}},$Matrix_$$$144.$$arity=1),Opal.def(self,"$+@",$Matrix_$plus$$147=function(){return this},$Matrix_$plus$$147.$$arity=0),Opal.def(self,"$-@",$Matrix_$minus$$148=function(){var $$149;return $send(this,"collect",[],(($$149=function(e){$$149.$$s;return null==e&&(e=nil),e["$-@"]()}).$$s=this,$$149.$$arity=1,$$149))},$Matrix_$minus$$148.$$arity=0),Opal.def(self,"$determinant",$Matrix_determinant$150=function(){var $a,$b,self=this,m=nil,$case=nil,m0=nil,m1=nil,m2=nil,m3=nil;return $truthy(self["$square?"]())||$$($nesting,"Matrix").$Raise($$($nesting,"ErrDimensionMismatch")),m=self.rows,$case=self.$row_count(),(0)["$==="]($case)?1:1["$==="]($case)?m["$[]"](0)["$[]"](0)["$+@"]():2["$==="]($case)?$rb_minus($rb_times(m["$[]"](0)["$[]"](0)["$+@"](),m["$[]"](1)["$[]"](1)),$rb_times(m["$[]"](0)["$[]"](1),m["$[]"](1)["$[]"](0))):3["$==="]($case)?($b=m,$a=Opal.to_ary($b),m0=null==$a[0]?nil:$a[0],m1=null==$a[1]?nil:$a[1],m2=null==$a[2]?nil:$a[2],$rb_minus($rb_plus($rb_plus($rb_minus($rb_minus($rb_times($rb_times(m0["$[]"](0)["$+@"](),m1["$[]"](1)),m2["$[]"](2)),$rb_times($rb_times(m0["$[]"](0),m1["$[]"](2)),m2["$[]"](1))),$rb_times($rb_times(m0["$[]"](1),m1["$[]"](0)),m2["$[]"](2))),$rb_times($rb_times(m0["$[]"](1),m1["$[]"](2)),m2["$[]"](0))),$rb_times($rb_times(m0["$[]"](2),m1["$[]"](0)),m2["$[]"](1))),$rb_times($rb_times(m0["$[]"](2),m1["$[]"](1)),m2["$[]"](0)))):4["$==="]($case)?($b=m,$a=Opal.to_ary($b),m0=null==$a[0]?nil:$a[0],m1=null==$a[1]?nil:$a[1],m2=null==$a[2]?nil:$a[2],m3=null==$a[3]?nil:$a[3],$rb_plus($rb_minus($rb_minus($rb_plus($rb_plus($rb_minus($rb_minus($rb_plus($rb_plus($rb_minus($rb_minus($rb_plus($rb_plus($rb_minus($rb_minus($rb_plus($rb_plus($rb_minus($rb_minus($rb_plus($rb_plus($rb_minus($rb_minus($rb_times($rb_times($rb_times(m0["$[]"](0)["$+@"](),m1["$[]"](1)),m2["$[]"](2)),m3["$[]"](3)),$rb_times($rb_times($rb_times(m0["$[]"](0),m1["$[]"](1)),m2["$[]"](3)),m3["$[]"](2))),$rb_times($rb_times($rb_times(m0["$[]"](0),m1["$[]"](2)),m2["$[]"](1)),m3["$[]"](3))),$rb_times($rb_times($rb_times(m0["$[]"](0),m1["$[]"](2)),m2["$[]"](3)),m3["$[]"](1))),$rb_times($rb_times($rb_times(m0["$[]"](0),m1["$[]"](3)),m2["$[]"](1)),m3["$[]"](2))),$rb_times($rb_times($rb_times(m0["$[]"](0),m1["$[]"](3)),m2["$[]"](2)),m3["$[]"](1))),$rb_times($rb_times($rb_times(m0["$[]"](1),m1["$[]"](0)),m2["$[]"](2)),m3["$[]"](3))),$rb_times($rb_times($rb_times(m0["$[]"](1),m1["$[]"](0)),m2["$[]"](3)),m3["$[]"](2))),$rb_times($rb_times($rb_times(m0["$[]"](1),m1["$[]"](2)),m2["$[]"](0)),m3["$[]"](3))),$rb_times($rb_times($rb_times(m0["$[]"](1),m1["$[]"](2)),m2["$[]"](3)),m3["$[]"](0))),$rb_times($rb_times($rb_times(m0["$[]"](1),m1["$[]"](3)),m2["$[]"](0)),m3["$[]"](2))),$rb_times($rb_times($rb_times(m0["$[]"](1),m1["$[]"](3)),m2["$[]"](2)),m3["$[]"](0))),$rb_times($rb_times($rb_times(m0["$[]"](2),m1["$[]"](0)),m2["$[]"](1)),m3["$[]"](3))),$rb_times($rb_times($rb_times(m0["$[]"](2),m1["$[]"](0)),m2["$[]"](3)),m3["$[]"](1))),$rb_times($rb_times($rb_times(m0["$[]"](2),m1["$[]"](1)),m2["$[]"](0)),m3["$[]"](3))),$rb_times($rb_times($rb_times(m0["$[]"](2),m1["$[]"](1)),m2["$[]"](3)),m3["$[]"](0))),$rb_times($rb_times($rb_times(m0["$[]"](2),m1["$[]"](3)),m2["$[]"](0)),m3["$[]"](1))),$rb_times($rb_times($rb_times(m0["$[]"](2),m1["$[]"](3)),m2["$[]"](1)),m3["$[]"](0))),$rb_times($rb_times($rb_times(m0["$[]"](3),m1["$[]"](0)),m2["$[]"](1)),m3["$[]"](2))),$rb_times($rb_times($rb_times(m0["$[]"](3),m1["$[]"](0)),m2["$[]"](2)),m3["$[]"](1))),$rb_times($rb_times($rb_times(m0["$[]"](3),m1["$[]"](1)),m2["$[]"](0)),m3["$[]"](2))),$rb_times($rb_times($rb_times(m0["$[]"](3),m1["$[]"](1)),m2["$[]"](2)),m3["$[]"](0))),$rb_times($rb_times($rb_times(m0["$[]"](3),m1["$[]"](2)),m2["$[]"](0)),m3["$[]"](1))),$rb_times($rb_times($rb_times(m0["$[]"](3),m1["$[]"](2)),m2["$[]"](1)),m3["$[]"](0)))):self.$determinant_bareiss()},$Matrix_determinant$150.$$arity=0),self.$alias_method("det","determinant"),Opal.def(self,"$determinant_bareiss",$Matrix_determinant_bareiss$151=function(){try{var $$152,$$153,size,last,no_pivot,a=nil,sign=nil,pivot=nil;return size=this.$row_count(),last=$rb_minus(size,1),a=this.$to_a(),no_pivot=$send($$($nesting,"Proc"),"new",[],(($$152=function(){$$152.$$s;Opal.ret(0)}).$$s=this,$$152.$$arity=0,$$152)),pivot=sign=1,$send(size,"times",[],(($$153=function(k){var $$154,$a,$$155,previous_pivot,self=$$153.$$s||this,switch$=nil;return null==k&&(k=nil),previous_pivot=pivot,(pivot=a["$[]"](k)["$[]"](k))["$=="](0)&&(switch$=$send(Opal.Range.$new($rb_plus(k,1),size,!0),"find",[no_pivot],(($$154=function(row){$$154.$$s;return null==row&&(row=nil),a["$[]"](row)["$[]"](k)["$!="](0)}).$$s=self,$$154.$$arity=1,$$154)),$a=[a["$[]"](k),a["$[]"](switch$)],a["$[]="](switch$,$a[0]),a["$[]="](k,$a[1]),pivot=a["$[]"](k)["$[]"](k),sign=sign["$-@"]()),$send($rb_plus(k,1),"upto",[last],(($$155=function(i){var $$156,self=$$155.$$s||this,ai=nil;return null==i&&(i=nil),ai=a["$[]"](i),$send($rb_plus(k,1),"upto",[last],(($$156=function(j){var $writer;$$156.$$s;return null==j&&(j=nil),$writer=[j,$rb_divide($rb_minus($rb_times(pivot,ai["$[]"](j)),$rb_times(ai["$[]"](k),a["$[]"](k)["$[]"](j))),previous_pivot)],$send(ai,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]}).$$s=self,$$156.$$arity=1,$$156))}).$$s=self,$$155.$$arity=1,$$155))}).$$s=this,$$153.$$arity=1,$$153)),$rb_times(sign,pivot)}catch($returner){if($returner===Opal.returner)return $returner.$v;throw $returner}},$Matrix_determinant_bareiss$151.$$arity=0),self.$private("determinant_bareiss"),Opal.def(self,"$determinant_e",$Matrix_determinant_e$157=function(){return this.$warn("Matrix#determinant_e is deprecated; use #determinant",$hash2(["uplevel"],{uplevel:1})),this.$determinant()},$Matrix_determinant_e$157.$$arity=0),Opal.alias(self,"det_e","determinant_e"),Opal.def(self,"$hstack",$Matrix_hstack$158=function($a){var matrices,self=this;return matrices=Opal.slice.call(arguments,0,arguments.length),$send(self.$class(),"hstack",[self].concat(Opal.to_a(matrices)))},$Matrix_hstack$158.$$arity=-1),Opal.def(self,"$rank",$Matrix_rank$159=function(){var $$160,last_column,last_row,a=nil,pivot_row=nil,previous_pivot=nil;return a=this.$to_a(),last_column=$rb_minus(this.$column_count(),1),last_row=$rb_minus(this.$row_count(),1),previous_pivot=1,$send(pivot_row=0,"upto",[last_column],(($$160=function(k){var $$161,$a,$$162,switch_row,self=$$160.$$s||this,pivot=nil;return null==k&&(k=nil),switch_row=$send(Opal.Range.$new(pivot_row,last_row,!1),"find",[],(($$161=function(row){$$161.$$s;return null==row&&(row=nil),a["$[]"](row)["$[]"](k)["$!="](0)}).$$s=self,$$161.$$arity=1,$$161)),$truthy(switch_row)?(pivot_row["$=="](switch_row)||($a=[a["$[]"](pivot_row),a["$[]"](switch_row)],a["$[]="](switch_row,$a[0]),a["$[]="](pivot_row,$a[1])),pivot=a["$[]"](pivot_row)["$[]"](k),$send($rb_plus(pivot_row,1),"upto",[last_row],(($$162=function(i){var $$163,self=$$162.$$s||this,ai=nil;return null==i&&(i=nil),ai=a["$[]"](i),$send($rb_plus(k,1),"upto",[last_column],(($$163=function(j){var $writer;$$163.$$s;return null==j&&(j=nil),$writer=[j,$rb_divide($rb_minus($rb_times(pivot,ai["$[]"](j)),$rb_times(ai["$[]"](k),a["$[]"](pivot_row)["$[]"](j))),previous_pivot)],$send(ai,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]}).$$s=self,$$163.$$arity=1,$$163))}).$$s=self,$$162.$$arity=1,$$162)),pivot_row=$rb_plus(pivot_row,1),previous_pivot=pivot):nil}).$$s=this,$$160.$$arity=1,$$160)),pivot_row},$Matrix_rank$159.$$arity=0),Opal.def(self,"$rank_e",$Matrix_rank_e$164=function(){return this.$warn("Matrix#rank_e is deprecated; use #rank",$hash2(["uplevel"],{uplevel:1})),this.$rank()},$Matrix_rank_e$164.$$arity=0),Opal.def(self,"$round",$Matrix_round$165=function(ndigits){var $$166;return null==ndigits&&(ndigits=0),$send(this,"map",[],(($$166=function(e){$$166.$$s;return null==e&&(e=nil),e.$round(ndigits)}).$$s=this,$$166.$$arity=1,$$166))},$Matrix_round$165.$$arity=-1),Opal.def(self,"$trace",$Matrix_trace$167=function(){var $$168;return $truthy(this["$square?"]())||$$($nesting,"Matrix").$Raise($$($nesting,"ErrDimensionMismatch")),$send(Opal.Range.$new(0,this.$column_count(),!0),"inject",[0],(($$168=function(tr,i){var self=$$168.$$s||this;return null==self.rows&&(self.rows=nil),null==tr&&(tr=nil),null==i&&(i=nil),$rb_plus(tr,self.rows["$[]"](i)["$[]"](i))}).$$s=this,$$168.$$arity=2,$$168))},$Matrix_trace$167.$$arity=0),Opal.alias(self,"tr","trace"),Opal.def(self,"$transpose",$Matrix_transpose$169=function(){return $truthy(this.$row_count()["$zero?"]())?this.$class().$empty(this.$column_count(),0):this.$new_matrix(this.rows.$transpose(),this.$row_count())},$Matrix_transpose$169.$$arity=0),Opal.alias(self,"t","transpose"),Opal.def(self,"$vstack",$Matrix_vstack$170=function($a){var matrices,self=this;return matrices=Opal.slice.call(arguments,0,arguments.length),$send(self.$class(),"vstack",[self].concat(Opal.to_a(matrices)))},$Matrix_vstack$170.$$arity=-1),Opal.def(self,"$eigensystem",$Matrix_eigensystem$171=function(){return $$($nesting,"EigenvalueDecomposition").$new(this)},$Matrix_eigensystem$171.$$arity=0),Opal.alias(self,"eigen","eigensystem"),Opal.def(self,"$lup",$Matrix_lup$172=function(){return $$($nesting,"LUPDecomposition").$new(this)},$Matrix_lup$172.$$arity=0),Opal.alias(self,"lup_decomposition","lup"),Opal.def(self,"$conjugate",$Matrix_conjugate$173=function(){return $send(this,"collect",[],"conjugate".$to_proc())},$Matrix_conjugate$173.$$arity=0),Opal.alias(self,"conj","conjugate"),Opal.def(self,"$imaginary",$Matrix_imaginary$174=function(){return $send(this,"collect",[],"imaginary".$to_proc())},$Matrix_imaginary$174.$$arity=0),Opal.alias(self,"imag","imaginary"),Opal.def(self,"$real",$Matrix_real$175=function(){return $send(this,"collect",[],"real".$to_proc())},$Matrix_real$175.$$arity=0),Opal.def(self,"$rect",$Matrix_rect$176=function(){return[this.$real(),this.$imag()]},$Matrix_rect$176.$$arity=0),Opal.alias(self,"rectangular","rect"),Opal.def(self,"$coerce",$Matrix_coerce$177=function(other){var self=this,$case=nil;return $case=other,$$($nesting,"Numeric")["$==="]($case)?[$$($nesting,"Scalar").$new(other),self]:self.$raise($$($nesting,"TypeError"),self.$class()+" can't be coerced into "+other.$class())},$Matrix_coerce$177.$$arity=1),Opal.def(self,"$row_vectors",$Matrix_row_vectors$178=function(){var $$179;return $send($$($nesting,"Array"),"new",[this.$row_count()],(($$179=function(i){var self=$$179.$$s||this;return null==i&&(i=nil),self.$row(i)}).$$s=this,$$179.$$arity=1,$$179))},$Matrix_row_vectors$178.$$arity=0),Opal.def(self,"$column_vectors",$Matrix_column_vectors$180=function(){var $$181;return $send($$($nesting,"Array"),"new",[this.$column_count()],(($$181=function(i){var self=$$181.$$s||this;return null==i&&(i=nil),self.$column(i)}).$$s=this,$$181.$$arity=1,$$181))},$Matrix_column_vectors$180.$$arity=0),Opal.def(self,"$to_matrix",$Matrix_to_matrix$182=function(){return this},$Matrix_to_matrix$182.$$arity=0),Opal.def(self,"$to_a",$Matrix_to_a$183=function(){return $send(this.rows,"collect",[],"dup".$to_proc())},$Matrix_to_a$183.$$arity=0),Opal.def(self,"$elements_to_f",$Matrix_elements_to_f$184=function(){return this.$warn("Matrix#elements_to_f is deprecated, use map(&:to_f)",$hash2(["uplevel"],{uplevel:1})),$send(this,"map",[],"to_f".$to_proc())},$Matrix_elements_to_f$184.$$arity=0),Opal.def(self,"$elements_to_i",$Matrix_elements_to_i$185=function(){return this.$warn("Matrix#elements_to_i is deprecated, use map(&:to_i)",$hash2(["uplevel"],{uplevel:1})),$send(this,"map",[],"to_i".$to_proc())},$Matrix_elements_to_i$185.$$arity=0),Opal.def(self,"$elements_to_r",$Matrix_elements_to_r$186=function(){return this.$warn("Matrix#elements_to_r is deprecated, use map(&:to_r)",$hash2(["uplevel"],{uplevel:1})),$send(this,"map",[],"to_r".$to_proc())},$Matrix_elements_to_r$186.$$arity=0),Opal.def(self,"$to_s",$Matrix_to_s$187=function(){var $$188;return $truthy(this["$empty?"]())?this.$class()+".empty("+this.$row_count()+", "+this.$column_count()+")":$rb_plus($rb_plus(this.$class()+"[",$send(this.rows,"collect",[],($$188=function(row){var $$189,self=$$188.$$s||this;return null==row&&(row=nil),$rb_plus($rb_plus("[",$send(row,"collect",[],($$189=function(e){$$189.$$s;return null==e&&(e=nil),e.$to_s()},$$189.$$s=self,$$189.$$arity=1,$$189)).$join(", ")),"]")},$$188.$$s=this,$$188.$$arity=1,$$188)).$join(", ")),"]")},$Matrix_to_s$187.$$arity=0),Opal.def(self,"$inspect",$Matrix_inspect$190=function(){return $truthy(this["$empty?"]())?this.$class()+".empty("+this.$row_count()+", "+this.$column_count()+")":""+this.$class()+this.rows.$inspect()},$Matrix_inspect$190.$$arity=0),function($base,$parent_nesting){var $ConversionHelper_convert_to_array$191,self=$module($base,"ConversionHelper"),$nesting=[self].concat($parent_nesting);Opal.def(self,"$convert_to_array",$ConversionHelper_convert_to_array$191=function(obj,copy){var self=this,$case=nil,converted=nil,e=nil;return null==copy&&(copy=!1),function(){if($case=obj,$$($nesting,"Array")["$==="]($case))return $truthy(copy)?obj.$dup():obj;if($$($nesting,"Vector")["$==="]($case))return obj.$to_a();try{converted=obj.$to_ary()}catch($err){if(!Opal.rescue($err,[$$($nesting,"Exception")]))throw $err;e=$err;try{self.$raise($$($nesting,"TypeError"),"can't convert "+obj.$class()+" into an Array ("+e.$message()+")")}finally{Opal.pop_exception()}}return $truthy(converted["$is_a?"]($$($nesting,"Array")))||self.$raise($$($nesting,"TypeError"),obj.$class()+"#to_ary should return an Array"),converted}()},$ConversionHelper_convert_to_array$191.$$arity=-2),self.$private("convert_to_array")}($nesting[0],$nesting),self.$extend($$($nesting,"ConversionHelper")),function($base,$parent_nesting){var $CoercionHelper_apply_through_coercion$192,$CoercionHelper_coerce_to$193,$CoercionHelper_coerce_to_int$194,$CoercionHelper_coerce_to_matrix$195,self=$module($base,"CoercionHelper"),$nesting=[self].concat($parent_nesting);Opal.def(self,"$apply_through_coercion",$CoercionHelper_apply_through_coercion$192=function(obj,oper){var $a,self=this,coercion=nil;try{return coercion=obj.$coerce(self),$truthy($truthy($a=coercion["$is_a?"]($$($nesting,"Array")))?coercion.$length()["$=="](2):$a)||self.$raise($$($nesting,"TypeError")),coercion["$[]"](0).$public_send(oper,coercion["$[]"](1))}catch($err){if(!Opal.rescue($err,[$$($nesting,"StandardError")]))throw $err;try{return self.$raise($$($nesting,"TypeError"),obj.$inspect()+" can't be coerced into "+self.$class())}finally{Opal.pop_exception()}}},$CoercionHelper_apply_through_coercion$192.$$arity=2),self.$private("apply_through_coercion"),Opal.defs(self,"$coerce_to",$CoercionHelper_coerce_to$193=function(obj,cls,meth){var self=this,ret=nil,e=nil;if($truthy(obj["$kind_of?"](cls)))return obj;$truthy(obj["$respond_to?"](meth))||self.$raise($$($nesting,"TypeError"),"Expected a "+cls+" but got a "+obj.$class());try{ret=obj.$__send__(meth)}catch($err){if(!Opal.rescue($err,[$$($nesting,"Exception")]))throw $err;e=$err;try{self.$raise($$($nesting,"TypeError"),"Coercion error: "+obj.$inspect()+"."+meth+" => "+cls+" failed:\n("+e.$message()+")")}finally{Opal.pop_exception()}}return $truthy(ret["$kind_of?"](cls))||self.$raise($$($nesting,"TypeError"),"Coercion error: obj."+meth+" did NOT return a "+cls+" (was "+ret.$class()+")"),ret},$CoercionHelper_coerce_to$193.$$arity=3),Opal.defs(self,"$coerce_to_int",$CoercionHelper_coerce_to_int$194=function(obj){return this.$coerce_to(obj,$$($nesting,"Integer"),"to_int")},$CoercionHelper_coerce_to_int$194.$$arity=1),Opal.defs(self,"$coerce_to_matrix",$CoercionHelper_coerce_to_matrix$195=function(obj){return this.$coerce_to(obj,$$($nesting,"Matrix"),"to_matrix")},$CoercionHelper_coerce_to_matrix$195.$$arity=1)}($nesting[0],$nesting),self.$include($$($nesting,"CoercionHelper")),function($base,$super,$parent_nesting){var $Scalar_initialize$196,$Scalar_$plus$197,$Scalar_$minus$198,$Scalar_$$199,$Scalar_$slash$201,$Scalar_$$$202,self=$klass($base,$super,"Scalar"),$nesting=[self].concat($parent_nesting);self.$$prototype.value=nil,self.$include($$($nesting,"ExceptionForMatrix")),self.$include($$($nesting,"CoercionHelper")),Opal.def(self,"$initialize",$Scalar_initialize$196=function(value){return this.value=value},$Scalar_initialize$196.$$arity=1),Opal.def(self,"$+",$Scalar_$plus$197=function(other){var self=this,$case=nil;return $case=other,$$($nesting,"Numeric")["$==="]($case)?$$($nesting,"Scalar").$new($rb_plus(self.value,other)):$$($nesting,"Vector")["$==="]($case)||$$($nesting,"Matrix")["$==="]($case)?$$($nesting,"Scalar").$Raise($$($nesting,"ErrOperationNotDefined"),"+",self.value.$class(),other.$class()):self.$apply_through_coercion(other,"+")},$Scalar_$plus$197.$$arity=1),Opal.def(self,"$-",$Scalar_$minus$198=function(other){var self=this,$case=nil;return $case=other,$$($nesting,"Numeric")["$==="]($case)?$$($nesting,"Scalar").$new($rb_minus(self.value,other)):$$($nesting,"Vector")["$==="]($case)||$$($nesting,"Matrix")["$==="]($case)?$$($nesting,"Scalar").$Raise($$($nesting,"ErrOperationNotDefined"),"-",self.value.$class(),other.$class()):self.$apply_through_coercion(other,"-")},$Scalar_$minus$198.$$arity=1),Opal.def(self,"$*",$Scalar_$$199=function(other){var $$200,self=this,$case=nil;return $case=other,$$($nesting,"Numeric")["$==="]($case)?$$($nesting,"Scalar").$new($rb_times(self.value,other)):$$($nesting,"Vector")["$==="]($case)||$$($nesting,"Matrix")["$==="]($case)?$send(other,"collect",[],(($$200=function(e){var self=$$200.$$s||this;return null==self.value&&(self.value=nil),null==e&&(e=nil),$rb_times(self.value,e)}).$$s=self,$$200.$$arity=1,$$200)):self.$apply_through_coercion(other,"*")},$Scalar_$$199.$$arity=1),Opal.def(self,"$/",$Scalar_$slash$201=function(other){var self=this,$case=nil;return $case=other,$$($nesting,"Numeric")["$==="]($case)?$$($nesting,"Scalar").$new($rb_divide(self.value,other)):$$($nesting,"Vector")["$==="]($case)?$$($nesting,"Scalar").$Raise($$($nesting,"ErrOperationNotDefined"),"/",self.value.$class(),other.$class()):$$($nesting,"Matrix")["$==="]($case)?$rb_times(self,other.$inverse()):self.$apply_through_coercion(other,"/")},$Scalar_$slash$201.$$arity=1),Opal.def(self,"$**",$Scalar_$$$202=function(other){var self=this,$case=nil;return $case=other,$$($nesting,"Numeric")["$==="]($case)?$$($nesting,"Scalar").$new(self.value["$**"](other)):$$($nesting,"Vector")["$==="]($case)?$$($nesting,"Scalar").$Raise($$($nesting,"ErrOperationNotDefined"),"**",self.value.$class(),other.$class()):$$($nesting,"Matrix")["$==="]($case)?$$($nesting,"Scalar").$Raise($$($nesting,"ErrOperationNotImplemented"),"**",self.value.$class(),other.$class()):self.$apply_through_coercion(other,"**")},$Scalar_$$$202.$$arity=1)}($nesting[0],$$($nesting,"Numeric"),$nesting)}($nesting[0],0,$nesting),function($base,$super,$parent_nesting){var $Vector_$$$203,$Vector_elements$204,$Vector_basis$205,$Vector_zero$206,$Vector_initialize$207,$Vector_$$$208,$Vector_$$$eq$209,$Vector_round$210,$Vector_size$212,$Vector_each$213,$Vector_each2$214,$Vector_collect2$216,$Vector_independent$ques$218,$Vector_independent$ques$220,$Vector_zero$ques$221,$Vector_$eq_eq$222,$Vector_eql$ques$223,$Vector_clone$224,$Vector_hash$225,$Vector_$$226,$Vector_$plus$228,$Vector_$minus$230,$Vector_$slash$232,$Vector_$plus$$234,$Vector_$minus$$235,$Vector_inner_product$237,$Vector_cross_product$239,$Vector_collect$242,$Vector_magnitude$243,$Vector_map2$245,$Vector_normalize$246,$Vector_angle_with$247,$Vector_covector$248,$Vector_to_a$249,$Vector_to_matrix$250,$Vector_elements_to_f$251,$Vector_elements_to_i$252,$Vector_elements_to_r$253,$Vector_coerce$254,$Vector_to_s$255,$Vector_inspect$256,self=$klass($base,null,"Vector"),$nesting=[self].concat($parent_nesting);return self.$$prototype.elements=nil,self.$include($$($nesting,"ExceptionForMatrix")),self.$include($$($nesting,"Enumerable")),self.$include($$$($$($nesting,"Matrix"),"CoercionHelper")),self.$extend($$$($$($nesting,"Matrix"),"ConversionHelper")),self.$private_class_method("new"),self.$attr_reader("elements"),self.$protected("elements"),Opal.defs($$($nesting,"Vector"),"$[]",$Vector_$$$203=function($a){var array;return array=Opal.slice.call(arguments,0,arguments.length),this.$new(this.$convert_to_array(array,!1))},$Vector_$$$203.$$arity=-1),Opal.defs($$($nesting,"Vector"),"$elements",$Vector_elements$204=function(array,copy){return null==copy&&(copy=!0),this.$new(this.$convert_to_array(array,copy))},$Vector_elements$204.$$arity=-2),Opal.defs($$($nesting,"Vector"),"$basis",$Vector_basis$205=function($kwargs){var size,index,array,$writer;if(null==$kwargs)$kwargs=$hash2([],{});else if(!$kwargs.$$is_hash)throw Opal.ArgumentError.$new("expected kwargs");if(!Opal.hasOwnProperty.call($kwargs.$$smap,"size"))throw Opal.ArgumentError.$new("missing keyword: size");if(size=$kwargs.$$smap.size,!Opal.hasOwnProperty.call($kwargs.$$smap,"index"))throw Opal.ArgumentError.$new("missing keyword: index");return index=$kwargs.$$smap.index,$truthy($rb_lt(size,1))&&this.$raise($$($nesting,"ArgumentError"),"invalid size ("+size+" for 1..)"),$truthy($rb_le(0,index)?$rb_lt(index,size):$rb_le(0,index))||this.$raise($$($nesting,"ArgumentError"),"invalid index ("+index+" for 0..."+size+")"),array=$$($nesting,"Array").$new(size,0),$writer=[index,1],$send(array,"[]=",Opal.to_a($writer)),$rb_minus($writer.length,1),this.$new(this.$convert_to_array(array,!1))},$Vector_basis$205.$$arity=1),Opal.defs($$($nesting,"Vector"),"$zero",$Vector_zero$206=function(size){var array;return $truthy($rb_lt(size,0))&&this.$raise($$($nesting,"ArgumentError"),"invalid size ("+size+" for 0..)"),array=$$($nesting,"Array").$new(size,0),this.$new(this.$convert_to_array(array,!1))},$Vector_zero$206.$$arity=1),Opal.def(self,"$initialize",$Vector_initialize$207=function(array){return this.elements=array},$Vector_initialize$207.$$arity=1),Opal.def(self,"$[]",$Vector_$$$208=function(i){return this.elements["$[]"](i)},$Vector_$$$208.$$arity=1),Opal.alias(self,"element","[]"),Opal.alias(self,"component","[]"),Opal.def(self,"$[]=",$Vector_$$$eq$209=function(i,v){var $writer;return $writer=[i,v],$send(this.elements,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]},$Vector_$$$eq$209.$$arity=2),Opal.alias(self,"set_element","[]="),Opal.alias(self,"set_component","[]="),self.$private("[]=","set_element","set_component"),Opal.def(self,"$round",$Vector_round$210=function(ndigits){var $$211;return null==ndigits&&(ndigits=0),$send(this,"map",[],(($$211=function(e){$$211.$$s;return null==e&&(e=nil),e.$round(ndigits)}).$$s=this,$$211.$$arity=1,$$211))},$Vector_round$210.$$arity=-1),Opal.def(self,"$size",$Vector_size$212=function(){return this.elements.$size()},$Vector_size$212.$$arity=0),Opal.def(self,"$each",$Vector_each$213=function(){var $iter=$Vector_each$213.$$p,block=$iter||nil;return $iter&&($Vector_each$213.$$p=null),$iter&&($Vector_each$213.$$p=null),block===nil?this.$to_enum("each"):($send(this.elements,"each",[],block.$to_proc()),this)},$Vector_each$213.$$arity=0),Opal.def(self,"$each2",$Vector_each2$214=function(v){var $$215,$iter=$Vector_each2$214.$$p,$yield=$iter||nil;return $iter&&($Vector_each2$214.$$p=null),$truthy(v["$kind_of?"]($$($nesting,"Integer")))&&this.$raise($$($nesting,"TypeError"),"Integer is not like Vector"),$truthy(this.$size()["$!="](v.$size()))&&$$($nesting,"Vector").$Raise($$($nesting,"ErrDimensionMismatch")),$yield===nil?this.$to_enum("each2",v):($send(this.$size(),"times",[],(($$215=function(i){var self=$$215.$$s||this;return null==self.elements&&(self.elements=nil),null==i&&(i=nil),Opal.yieldX($yield,[self.elements["$[]"](i),v["$[]"](i)])}).$$s=this,$$215.$$arity=1,$$215)),this)},$Vector_each2$214.$$arity=1),Opal.def(self,"$collect2",$Vector_collect2$216=function(v){var $$217,$iter=$Vector_collect2$216.$$p,$yield=$iter||nil;return $iter&&($Vector_collect2$216.$$p=null),$truthy(v["$kind_of?"]($$($nesting,"Integer")))&&this.$raise($$($nesting,"TypeError"),"Integer is not like Vector"),$truthy(this.$size()["$!="](v.$size()))&&$$($nesting,"Vector").$Raise($$($nesting,"ErrDimensionMismatch")),$yield===nil?this.$to_enum("collect2",v):$send($$($nesting,"Array"),"new",[this.$size()],(($$217=function(i){var self=$$217.$$s||this;return null==self.elements&&(self.elements=nil),null==i&&(i=nil),Opal.yieldX($yield,[self.elements["$[]"](i),v["$[]"](i)])}).$$s=this,$$217.$$arity=1,$$217))},$Vector_collect2$216.$$arity=1),Opal.defs($$($nesting,"Vector"),"$independent?",$Vector_independent$ques$218=function($a){var $post_args,vs,$$219;return $post_args=Opal.slice.call(arguments,0,arguments.length),$send(vs=$post_args,"each",[],(($$219=function(v){var self=$$219.$$s||this;return null==v&&(v=nil),$truthy(v["$is_a?"]($$($nesting,"Vector")))||self.$raise($$($nesting,"TypeError"),"expected Vector, got "+v.$class()),v.$size()["$=="](vs.$first().$size())?nil:$$($nesting,"Vector").$Raise($$($nesting,"ErrDimensionMismatch"))}).$$s=this,$$219.$$arity=1,$$219)),!$truthy($rb_gt(vs.$count(),vs.$first().$size()))&&$send($$($nesting,"Matrix"),"[]",Opal.to_a(vs)).$rank()["$eql?"](vs.$count())},$Vector_independent$ques$218.$$arity=-1),Opal.def(self,"$independent?",$Vector_independent$ques$220=function($a){var vs,self=this;return vs=Opal.slice.call(arguments,0,arguments.length),$send(self.$class(),"independent?",[self].concat(Opal.to_a(vs)))},$Vector_independent$ques$220.$$arity=-1),Opal.def(self,"$zero?",$Vector_zero$ques$221=function(){return $send(this,"all?",[],"zero?".$to_proc())},$Vector_zero$ques$221.$$arity=0),Opal.def(self,"$==",$Vector_$eq_eq$222=function(other){return!!$truthy($$($nesting,"Vector")["$==="](other))&&this.elements["$=="](other.$elements())},$Vector_$eq_eq$222.$$arity=1),Opal.def(self,"$eql?",$Vector_eql$ques$223=function(other){return!!$truthy($$($nesting,"Vector")["$==="](other))&&this.elements["$eql?"](other.$elements())},$Vector_eql$ques$223.$$arity=1),Opal.def(self,"$clone",$Vector_clone$224=function(){return this.$class().$elements(this.elements)},$Vector_clone$224.$$arity=0),Opal.def(self,"$hash",$Vector_hash$225=function(){return this.elements.$hash()},$Vector_hash$225.$$arity=0),Opal.def(self,"$*",$Vector_$$226=function(x){var $$227,self=this,$case=nil,els=nil;return $case=x,$$($nesting,"Numeric")["$==="]($case)?(els=$send(self.elements,"collect",[],(($$227=function(e){return $$227.$$s,null==e&&(e=nil),$rb_times(e,x)}).$$s=self,$$227.$$arity=1,$$227)),self.$class().$elements(els,!1)):$$($nesting,"Matrix")["$==="]($case)?$rb_times($$($nesting,"Matrix").$column_vector(self),x):$$($nesting,"Vector")["$==="]($case)?$$($nesting,"Vector").$Raise($$($nesting,"ErrOperationNotDefined"),"*",self.$class(),x.$class()):self.$apply_through_coercion(x,"*")},$Vector_$$226.$$arity=1),Opal.def(self,"$+",$Vector_$plus$228=function(v){var $$229,self=this,$case=nil,els=nil;return $case=v,$$($nesting,"Vector")["$==="]($case)?($truthy(self.$size()["$!="](v.$size()))&&$$($nesting,"Vector").$Raise($$($nesting,"ErrDimensionMismatch")),els=$send(self,"collect2",[v],(($$229=function(v1,v2){return $$229.$$s,null==v1&&(v1=nil),null==v2&&(v2=nil),$rb_plus(v1,v2)}).$$s=self,$$229.$$arity=2,$$229)),self.$class().$elements(els,!1)):$$($nesting,"Matrix")["$==="]($case)?$rb_plus($$($nesting,"Matrix").$column_vector(self),v):self.$apply_through_coercion(v,"+")},$Vector_$plus$228.$$arity=1),Opal.def(self,"$-",$Vector_$minus$230=function(v){var $$231,self=this,$case=nil,els=nil;return $case=v,$$($nesting,"Vector")["$==="]($case)?($truthy(self.$size()["$!="](v.$size()))&&$$($nesting,"Vector").$Raise($$($nesting,"ErrDimensionMismatch")),els=$send(self,"collect2",[v],(($$231=function(v1,v2){return $$231.$$s,null==v1&&(v1=nil),null==v2&&(v2=nil),$rb_minus(v1,v2)}).$$s=self,$$231.$$arity=2,$$231)),self.$class().$elements(els,!1)):$$($nesting,"Matrix")["$==="]($case)?$rb_minus($$($nesting,"Matrix").$column_vector(self),v):self.$apply_through_coercion(v,"-")},$Vector_$minus$230.$$arity=1),Opal.def(self,"$/",$Vector_$slash$232=function(x){var $$233,self=this,$case=nil,els=nil;return $case=x,$$($nesting,"Numeric")["$==="]($case)?(els=$send(self.elements,"collect",[],(($$233=function(e){return $$233.$$s,null==e&&(e=nil),$rb_divide(e,x)}).$$s=self,$$233.$$arity=1,$$233)),self.$class().$elements(els,!1)):$$($nesting,"Matrix")["$==="]($case)||$$($nesting,"Vector")["$==="]($case)?$$($nesting,"Vector").$Raise($$($nesting,"ErrOperationNotDefined"),"/",self.$class(),x.$class()):self.$apply_through_coercion(x,"/")},$Vector_$slash$232.$$arity=1),Opal.def(self,"$+@",$Vector_$plus$$234=function(){return this},$Vector_$plus$$234.$$arity=0),Opal.def(self,"$-@",$Vector_$minus$$235=function(){var $$236;return $send(this,"collect",[],(($$236=function(e){$$236.$$s;return null==e&&(e=nil),e["$-@"]()}).$$s=this,$$236.$$arity=1,$$236))},$Vector_$minus$$235.$$arity=0),Opal.def(self,"$inner_product",$Vector_inner_product$237=function(v){var $$238,p=nil;return $truthy(this.$size()["$!="](v.$size()))&&$$($nesting,"Vector").$Raise($$($nesting,"ErrDimensionMismatch")),p=0,$send(this,"each2",[v],(($$238=function(v1,v2){$$238.$$s;return null==v1&&(v1=nil),null==v2&&(v2=nil),p=$rb_plus(p,$rb_times(v1,v2.$conj()))}).$$s=this,$$238.$$arity=2,$$238)),p},$Vector_inner_product$237.$$arity=1),self.$alias_method("dot","inner_product"),Opal.def(self,"$cross_product",$Vector_cross_product$239=function($a){var $post_args,vs,$$240,$$241,self=this,$case=nil,v=nil,rows=nil;return $post_args=Opal.slice.call(arguments,0,arguments.length),vs=$post_args,$truthy($rb_ge(self.$size(),2))||self.$raise($$($nesting,"ErrOperationNotDefined"),"cross product is not defined on vectors of dimension "+self.$size()),vs.$size()["$=="]($rb_minus(self.$size(),2))||self.$raise($$($nesting,"ArgumentError"),"wrong number of arguments ("+vs.$size()+" for "+$rb_minus(self.$size(),2)+")"),$send(vs,"each",[],(($$240=function(v){var self=$$240.$$s||this;return null==v&&(v=nil),$truthy(v["$is_a?"]($$($nesting,"Vector")))||self.$raise($$($nesting,"TypeError"),"expected Vector, got "+v.$class()),v.$size()["$=="](self.$size())?nil:$$($nesting,"Vector").$Raise($$($nesting,"ErrDimensionMismatch"))}).$$s=self,$$240.$$arity=1,$$240)),$case=self.$size(),2["$==="]($case)?$$($nesting,"Vector")["$[]"](self.elements["$[]"](1)["$-@"](),self.elements["$[]"](0)):3["$==="]($case)?(v=vs["$[]"](0),$$($nesting,"Vector")["$[]"]($rb_minus($rb_times(v["$[]"](2),self.elements["$[]"](1)),$rb_times(v["$[]"](1),self.elements["$[]"](2))),$rb_minus($rb_times(v["$[]"](0),self.elements["$[]"](2)),$rb_times(v["$[]"](2),self.elements["$[]"](0))),$rb_minus($rb_times(v["$[]"](1),self.elements["$[]"](0)),$rb_times(v["$[]"](0),self.elements["$[]"](1))))):(rows=[self].concat(Opal.to_a(vs)).concat([$send($$($nesting,"Array"),"new",[self.$size()],($$241=function(i){var self=$$241.$$s||this;return null==i&&(i=nil),$$($nesting,"Vector").$basis($hash2(["size","index"],{size:self.$size(),index:i}))},$$241.$$s=self,$$241.$$arity=1,$$241))]),$$($nesting,"Matrix").$rows(rows).$laplace_expansion($hash2(["row"],{row:$rb_minus(self.$size(),1)})))},$Vector_cross_product$239.$$arity=-1),self.$alias_method("cross","cross_product"),Opal.def(self,"$collect",$Vector_collect$242=function(){var els,$iter=$Vector_collect$242.$$p,block=$iter||nil;return $iter&&($Vector_collect$242.$$p=null),$iter&&($Vector_collect$242.$$p=null),block===nil?this.$to_enum("collect"):(els=$send(this.elements,"collect",[],block.$to_proc()),this.$class().$elements(els,!1))},$Vector_collect$242.$$arity=0),Opal.alias(self,"map","collect"),Opal.def(self,"$magnitude",$Vector_magnitude$243=function(){var $$244;return $$($nesting,"Math").$sqrt($send(this.elements,"inject",[0],(($$244=function(v,e){$$244.$$s;return null==v&&(v=nil),null==e&&(e=nil),$rb_plus(v,e.$abs2())}).$$s=this,$$244.$$arity=2,$$244)))},$Vector_magnitude$243.$$arity=0),Opal.alias(self,"r","magnitude"),Opal.alias(self,"norm","magnitude"),Opal.def(self,"$map2",$Vector_map2$245=function(v){var els,$iter=$Vector_map2$245.$$p,block=$iter||nil;return $iter&&($Vector_map2$245.$$p=null),$iter&&($Vector_map2$245.$$p=null),block===nil?this.$to_enum("map2",v):(els=$send(this,"collect2",[v],block.$to_proc()),this.$class().$elements(els,!1))},$Vector_map2$245.$$arity=1),function($base,$super,$parent_nesting){[$klass($base,$super,"ZeroVectorError")].concat($parent_nesting)}($nesting[0],$$($nesting,"StandardError"),$nesting),Opal.def(self,"$normalize",$Vector_normalize$246=function(){var n=nil;return(n=this.$magnitude())["$=="](0)&&this.$raise($$($nesting,"ZeroVectorError"),"Zero vectors can not be normalized"),$rb_divide(this,n)},$Vector_normalize$246.$$arity=0),Opal.def(self,"$angle_with",$Vector_angle_with$247=function(v){var prod=nil;return $truthy(v["$is_a?"]($$($nesting,"Vector")))||this.$raise($$($nesting,"TypeError"),"Expected a Vector, got a "+v.$class()),$truthy(this.$size()["$!="](v.$size()))&&$$($nesting,"Vector").$Raise($$($nesting,"ErrDimensionMismatch")),(prod=$rb_times(this.$magnitude(),v.$magnitude()))["$=="](0)&&this.$raise($$($nesting,"ZeroVectorError"),"Can't get angle of zero vector"),$$($nesting,"Math").$acos($rb_divide(this.$inner_product(v),prod))},$Vector_angle_with$247.$$arity=1),Opal.def(self,"$covector",$Vector_covector$248=function(){return $$($nesting,"Matrix").$row_vector(this)},$Vector_covector$248.$$arity=0),Opal.def(self,"$to_a",$Vector_to_a$249=function(){return this.elements.$dup()},$Vector_to_a$249.$$arity=0),Opal.def(self,"$to_matrix",$Vector_to_matrix$250=function(){return $$($nesting,"Matrix").$column_vector(this)},$Vector_to_matrix$250.$$arity=0),Opal.def(self,"$elements_to_f",$Vector_elements_to_f$251=function(){return this.$warn("Vector#elements_to_f is deprecated",$hash2(["uplevel"],{uplevel:1})),$send(this,"map",[],"to_f".$to_proc())},$Vector_elements_to_f$251.$$arity=0),Opal.def(self,"$elements_to_i",$Vector_elements_to_i$252=function(){return this.$warn("Vector#elements_to_i is deprecated",$hash2(["uplevel"],{uplevel:1})),$send(this,"map",[],"to_i".$to_proc())},$Vector_elements_to_i$252.$$arity=0),Opal.def(self,"$elements_to_r",$Vector_elements_to_r$253=function(){return this.$warn("Vector#elements_to_r is deprecated",$hash2(["uplevel"],{uplevel:1})),$send(this,"map",[],"to_r".$to_proc())},$Vector_elements_to_r$253.$$arity=0),Opal.def(self,"$coerce",$Vector_coerce$254=function(other){var self=this,$case=nil;return $case=other,$$($nesting,"Numeric")["$==="]($case)?[$$$($$($nesting,"Matrix"),"Scalar").$new(other),self]:self.$raise($$($nesting,"TypeError"),self.$class()+" can't be coerced into "+other.$class())},$Vector_coerce$254.$$arity=1),Opal.def(self,"$to_s",$Vector_to_s$255=function(){return $rb_plus($rb_plus("Vector[",this.elements.$join(", ")),"]")},$Vector_to_s$255.$$arity=0),Opal.def(self,"$inspect",$Vector_inspect$256=function(){return $rb_plus("Vector",this.elements.$inspect())},$Vector_inspect$256.$$arity=0),nil&&"inspect"}($nesting[0],0,$nesting)};
