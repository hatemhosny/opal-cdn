Opal.modules.observer=function(Opal){Opal.top;var $nesting=[],nil=Opal.nil,$$=(Opal.$$$,Opal.$$),$module=Opal.module,$truthy=Opal.truthy,$hash2=Opal.hash2,$send=Opal.send;return Opal.add_stubs(["$respond_to?","$raise","$new","$to_s","$[]=","$-","$delete","$clear","$size","$each","$send"]),function($Observable_notify_observers$7,$Observable_changed$ques$6){var $Observable_notify_observers$7=$module($Observable_notify_observers$7,"Observable"),$nesting=[$Observable_notify_observers$7].concat($Observable_changed$ques$6);return Opal.def($Observable_notify_observers$7,"$add_observer",$Observable_changed$ques$6=function(observer,rhs){var $a,lhs=nil;return null==this.observer_peers&&(this.observer_peers=nil),null==rhs&&(rhs="update"),$truthy(null!=($a=this.observer_peers)&&$a!==nil?"instance-variable":nil)||(this.observer_peers=$hash2([],{})),$truthy(observer["$respond_to?"](rhs))||this.$raise($$($nesting,"NoMethodError").$new("observer does not respond to `"+rhs.$to_s()+"'",rhs.$to_s())),lhs=[observer,rhs],$send(this.observer_peers,"[]=",Opal.to_a(lhs)),lhs[rhs=1,"number"==typeof(lhs=lhs.length)&&"number"==typeof rhs?lhs-rhs:lhs["$-"](rhs)]},$Observable_changed$ques$6.$$arity=-2),Opal.def($Observable_notify_observers$7,"$delete_observer",$Observable_changed$ques$6=function(observer){var $a;return null==this.observer_peers&&(this.observer_peers=nil),$truthy(null!=($a=this.observer_peers)&&$a!==nil?"instance-variable":nil)?this.observer_peers.$delete(observer):nil},$Observable_changed$ques$6.$$arity=1),Opal.def($Observable_notify_observers$7,"$delete_observers",$Observable_changed$ques$6=function(){var $a;return null==this.observer_peers&&(this.observer_peers=nil),$truthy(null!=($a=this.observer_peers)&&$a!==nil?"instance-variable":nil)?this.observer_peers.$clear():nil},$Observable_changed$ques$6.$$arity=0),Opal.def($Observable_notify_observers$7,"$count_observers",$Observable_changed$ques$6=function(){var $a;return null==this.observer_peers&&(this.observer_peers=nil),$truthy(null!=($a=this.observer_peers)&&$a!==nil?"instance-variable":nil)?this.observer_peers.$size():0},$Observable_changed$ques$6.$$arity=0),Opal.def($Observable_notify_observers$7,"$changed",$Observable_changed$ques$6=function(state){return null==state&&(state=!0),this.observer_state=state},$Observable_changed$ques$6.$$arity=-1),Opal.def($Observable_notify_observers$7,"$changed?",$Observable_changed$ques$6=function(){var $a,self=this,$ret_or_1=nil;return null==self.observer_state&&(self.observer_state=nil),!!$truthy($truthy(($a=self.observer_state,$ret_or_1=null!=$a&&$a!==nil?"instance-variable":nil))?self.observer_state:$ret_or_1)},$Observable_changed$ques$6.$$arity=0),Opal.def($Observable_notify_observers$7,"$notify_observers",$Observable_notify_observers$7=function($a){var arg,$b,$$8,self=this,$c=nil;return null==self.observer_state&&(self.observer_state=nil),null==self.observer_peers&&(self.observer_peers=nil),$b=Opal.slice.call(arguments,0,arguments.length),arg=$b,$truthy($truthy(($b=self.observer_state,$c=null!=$b&&$b!==nil?"instance-variable":nil))?self.observer_state:$c)?($truthy(null!=($c=self.observer_peers)&&$c!==nil?"instance-variable":nil)&&$send(self.observer_peers,"each",[],(($$8=function(k,v){null==$$8.$$s||$$8.$$s;return null==k&&(k=nil),null==v&&(v=nil),$send(k,"send",[v].concat(Opal.to_a(arg)))}).$$s=self,$$8.$$arity=2,$$8)),self.observer_state=!1):nil},$Observable_notify_observers$7.$$arity=-1),nil&&"notify_observers"}($nesting[0],$nesting)};
