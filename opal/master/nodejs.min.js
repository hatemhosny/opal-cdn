Opal.modules["nodejs/kernel"]=function(Opal){Opal.top;var TMP_$$$eq_3,TMP_$$_4,$nesting=[],nil=Opal.nil,$$=(Opal.const_get_qualified,Opal.const_get_relative),$module=(Opal.breaker,Opal.slice,Opal.module);return Opal.add_stubs(["$to_str","$new","$to_s"]),Opal.exit=process.exit,function($base,$parent_nesting){function $Kernel(){}var TMP_Kernel_caller_1,TMP_Kernel_node_require_2,self=$Kernel=$module($base,"Kernel",$Kernel),$nesting=(self.prototype,[self].concat($parent_nesting));Opal.const_set($nesting[0],"NODE_REQUIRE",require),Opal.def(self,"$caller",TMP_Kernel_caller_1=function($a){var stack;Opal.slice.call(arguments,0,arguments.length);try{throw Error("my error")}catch(e){stack=e.stack}return stack.$split("\n").slice(3)},TMP_Kernel_caller_1.$$arity=-1),Opal.def(self,"$node_require",TMP_Kernel_node_require_2=function(path){return $$($nesting,"NODE_REQUIRE")(path.$to_str())},TMP_Kernel_node_require_2.$$arity=1)}($nesting[0],$nesting),Opal.const_set($nesting[0],"ARGV",process.argv.slice(2)),Opal.const_set($nesting[0],"ENV",$$($nesting,"Object").$new()),Opal.defs($$($nesting,"ENV"),"$[]=",TMP_$$$eq_3=function(name,value){return process.env[name.$to_s()]=value.$to_s()},TMP_$$$eq_3.$$arity=2),Opal.defs($$($nesting,"ENV"),"$[]",TMP_$$_4=function(name){return process.env[name]||nil},TMP_$$_4.$$arity=1),nil&&"[]"},Opal.modules["nodejs/file"]=function(Opal){var self=Opal.top,$nesting=[],nil=Opal.nil,$$$=Opal.const_get_qualified,$$=Opal.const_get_relative,$klass=(Opal.breaker,Opal.slice,Opal.klass),$truthy=Opal.truthy,$gvars=Opal.gvars;Opal.add_stubs(["$raise","$warn","$const_get","$new","$const_defined?","$const_set","$include","$node_require","$size","$respond_to?","$path","$join","$call","$exist?","$realpath","$!=","$close","$delete","$match?","$sub","$attr_reader","$to_a","$each_line","$to_enum","$read","$chomp"]);var errno_code,warnings={},errno_codes=["EACCES","EISDIR","EMFILE","ENOENT","EPERM"];function handle_unsupported_feature(message){switch(Opal.config.unsupported_features_severity){case"error":$$($nesting,"Kernel").$raise($$($nesting,"NotImplementedError"),message);break;case"warning":!function(string){if(warnings[string])return;warnings[string]=!0,self.$warn(string)}(message)}}function executeIOAction(action){try{return action()}catch(error){if(0<=errno_codes.indexOf(error.code))throw $$($nesting,"Errno").$const_get(error.code).$new(error.message);throw error}}for(var i=0,ii=errno_codes.length;i<ii;i++)errno_code=errno_codes[i],$$($nesting,"Errno")["$const_defined?"](errno_code)||$$($nesting,"Errno").$const_set(errno_code,$$($nesting,"Class").$new($$($nesting,"SystemCallError")));return function($base,$super,$parent_nesting){function $File(){}var TMP_File_read_1,TMP_File_write_2,TMP_File_exist$q_3,TMP_File_realpath_4,TMP_File_join_5,TMP_File_directory$q_6,TMP_File_file$q_7,TMP_File_readable$q_8,TMP_File_size_9,TMP_File_open_10,TMP_File_stat_11,TMP_File_mtime_12,TMP_File_symlink$q_13,TMP_File_initialize_14,TMP_File_read_15,TMP_File_readlines_16,TMP_File_each_line_17,TMP_File_write_18,TMP_File_flush_19,TMP_File_close_20,TMP_File_mtime_21,self=$File=$klass($base,$super,"File",$File),def=self.prototype,$nesting=[self].concat($parent_nesting);null==self.__fs__&&(self.__fs__=nil),null==self.__path__&&(self.__path__=nil),def.eof=def.path=def.fd=nil,self.$include($$$($$$("::","IO"),"Writable")),self.$include($$$($$$("::","IO"),"Readable")),self.__fs__=self.$node_require("fs"),self.__path__=self.$node_require("path");var __fs__=self.__fs__,__path__=self.__path__;$truthy(__path__.sep!==$$($nesting,"Separator"))&&Opal.const_set($nesting[0],"ALT_SEPARATOR",__path__.sep),Opal.defs(self,"$read",TMP_File_read_1=function(path){return executeIOAction(function(){return __fs__.readFileSync(path).toString()})},TMP_File_read_1.$$arity=1),Opal.defs(self,"$write",TMP_File_write_2=function(path,data){return executeIOAction(function(){return __fs__.writeFileSync(path,data)}),data.$size()},TMP_File_write_2.$$arity=2),Opal.defs(self,"$exist?",TMP_File_exist$q_3=function(path){return $truthy(path["$respond_to?"]("path"))&&(path=path.$path()),executeIOAction(function(){return __fs__.existsSync(path)})},TMP_File_exist$q_3.$$arity=1),Opal.defs(self,"$realpath",TMP_File_realpath_4=function(pathname,dir_string,cache){var $iter=TMP_File_realpath_4.$$p,block=$iter||nil;if($iter&&(TMP_File_realpath_4.$$p=null),$iter&&(TMP_File_realpath_4.$$p=null),null==dir_string&&(dir_string=nil),null==cache&&(cache=nil),$truthy(dir_string)&&(pathname=this.$join(dir_string,pathname)),block===nil)return executeIOAction(function(){return __fs__.realpathSync(pathname,cache)});__fs__.realpath(pathname,cache,function(error,realpath){error?Opal.IOError.$new(error.message):block.$call(realpath)})},TMP_File_realpath_4.$$arity=-2),Opal.defs(self,"$join",TMP_File_join_5=function($a){var paths;return paths=Opal.slice.call(arguments,0,arguments.length),__path__.posix.join.apply(__path__,paths)},TMP_File_join_5.$$arity=-1),Opal.defs(self,"$directory?",TMP_File_directory$q_6=function(path){var result=nil,realpath=nil;return!!$truthy(this["$exist?"](path))&&(result=executeIOAction(function(){return!!__fs__.lstatSync(path).isDirectory()}),$truthy(result)||(realpath=this.$realpath(path),$truthy(realpath["$!="](path))&&(result=executeIOAction(function(){return!!__fs__.lstatSync(realpath).isDirectory()}))),result)},TMP_File_directory$q_6.$$arity=1),Opal.defs(self,"$file?",TMP_File_file$q_7=function(path){var result=nil,realpath=nil;return!!$truthy(this["$exist?"](path))&&(result=executeIOAction(function(){return!!__fs__.lstatSync(path).isFile()}),$truthy(result)||(realpath=this.$realpath(path),$truthy(realpath["$!="](path))&&(result=executeIOAction(function(){return!!__fs__.lstatSync(realpath).isFile()}))),result)},TMP_File_file$q_7.$$arity=1),Opal.defs(self,"$readable?",TMP_File_readable$q_8=function(path){return!!$truthy(this["$exist?"](path))&&"\n      try {\n        __fs__.accessSync(path, __fs__.R_OK);\n        return true;\n      } catch (error) {\n        return false;\n      }\n    "},TMP_File_readable$q_8.$$arity=1),Opal.defs(self,"$size",TMP_File_size_9=function(path){return executeIOAction(function(){return __fs__.lstatSync(path).size})},TMP_File_size_9.$$arity=1),Opal.defs(self,"$open",TMP_File_open_10=function(path,mode){var $iter=TMP_File_open_10.$$p,$yield=$iter||nil,file=nil;return $iter&&(TMP_File_open_10.$$p=null),null==mode&&(mode="r"),file=this.$new(path,mode),$yield!==nil?function(){try{return Opal.yield1($yield,file)}finally{file.$close()}}():file},TMP_File_open_10.$$arity=-2),Opal.defs(self,"$stat",TMP_File_stat_11=function(path){return $truthy(path["$respond_to?"]("path"))&&(path=path.$path()),$$$($$($nesting,"File"),"Stat").$new(path)},TMP_File_stat_11.$$arity=1),Opal.defs(self,"$mtime",TMP_File_mtime_12=function(path){return executeIOAction(function(){return __fs__.statSync(path).mtime})},TMP_File_mtime_12.$$arity=1),Opal.defs(self,"$symlink?",TMP_File_symlink$q_13=function(path){return executeIOAction(function(){return __fs__.lstatSync(path).isSymbolicLink()})},TMP_File_symlink$q_13.$$arity=1),Opal.def(self,"$initialize",TMP_File_initialize_14=function(path,flags){var encoding_option_rx=nil;return null==flags&&(flags="r"),flags=flags.$delete("b"),$truthy((encoding_option_rx=/:(.*)/)["$match?"](flags))&&(handle_unsupported_feature("Encoding option (:encoding) is unsupported by Node.js openSync method and will be removed."),flags=flags.$sub(encoding_option_rx,"")),this.path=path,this.flags=flags,this.fd=executeIOAction(function(){return __fs__.openSync(path,flags)})},TMP_File_initialize_14.$$arity=-2),self.$attr_reader("path"),Opal.def(self,"$read",TMP_File_read_15=function(){var self=this,res=nil;return $truthy(self.eof)?"":(res=executeIOAction(function(){return __fs__.readFileSync(self.path).toString()}),self.eof=!0,self.lineno=res.$size(),res)},TMP_File_read_15.$$arity=0),Opal.def(self,"$readlines",TMP_File_readlines_16=function(separator){return null==$gvars["/"]&&($gvars["/"]=nil),null==separator&&(separator=$gvars["/"]),this.$each_line(separator).$to_a()},TMP_File_readlines_16.$$arity=-1),Opal.def(self,"$each_line",TMP_File_each_line_17=function(separator){var $iter=TMP_File_each_line_17.$$p,block=$iter||nil,self=this,lines=nil;if(null==$gvars["/"]&&($gvars["/"]=nil),$iter&&(TMP_File_each_line_17.$$p=null),$iter&&(TMP_File_each_line_17.$$p=null),null==separator&&(separator=$gvars["/"]),$truthy(self.eof))return block!==nil?self:[].$to_enum();if(block!==nil){lines=$$($nesting,"File").$read(self.path),self.eof=!1,self.lineno=0;for(var chomped=lines.$chomp(),trailing=lines.length!=chomped.length,splitted=chomped.split(separator),i=0,length=splitted.length;i<length;i++)self.lineno+=1,i<length-1||trailing?Opal.yield1(block,splitted[i]+separator):Opal.yield1(block,splitted[i]);return self.eof=!0,self}return self.$read().$each_line(separator)},TMP_File_each_line_17.$$arity=-1),Opal.def(self,"$write",TMP_File_write_18=function(string){var self=this;return executeIOAction(function(){return __fs__.writeSync(self.fd,string)})},TMP_File_write_18.$$arity=1),Opal.def(self,"$flush",TMP_File_flush_19=function(){var self=this;return executeIOAction(function(){return __fs__.fsyncSync(self.fd)})},TMP_File_flush_19.$$arity=0),Opal.def(self,"$close",TMP_File_close_20=function(){var self=this;return executeIOAction(function(){return __fs__.closeSync(self.fd)})},TMP_File_close_20.$$arity=0),Opal.def(self,"$mtime",TMP_File_mtime_21=function(){var self=this;return executeIOAction(function(){return __fs__.statSync(self.path).mtime})},TMP_File_mtime_21.$$arity=0)}($nesting[0],$$($nesting,"IO"),$nesting),function($base,$super,$parent_nesting){function $Stat(){}var TMP_Stat_initialize_22,TMP_Stat_file$q_23,TMP_Stat_mtime_24,self=$Stat=$klass($base,null,"Stat",$Stat),def=self.prototype;[self].concat($parent_nesting);null==self.__fs__&&(self.__fs__=nil),def.path=nil,self.__fs__=self.$node_require("fs");var __fs__=self.__fs__;return Opal.def(self,"$initialize",TMP_Stat_initialize_22=function(path){return this.path=path},TMP_Stat_initialize_22.$$arity=1),Opal.def(self,"$file?",TMP_Stat_file$q_23=function(){var self=this;return executeIOAction(function(){return __fs__.statSync(self.path).isFile()})},TMP_Stat_file$q_23.$$arity=0),Opal.def(self,"$mtime",TMP_Stat_mtime_24=function(){var self=this;return executeIOAction(function(){return __fs__.statSync(self.path).mtime})},TMP_Stat_mtime_24.$$arity=0),nil&&"mtime"}($$($nesting,"File"),0,$nesting)},Opal.modules["nodejs/dir"]=function(Opal){Opal.top;var $nesting=[],nil=Opal.nil,$$=(Opal.const_get_qualified,Opal.const_get_relative),$klass=(Opal.breaker,Opal.slice,Opal.klass),$truthy=Opal.truthy,$send=Opal.send;return Opal.add_stubs(["$node_require","$respond_to?","$flat_map","$to_path","$coerce_to!"]),function($base,$super,$parent_nesting){function $Dir(){}var self=$Dir=$klass($base,null,"Dir",$Dir),$nesting=(self.prototype,[self].concat($parent_nesting));null==self.__glob__&&(self.__glob__=nil),null==self.__fs__&&(self.__fs__=nil),self.__glob__=self.$node_require("glob"),self.__fs__=self.$node_require("fs");var __glob__=self.__glob__,__fs__=self.__fs__;return function(self,$parent_nesting){self.prototype;var TMP_$$_1,TMP_pwd_2,TMP_mkdir_3,TMP_entries_4,TMP_glob_5,$nesting=[self].concat($parent_nesting);return Opal.def(self,"$[]",TMP_$$_1=function(glob){return __glob__.sync(glob)},TMP_$$_1.$$arity=1),Opal.def(self,"$pwd",TMP_pwd_2=function(){return process.cwd()},TMP_pwd_2.$$arity=0),Opal.def(self,"$mkdir",TMP_mkdir_3=function(path){return __fs__.mkdirSync(path)},TMP_mkdir_3.$$arity=1),Opal.def(self,"$entries",TMP_entries_4=function(dirname){for(var result=[],entries=__fs__.readdirSync(dirname),i=0,ii=entries.length;i<ii;i++)result.push(entries[i]);return result},TMP_entries_4.$$arity=1),Opal.def(self,"$glob",TMP_glob_5=function(pattern){var TMP_6;return $truthy(pattern["$respond_to?"]("each"))||(pattern=[pattern]),$send(pattern,"flat_map",[],((TMP_6=function(subpattern){TMP_6.$$s;return null==subpattern&&(subpattern=nil),$truthy(subpattern["$respond_to?"]("to_path"))&&(subpattern=subpattern.$to_path()),subpattern=$$($nesting,"Opal")["$coerce_to!"](subpattern,$$($nesting,"String"),"to_str"),__glob__.sync(subpattern)}).$$s=this,TMP_6.$$arity=1,TMP_6))},TMP_glob_5.$$arity=1),Opal.alias(self,"getwd","pwd")}(Opal.get_singleton_class(self),$nesting)}($nesting[0],0,$nesting)},Opal.modules["nodejs/io"]=function(Opal){function $rb_minus(lhs,rhs){return"number"==typeof lhs&&"number"==typeof rhs?lhs-rhs:lhs["$-"](rhs)}var TMP_5,TMP_6,self=Opal.top,$nesting=[],nil=Opal.nil,$$=(Opal.const_get_qualified,Opal.const_get_relative),$klass=(Opal.breaker,Opal.slice,Opal.klass),$lambda=Opal.lambda,$send=Opal.send,$writer=nil;return Opal.add_stubs(["$node_require","$attr_reader","$write","$read","$write_proc=","$-","$tty="]),function($base,$super,$parent_nesting){function $IO(){}var TMP_IO_initialize_1,TMP_IO_write_2,TMP_IO_read_3,TMP_IO_binread_4,self=$IO=$klass($base,null,"IO",$IO),$nesting=(self.prototype,[self].concat($parent_nesting));null==self.__fs__&&(self.__fs__=nil),self.__fs__=self.$node_require("fs");var __fs__=self.__fs__;self.$attr_reader("eof"),self.$attr_reader("lineno"),Opal.def(self,"$initialize",TMP_IO_initialize_1=function(){return this.eof=!1,this.lineno=0},TMP_IO_initialize_1.$$arity=0),Opal.defs(self,"$write",TMP_IO_write_2=function(path,data){return $$($nesting,"File").$write(path,data)},TMP_IO_write_2.$$arity=2),Opal.defs(self,"$read",TMP_IO_read_3=function(path){return $$($nesting,"File").$read(path)},TMP_IO_read_3.$$arity=1),Opal.defs(self,"$binread",TMP_IO_binread_4=function(path){return function(action){try{return action()}catch(error){if("EACCES"===error.code||"EISDIR"===error.code||"EMFILE"===error.code||"ENOENT"===error.code||"EPERM"===error.code)throw Opal.IOError.$new(error.message);throw error}}(function(){return __fs__.readFileSync(path).toString("binary")})},TMP_IO_binread_4.$$arity=1)}($nesting[0],0,$nesting),$writer=[$lambda((TMP_5=function(string){TMP_5.$$s;return null==string&&(string=nil),process.stdout.write(string)},TMP_5.$$s=self,TMP_5.$$arity=1,TMP_5))],$send($$($nesting,"STDOUT"),"write_proc=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)],$writer=[$lambda((TMP_6=function(string){TMP_6.$$s;return null==string&&(string=nil),process.stderr.write(string)},TMP_6.$$s=self,TMP_6.$$arity=1,TMP_6))],$send($$($nesting,"STDERR"),"write_proc=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)],$writer=[!0],$send($$($nesting,"STDOUT"),"tty=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)],$writer=[!0],$send($$($nesting,"STDERR"),"tty=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]},Opal.modules["nodejs/open-uri"]=function(Opal){Opal.top;var $nesting=[],nil=Opal.nil,$module=(Opal.const_get_qualified,Opal.const_get_relative,Opal.breaker,Opal.slice,Opal.module);return Opal.add_stubs(["$node_require"]),function($base,$parent_nesting){function $OpenURI(){}var TMP_OpenURI_request_1,self=$OpenURI=$module($base,"OpenURI",$OpenURI);self.prototype,[self].concat($parent_nesting);null==self.__xmlhttprequest__&&(self.__xmlhttprequest__=nil),self.__xmlhttprequest__=self.$node_require("xmlhttprequest");var __XMLHttpRequest__=self.__xmlhttprequest__.XMLHttpRequest;Opal.defs(self,"$request",TMP_OpenURI_request_1=function(uri){var xhr=new __XMLHttpRequest__;return xhr.open("GET",uri,!1),xhr.send(),xhr},TMP_OpenURI_request_1.$$arity=1)}($nesting[0],$nesting)},Opal.modules.nodejs=function(Opal){var self=Opal.top,$nesting=[],$module=(Opal.nil,Opal.const_get_qualified,Opal.const_get_relative,Opal.breaker,Opal.slice,Opal.module);return Opal.add_stubs(["$require"]),function($base,$parent_nesting){function $NodeJS(){}var self=$NodeJS=$module($base,"NodeJS",$NodeJS);self.prototype,[self].concat($parent_nesting)}($nesting[0],$nesting),self.$require("nodejs/kernel"),self.$require("nodejs/file"),self.$require("nodejs/dir"),self.$require("nodejs/io"),self.$require("nodejs/open-uri")};
