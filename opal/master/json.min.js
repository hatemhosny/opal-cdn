Opal.modules.json=function(Opal){function $rb_minus(lhs,rhs){return"number"==typeof lhs&&"number"==typeof rhs?lhs-rhs:lhs["$-"](rhs)}Opal.top;var $Object_to_json$8,$parent_nesting,$nesting=[],nil=Opal.nil,$$$=Opal.$$$,$$=Opal.$$,$module=Opal.module,$klass=Opal.klass,$send=Opal.send,$hash2=Opal.hash2,$truthy=Opal.truthy;return Opal.add_stubs(["$raise","$new","$push","$[]=","$-","$[]","$create_id","$json_create","$const_get","$attr_accessor","$create_id=","$===","$parse","$generate","$from_object","$merge","$to_json","$responds_to?","$to_io","$write","$to_s","$to_a","$strftime"]),function($base,$JSON_dump$7){var self=$module($base,"JSON"),$nesting=[self].concat($JSON_dump$7),$writer=nil;!function($base,$super,$parent_nesting){[$klass($base,$super,"JSONError")].concat($parent_nesting)}($nesting[0],$$($nesting,"StandardError"),$nesting),function($base,$super,$parent_nesting){[$klass($base,$super,"ParserError")].concat($parent_nesting)}($nesting[0],$$($nesting,"JSONError"),$nesting);var $hasOwn=Opal.hasOwnProperty;function $parse(source){try{return JSON.parse(source)}catch(e){self.$raise($$$($$($nesting,"JSON"),"ParserError"),e.message)}}function to_opal(value,options){var klass,arr,hash,i,ii,k;switch(typeof value){case"string":case"number":return value;case"boolean":return!!value;case"undefined":return nil;case"object":if(!value)return nil;if(value.$$is_array){for(arr=options.array_class.$new(),i=0,ii=value.length;i<ii;i++)arr.$push(to_opal(value[i],options));return arr}for(k in hash=options.object_class.$new(),value)$hasOwn.call(value,k)&&($writer=[k,to_opal(value[k],options)],$send(hash,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]);return options.parse||(klass=hash["$[]"]($$($nesting,"JSON").$create_id()))==nil?hash:$$$("::","Object").$const_get(klass).$json_create(hash)}}(function(self,$parent_nesting){[self].concat($parent_nesting),self.$attr_accessor("create_id")})(Opal.get_singleton_class(self),$nesting),$writer=["json_class"],$send(self,"create_id=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)],Opal.defs(self,"$[]",$JSON_dump$7=function(value,options){return null==options&&(options=$hash2([],{})),$truthy($$($nesting,"String")["$==="](value))?this.$parse(value,options):this.$generate(value,options)},$JSON_dump$7.$$arity=-2),Opal.defs(self,"$parse",$JSON_dump$7=function(source,options){return null==options&&(options=$hash2([],{})),this.$from_object($parse(source),options.$merge($hash2(["parse"],{parse:!0})))},$JSON_dump$7.$$arity=-2),Opal.defs(self,"$parse!",$JSON_dump$7=function(source,options){return null==options&&(options=$hash2([],{})),this.$parse(source,options)},$JSON_dump$7.$$arity=-2),Opal.defs(self,"$load",$JSON_dump$7=function(source,options){return null==options&&(options=$hash2([],{})),this.$from_object($parse(source),options)},$JSON_dump$7.$$arity=-2),Opal.defs(self,"$from_object",$JSON_dump$7=function(js_object,options){var $writer=nil;return null==options&&(options=$hash2([],{})),$truthy(options["$[]"]("object_class"))||($writer=["object_class",$$($nesting,"Hash")],$send(options,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]),$truthy(options["$[]"]("array_class"))||($writer=["array_class",$$($nesting,"Array")],$send(options,"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]),to_opal(js_object,options.$$smap)},$JSON_dump$7.$$arity=-2),Opal.defs(self,"$generate",$JSON_dump$7=function(obj,options){return null==options&&(options=$hash2([],{})),obj.$to_json(options)},$JSON_dump$7.$$arity=-2),Opal.defs(self,"$dump",$JSON_dump$7=function(obj,io,limit){var string;return null==io&&(io=nil),null==limit&&(limit=nil),string=this.$generate(obj),$truthy(io)?($truthy(io["$responds_to?"]("to_io"))&&(io=io.$to_io()),io.$write(string),io):string},$JSON_dump$7.$$arity=-2)}($nesting[0],$nesting),[$Object_to_json$8=$klass($Object_to_json$8=($parent_nesting=$nesting)[0],null,"Object")].concat($parent_nesting),Opal.def($Object_to_json$8,"$to_json",$Object_to_json$8=function(){return this.$to_s().$to_json()},$Object_to_json$8.$$arity=0),function($Enumerable_to_json$9,$parent_nesting){[$Enumerable_to_json$9=$module($Enumerable_to_json$9,"Enumerable")].concat($parent_nesting),Opal.def($Enumerable_to_json$9,"$to_json",$Enumerable_to_json$9=function(){return this.$to_a().$to_json()},$Enumerable_to_json$9.$$arity=0)}($nesting[0],$nesting),function($Array_to_json$10,$parent_nesting){[$Array_to_json$10=$klass($Array_to_json$10,null,"Array")].concat($parent_nesting),Opal.def($Array_to_json$10,"$to_json",$Array_to_json$10=function(){for(var result=[],i=0,length=this.length;i<length;i++)result.push(this[i].$to_json());return"["+result.join(",")+"]"},$Array_to_json$10.$$arity=0)}($nesting[0],$nesting),function($Boolean_to_json$11,$parent_nesting){[$Boolean_to_json$11=$klass($Boolean_to_json$11,null,"Boolean")].concat($parent_nesting),Opal.def($Boolean_to_json$11,"$to_json",$Boolean_to_json$11=function(){return 1==this?"true":"false"},$Boolean_to_json$11.$$arity=0)}($nesting[0],$nesting),function($Hash_to_json$12,$parent_nesting){[$Hash_to_json$12=$klass($Hash_to_json$12,null,"Hash")].concat($parent_nesting),Opal.def($Hash_to_json$12,"$to_json",$Hash_to_json$12=function(){for(var key,value,result=[],i=0,keys=this.$$keys,length=keys.length;i<length;i++)(key=keys[i]).$$is_string?value=this.$$smap[key]:(value=key.value,key=key.key),result.push(key.$to_s().$to_json()+":"+value.$to_json());return"{"+result.join(",")+"}"},$Hash_to_json$12.$$arity=0)}($nesting[0],$nesting),function($NilClass_to_json$13,$parent_nesting){[$NilClass_to_json$13=$klass($NilClass_to_json$13,null,"NilClass")].concat($parent_nesting),Opal.def($NilClass_to_json$13,"$to_json",$NilClass_to_json$13=function(){return"null"},$NilClass_to_json$13.$$arity=0)}($nesting[0],$nesting),function($Numeric_to_json$14,$parent_nesting){[$Numeric_to_json$14=$klass($Numeric_to_json$14,null,"Numeric")].concat($parent_nesting),Opal.def($Numeric_to_json$14,"$to_json",$Numeric_to_json$14=function(){return this.toString()},$Numeric_to_json$14.$$arity=0)}($nesting[0],$nesting),function($String_to_json$15,$parent_nesting){[$String_to_json$15=$klass($String_to_json$15,null,"String")].concat($parent_nesting),Opal.def($String_to_json$15,"$to_json",$String_to_json$15=function(){return JSON.stringify(this)},$String_to_json$15.$$arity=0)}($nesting[0],$nesting),function($Time_to_json$16,$parent_nesting){[$Time_to_json$16=$klass($Time_to_json$16,null,"Time")].concat($parent_nesting),Opal.def($Time_to_json$16,"$to_json",$Time_to_json$16=function(){return this.$strftime("%FT%T%z").$to_json()},$Time_to_json$16.$$arity=0)}($nesting[0],$nesting),function($Date_as_json$18,$Date_to_json$17){$Date_as_json$18=$klass($Date_as_json$18,null,"Date"),[$Date_as_json$18].concat($Date_to_json$17);return Opal.def($Date_as_json$18,"$to_json",$Date_to_json$17=function(){return this.$to_s().$to_json()},$Date_to_json$17.$$arity=0),Opal.def($Date_as_json$18,"$as_json",$Date_as_json$18=function(){return this.$to_s()},$Date_as_json$18.$$arity=0),nil&&"as_json"}($nesting[0],$nesting)};
